/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
var DEFAULT_SETTINGS = {
  notePath: "Full path of a note"
};
var LIRPList = class {
  constructor(lines) {
    this.items = [];
    this.warning = [];
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    lines.splice(0, 1);
    const listBeginItemRegex = /^(-|\d+\.) +(.+)$/;
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.warning.push("No list items in note");
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      this.description = cleanLines.slice(0, listBeginIndexes[0] - 1).join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      this.items.push(cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]).join("\n"));
    }
    this.items.push(cleanLines.slice(listBeginIndexes[listBeginCount - 1]).join("\n"));
  }
  pickRandomItem() {
    if (this.items.length > 0) {
      return this.items[Math.floor(Math.random() * this.items.length)];
    } else {
      return "";
    }
  }
};
var LIRPNote = class {
  constructor(app) {
    this.fullPath = "";
    this.description = "";
    this.list = [];
    this.error = [];
    this.warning = [];
    this.app = app;
  }
  async loadFromNote(noteFullPath) {
    this.fullPath = noteFullPath;
    const file = this.app.vault.getAbstractFileByPath(noteFullPath);
    if (!file) {
      this.error.push("Note not found!");
      return false;
    }
    if (!(file instanceof import_obsidian.TFile)) {
      this.error.push("Invalid file type. Expected a Markdown note file.");
      return false;
    }
    const content = await this.app.vault.cachedRead(file);
    const lines = content.split("\n");
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.error.push("No heading in note");
      return false;
    }
    let headingBegin = 0;
    if (headingIndexes[0] !== 0) {
      this.description = lines.slice(0, headingIndexes[0] - 1).join("\n");
      headingBegin = headingIndexes[0];
    }
    const headingCount = headingIndexes.length;
    for (let currentIndex = headingBegin; currentIndex < headingCount - 1; currentIndex++) {
      this.list.push(new LIRPList(lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1])));
    }
    this.list.push(new LIRPList(lines.slice(headingIndexes[headingCount - 1])));
    return true;
  }
  getListSuggestion() {
    let listSuggestion;
    listSuggestion = [];
    this.list.forEach((element) => {
      listSuggestion.push({
        title: element.title,
        description: element.description
      });
    });
    return listSuggestion;
  }
  pickRandomItemFromList(listTitle) {
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      return currentList.pickRandomItem();
    } else {
      return "";
    }
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items;
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    el.createEl("small", { text: item.description });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item.title);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.openTitlePicker(this.settings.notePath);
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.doTheJob(this.settings.notePath + ".md");
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  async doTheJob(fullNotePath) {
    const currentLIRP = new LIRPNote(this.app);
    const loadSuccess = await currentLIRP.loadFromNote(fullNotePath);
    if (!loadSuccess) {
      currentLIRP.error.forEach((element) => new import_obsidian.Notice(element));
      return;
    }
    new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(), (title) => {
      this.insertString(currentLIRP.pickRandomItemFromList(title));
    }).open();
  }
  insertString(currentString) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const editor = activeView.editor;
      const selection = editor.getSelection();
      editor.replaceSelection(currentString);
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  transformerEnSuggestions(strings) {
    return strings.map((str) => ({
      title: str,
      description: ""
    }));
  }
  async openTitlePicker(notePath) {
    const fullNotePath = notePath + ".md";
    const file = this.app.vault.getAbstractFileByPath(fullNotePath);
    if (!file) {
      new import_obsidian.Notice("Note not found!");
      return;
    }
    if (!(file instanceof import_obsidian.TFile)) {
      new import_obsidian.Notice("Invalid file type. Expected a TFile.");
      return;
    }
    const content = await this.app.vault.read(file);
    const titles = this.getTitlesFromNote(content);
    if (titles.length === 0) {
      new import_obsidian.Notice("No titles found in the note!");
      return;
    }
    new LIRPSuggestModal(this.app, this.transformerEnSuggestions(titles), (title) => {
      this.insertRandomEntry(content, title);
    }).open();
  }
  getTitlesFromNote(content) {
    const titleRegex = /^#+\s+(.+)$/gm;
    const titles = [];
    let match;
    while ((match = titleRegex.exec(content)) !== null) {
      titles.push(match[1]);
    }
    return titles;
  }
  async insertRandomEntry(content, title) {
    const entries = this.getEntriesFromNote(content, title);
    if (entries.length === 0) {
      new import_obsidian.Notice("No entries found for this title!");
      return;
    }
    const randomEntry = entries[Math.floor(Math.random() * entries.length)].replace(/\n/g, "");
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const editor = activeView.editor;
      const selection = editor.getSelection();
      editor.replaceSelection(randomEntry);
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
  }
  getEntriesFromNote(content, title) {
    const titleRegex = new RegExp(`^#+\\s+${title}$`, "m");
    const titleMatch = titleRegex.exec(content);
    if (!titleMatch) {
      return [];
    }
    const startIndex = titleMatch.index + titleMatch[0].length;
    let endIndex = content.indexOf("\n#", startIndex);
    if (endIndex === -1) {
      endIndex = content.length;
    }
    const listItemRegex = /^(-|\d+\.) +(.+)$/gm;
    const entries = [];
    let currentEntry;
    let currentEntrySplit;
    let repeat;
    let itemString;
    const listContent = content.substring(startIndex, endIndex);
    while ((currentEntry = listItemRegex.exec(listContent)) !== null) {
      let fullString = currentEntry[2];
      const itemWithNumberRegEx = /^\((\d+)\)\s+(.+)$/m;
      if ((currentEntrySplit = itemWithNumberRegEx.exec(fullString)) !== null) {
        repeat = Number(currentEntrySplit[1]);
        itemString = currentEntrySplit[2];
      } else {
        repeat = 1;
        itemString = fullString;
      }
      for (let i = 0; i < repeat; i++) {
        entries.push(itemString);
      }
    }
    return entries;
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Note Path").setDesc("Path to the note containing the lists.").addText((text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
      this.plugin.settings.notePath = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU3VnZ2VzdE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcblxuZnVuY3Rpb24gZmluZEluZGV4ZXM8VD4oYW5BcnJheTogVFtdLCBwcmVkaWNhdGU6IChlbGVtZW50OiBULCBpbmRleDogbnVtYmVyKSA9PiBib29sZWFuKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGluZGV4ZXM6IG51bWJlcltdID0gW107XG4gICAgYW5BcnJheS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHByZWRpY2F0ZShlbGVtZW50LCBpbmRleCkpIHtcbiAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaW5kZXhlcztcbiAgfVxuaW50ZXJmYWNlIExJUlBQbHVnaW5TZXR0aW5ncyB7XG4gICAgbm90ZVBhdGg6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTElSUFBsdWdpblNldHRpbmdzID0ge1xuICAgIG5vdGVQYXRoOiAnRnVsbCBwYXRoIG9mIGEgbm90ZSdcbn07XG5cbmludGVyZmFjZSBMSVJQTGlzdEludGVyZmFjZSB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGhpZGRlbjogYm9vbGVhbjtcbiAgICBtYWNybzogYm9vbGVhbjtcbiAgICBpdGVtczogc3RyaW5nW107XG4gICAgd2FybmluZzogc3RyaW5nW107XG4gICAgcGlja1JhbmRvbUl0ZW0oKTogc3RyaW5nO1xufVxuXG5jbGFzcyBMSVJQTGlzdCBpbXBsZW1lbnRzIExJUlBMaXN0SW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaGlkZGVuOiBib29sZWFuO1xuICAgIG1hY3JvOiBib29sZWFuO1xuICAgIGl0ZW1zOiBzdHJpbmdbXTtcbiAgICB3YXJuaW5nOiBzdHJpbmdbXVxuXG4gICAgY29uc3RydWN0b3IobGluZXM6IHN0cmluZ1tdKSB7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy53YXJuaW5nID0gW107XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoZWFkaW5nUmVnRXggPSAvXiMgKyguKykkLztcbiAgICAgICAgLy8gdG8gZG8gaGlkZGVuIGxpc3RcbiAgICAgICAgdGhpcy50aXRsZSA9IGxpbmVzWzBdLnJlcGxhY2UoaGVhZGluZ1JlZ0V4LCBcIiQxXCIpO1xuICAgICAgICBsaW5lcy5zcGxpY2UoMCwgMSk7XG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkl0ZW1SZWdleCA9IC9eKC18XFxkK1xcLikgKyguKykkLztcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gbGlzdEJlZ2luSXRlbVJlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMud2FybmluZy5wdXNoKCdObyBsaXN0IGl0ZW1zIGluIG5vdGUnKTtcbiAgICAgICAgICAgIC8vIHRvIGRvIDogTWFjcm8gIVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFuTGluZXMgPSBsaW5lcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnJlcGxhY2UobGlzdEJlZ2luSXRlbVJlZ2V4LCBcIiQyXCIpXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSBkZXNjcmlwdGlvblxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGNsZWFuTGluZXMuc2xpY2UoMCwgbGlzdEJlZ2luSW5kZXhlc1swXSAtMSkuam9pbignXFxuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkNvdW50ID0gbGlzdEJlZ2luSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgZm9yIChsZXQgY3VycmVudEluZGV4ID0gMDsgY3VycmVudEluZGV4IDwgKGxpc3RCZWdpbkNvdW50IC0gMSk7IGN1cnJlbnRJbmRleCsrKSB7XG4gICAgICAgICAgICAvLyB0byBkbyBpdGVtIHdlaWdodFxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKChjbGVhbkxpbmVzLnNsaWNlKGxpc3RCZWdpbkluZGV4ZXNbY3VycmVudEluZGV4XSwgbGlzdEJlZ2luSW5kZXhlc1tjdXJyZW50SW5kZXggKyAxXSkuam9pbignXFxuJykpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goKGNsZWFuTGluZXMuc2xpY2UobGlzdEJlZ2luSW5kZXhlc1tsaXN0QmVnaW5Db3VudCAtIDFdKS5qb2luKCdcXG4nKSkpO1xuICAgIH1cblxuICAgIHBpY2tSYW5kb21JdGVtKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuaXRlbXMubGVuZ3RoKV07IC8vLnJlcGxhY2UoL1xcbi9nLCAnJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5pbnRlcmZhY2UgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIGZ1bGxQYXRoOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBsaXN0OiBMSVJQTGlzdFtdO1xuICAgIGVycm9yOiBzdHJpbmdbXTtcbiAgICB3YXJuaW5nOiBzdHJpbmdbXTtcbiAgICBsb2FkRnJvbU5vdGUobm90ZUZ1bGxQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xuICAgIGdldExpc3RTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW107XG4gICAgcGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGU6IHN0cmluZyk6IHN0cmluZzsgXG59XG5cbmNsYXNzIExJUlBOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIGZ1bGxQYXRoOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBsaXN0OiBMSVJQTGlzdFtdO1xuICAgIGVycm9yOiBzdHJpbmdbXTtcbiAgICB3YXJuaW5nOiBzdHJpbmdbXTtcbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yIChhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmZ1bGxQYXRoID0gXCJcIjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgICAgICB0aGlzLmVycm9yID0gW107XG4gICAgICAgIHRoaXMud2FybmluZyA9IFtdO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkRnJvbU5vdGUobm90ZUZ1bGxQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdGhpcy5mdWxsUGF0aCA9IG5vdGVGdWxsUGF0aDtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub3RlRnVsbFBhdGgpO1xuXG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5wdXNoKCdOb3RlIG5vdCBmb3VuZCEnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IucHVzaCgnSW52YWxpZCBmaWxlIHR5cGUuIEV4cGVjdGVkIGEgTWFya2Rvd24gbm90ZSBmaWxlLicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG5cbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ2V4ID0gL14jIC4rJC87XG4gICAgICAgIGxldCBoZWFkaW5nSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gaGVhZGluZ1JlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAoaGVhZGluZ0luZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLnB1c2goJ05vIGhlYWRpbmcgaW4gbm90ZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoZWFkaW5nQmVnaW4gPSAwO1xuICAgICAgICBpZiAoaGVhZGluZ0luZGV4ZXNbMF0gIT09IDApIHtcbiAgICAgICAgICAgIC8vIHRoZXJlIGlzIGEgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBsaW5lcy5zbGljZSgwLCBoZWFkaW5nSW5kZXhlc1swXSAtMSkuam9pbignXFxuJyk7XG4gICAgICAgICAgICBoZWFkaW5nQmVnaW4gPSBoZWFkaW5nSW5kZXhlc1swXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkaW5nQ291bnQgPSBoZWFkaW5nSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgZm9yIChsZXQgY3VycmVudEluZGV4ID0gaGVhZGluZ0JlZ2luOyBjdXJyZW50SW5kZXggPCAoaGVhZGluZ0NvdW50IC0gMSk7IGN1cnJlbnRJbmRleCsrKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3QucHVzaChuZXcgTElSUExpc3QobGluZXMuc2xpY2UoaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4XSwgaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0LnB1c2gobmV3IExJUlBMaXN0KGxpbmVzLnNsaWNlKGhlYWRpbmdJbmRleGVzW2hlYWRpbmdDb3VudCAtIDFdKSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGdldExpc3RTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICBsZXQgbGlzdFN1Z2dlc3Rpb246IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW107XG4gICAgICAgIGxpc3RTdWdnZXN0aW9uID0gW107XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAvLyB0byBkbyBoaWRkZW4gbGlzdFxuICAgICAgICAgICAgbGlzdFN1Z2dlc3Rpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGVsZW1lbnQudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVsZW1lbnQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpc3RTdWdnZXN0aW9uO1xuICAgIH1cblxuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjdXJyZW50TGlzdCA9IHRoaXMubGlzdC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LnRpdGxlID09PSBsaXN0VGl0bGUpO1xuICAgICAgICBpZiAoY3VycmVudExpc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMaXN0LnBpY2tSYW5kb21JdGVtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIlxuICAgICAgICB9XG4gICAgfSBcblxufVxuaW50ZXJmYWNlIExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGNsYXNzIExJUlBTdWdnZXN0TW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8TElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U+IHtcbiAgICBpdGVtczogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2VbXTtcbiAgICBjYWxsYmFjazogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpdGVtczogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2VbXSwgY2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cblxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXM7XG4gICAgICB9XG4gICAgXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSwgZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGl0ZW0udGl0bGUgfSk7XG4gICAgICAgIGVsLmNyZWF0ZUVsKCdzbWFsbCcsIHt0ZXh0OiBpdGVtLmRlc2NyaXB0aW9ufSk7XG4gICAgICB9XG4gIFxuICAgICAgb25DaG9vc2VTdWdnZXN0aW9uKGl0ZW06IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soaXRlbS50aXRsZSk7XG4gICAgICB9fVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0SXRlbVJhbmRvbVBpY2tlciBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IExJUlBQbHVnaW5TZXR0aW5ncztcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2xpc3QtdHJlZScsICdQaWNrIHJhbmRvbSBsaXN0IGl0ZW0nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wZW5UaXRsZVBpY2tlcih0aGlzLnNldHRpbmdzLm5vdGVQYXRoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LXJhbmRvbS1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgcmFuZG9tIGl0ZW0gZnJvbSBsaXN0JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb1RoZUpvYih0aGlzLnNldHRpbmdzLm5vdGVQYXRoICsgJy5tZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IExJUlBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG5cbiAgICB9XG5cbiAgICBhc3luYyBkb1RoZUpvYihmdWxsTm90ZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjdXJyZW50TElSUCA9IG5ldyBMSVJQTm90ZSh0aGlzLmFwcCk7XG5cbiAgICAgICAgY29uc3QgbG9hZFN1Y2Nlc3MgPSBhd2FpdCBjdXJyZW50TElSUC5sb2FkRnJvbU5vdGUoZnVsbE5vdGVQYXRoKTtcbiAgICAgICAgaWYgKCFsb2FkU3VjY2Vzcykge1xuICAgICAgICAgICAgY3VycmVudExJUlAuZXJyb3IuZm9yRWFjaCgoZWxlbWVudCkgPT4gbmV3IE5vdGljZShlbGVtZW50KSk7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oKSwgKHRpdGxlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluc2VydFN0cmluZyhjdXJyZW50TElSUC5waWNrUmFuZG9tSXRlbUZyb21MaXN0KHRpdGxlKSk7XG4gICAgICAgIH0pLm9wZW4oKTtcbiAgICB9XG5cbiAgICBpbnNlcnRTdHJpbmcoY3VycmVudFN0cmluZzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGN1cnJlbnRTdHJpbmcpO1xuICAgICAgICAgICAgLy8gY29uc3QgcG9zaXRpb24gPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAvLyBlZGl0b3IucmVwbGFjZVJhbmdlKHJhbmRvbUVudHJ5LCBwb3NpdGlvbik7IC8vLCBwb3NpdGlvbik7XG5cbiAgICAgICAgICAgIC8vIC8vIERcdTAwRTlwbGFjZXIgbGUgY3Vyc2V1ciBcdTAwRTAgbGEgZmluIGRlIGwnaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBjb25zdCBuZXdQb3NpdGlvbiA9IHsgbGluZTogcG9zaXRpb24ubGluZSwgY2g6IHBvc2l0aW9uLmNoICsgcmFuZG9tRW50cnkubGVuZ3RoIH07XG4gICAgICAgICAgICAvLyBlZGl0b3Iuc2V0Q3Vyc29yKG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgTWFya2Rvd24gZWRpdG9yIGZvdW5kLlwiKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybWVyRW5TdWdnZXN0aW9ucyhzdHJpbmdzOiBzdHJpbmdbXSk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICByZXR1cm4gc3RyaW5ncy5tYXAoc3RyID0+ICh7XG4gICAgICAgICAgdGl0bGU6IHN0cixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIlxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBcbiAgICBhc3luYyBvcGVuVGl0bGVQaWNrZXIobm90ZVBhdGg6IHN0cmluZykge1xuICAgICAgICBjb25zdCBmdWxsTm90ZVBhdGggPSBub3RlUGF0aCArICcubWQnO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxOb3RlUGF0aCk7XG5cbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdOb3RlIG5vdCBmb3VuZCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ludmFsaWQgZmlsZSB0eXBlLiBFeHBlY3RlZCBhIFRGaWxlLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnN0IHRpdGxlcyA9IHRoaXMuZ2V0VGl0bGVzRnJvbU5vdGUoY29udGVudCk7XG5cbiAgICAgICAgaWYgKHRpdGxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHRpdGxlcyBmb3VuZCBpbiB0aGUgbm90ZSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgdGhpcy50cmFuc2Zvcm1lckVuU3VnZ2VzdGlvbnModGl0bGVzKSwgKHRpdGxlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluc2VydFJhbmRvbUVudHJ5KGNvbnRlbnQsIHRpdGxlKTtcbiAgICAgICAgfSkub3BlbigpO1xuICAgIH1cblxuICAgIGdldFRpdGxlc0Zyb21Ob3RlKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgdGl0bGVSZWdleCA9IC9eIytcXHMrKC4rKSQvZ207XG4gICAgICAgIGNvbnN0IHRpdGxlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gdGl0bGVSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGl0bGVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aXRsZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5zZXJ0UmFuZG9tRW50cnkoY29udGVudDogc3RyaW5nLCB0aXRsZTogc3RyaW5nKSB7XG5cbiAgICAgICAgY29uc3QgZW50cmllcyA9IHRoaXMuZ2V0RW50cmllc0Zyb21Ob3RlKGNvbnRlbnQsIHRpdGxlKTtcblxuICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGVudHJpZXMgZm91bmQgZm9yIHRoaXMgdGl0bGUhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmFuZG9tRW50cnkgPSBlbnRyaWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVudHJpZXMubGVuZ3RoKV0ucmVwbGFjZSgvXFxuL2csICcnKTtcbiAgICAgICAgLy8gY29uc3QgcmFuZG9tRW50cnkgPSBlbnRyaWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVudHJpZXMubGVuZ3RoKV0udHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHJhbmRvbUVudHJ5KTtcbiAgICAgICAgICAgIC8vIGNvbnN0IHBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICAgICAgLy8gZWRpdG9yLnJlcGxhY2VSYW5nZShyYW5kb21FbnRyeSwgcG9zaXRpb24pOyAvLywgcG9zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyAvLyBEXHUwMEU5cGxhY2VyIGxlIGN1cnNldXIgXHUwMEUwIGxhIGZpbiBkZSBsJ2luc2VydGlvblxuICAgICAgICAgICAgLy8gY29uc3QgbmV3UG9zaXRpb24gPSB7IGxpbmU6IHBvc2l0aW9uLmxpbmUsIGNoOiBwb3NpdGlvbi5jaCArIHJhbmRvbUVudHJ5Lmxlbmd0aCB9O1xuICAgICAgICAgICAgLy8gZWRpdG9yLnNldEN1cnNvcihuZXdQb3NpdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gYWN0aXZlIE1hcmtkb3duIGVkaXRvciBmb3VuZC5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRFbnRyaWVzRnJvbU5vdGUoY29udGVudDogc3RyaW5nLCB0aXRsZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCB0aXRsZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiMrXFxcXHMrJHt0aXRsZX0kYCwgJ20nKTtcbiAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IHRpdGxlUmVnZXguZXhlYyhjb250ZW50KTtcblxuICAgICAgICBpZiAoIXRpdGxlTWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSB0aXRsZU1hdGNoLmluZGV4ICsgdGl0bGVNYXRjaFswXS5sZW5ndGg7XG4gICAgICAgIGxldCBlbmRJbmRleCA9IGNvbnRlbnQuaW5kZXhPZignXFxuIycsIHN0YXJ0SW5kZXgpO1xuICAgICAgICBpZiAoZW5kSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBlbmRJbmRleCA9IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGlzdEl0ZW1SZWdleCA9IC9eKC18XFxkK1xcLikgKyguKykkL2dtO1xuICAgICAgICBjb25zdCBlbnRyaWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudEVudHJ5O1xuICAgICAgICBsZXQgY3VycmVudEVudHJ5U3BsaXQ7XG4gICAgICAgIGxldCByZXBlYXQ6IG51bWJlcjtcbiAgICAgICAgbGV0IGl0ZW1TdHJpbmc6IHN0cmluZztcbiAgICAgICAgY29uc3QgbGlzdENvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gICAgICAgIHdoaWxlICgoY3VycmVudEVudHJ5ID0gbGlzdEl0ZW1SZWdleC5leGVjKGxpc3RDb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGxldCBmdWxsU3RyaW5nID0gY3VycmVudEVudHJ5WzJdO1xuICAgICAgICAgICAgY29uc3QgaXRlbVdpdGhOdW1iZXJSZWdFeCA9IC9eXFwoKFxcZCspXFwpXFxzKyguKykkL207XG4gICAgICAgICAgICBpZiAoKGN1cnJlbnRFbnRyeVNwbGl0ID0gaXRlbVdpdGhOdW1iZXJSZWdFeC5leGVjKGZ1bGxTdHJpbmcpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlcGVhdCA9IE51bWJlcihjdXJyZW50RW50cnlTcGxpdFsxXSk7XG4gICAgICAgICAgICAgICAgaXRlbVN0cmluZyA9IGN1cnJlbnRFbnRyeVNwbGl0WzJdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXBlYXQgPSAxO1xuICAgICAgICAgICAgICAgIGl0ZW1TdHJpbmcgPSBmdWxsU3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGVudHJpZXMucHVzaChpdGVtU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cmllcztcbiAgICB9XG59XG5cbmNsYXNzIExJUlBTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBMaXN0SXRlbVJhbmRvbVBpY2tlcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExpc3RJdGVtUmFuZG9tUGlja2VyKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NldHRpbmdzIGZvciBMaXN0IEl0ZW0gUmFuZG9tIFBpY2tlci4nIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05vdGUgUGF0aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnUGF0aCB0byB0aGUgbm90ZSBjb250YWluaW5nIHRoZSBsaXN0cy4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB0aGUgcGF0aCB0byB5b3VyIG5vdGUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlUGF0aClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXlHO0FBRXpHLFNBQVMsWUFBZSxTQUFjLFdBQTZEO0FBQy9GLFFBQU0sVUFBb0IsQ0FBQztB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
