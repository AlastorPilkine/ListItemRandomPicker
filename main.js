/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
function escapeRegex(stringToEscape) {
  return stringToEscape.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
var DEFAULT_SETTINGS = {
  notePath: "Path of a note or a folder",
  showWarning: true,
  maxMacroDepth: 1,
  selectionForNotification: "!",
  deleteSelectionForNotification: false,
  nullValue: "null",
  escapeValue: "//",
  showNoteSelector: true
};
var DiceRoller = class {
  checkDice(diceString) {
    const diceRegex = /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i;
    return diceRegex.test(diceString);
  }
  rollDice(diceString) {
    if (!this.checkDice(diceString)) {
      throw new Error("Syntaxe de lancer de d\xE9s invalide.");
    }
    const [_, countStr, sidesStr, modifierStr, explodeStr, keepStr, keepLowStr] = diceString.match(
      /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i
    );
    const count = parseInt(countStr || "1");
    const sides = parseInt(sidesStr);
    const modifier = parseInt(modifierStr || "0");
    const explode = !!explodeStr;
    const keep = keepStr ? parseInt(keepStr.slice(1)) : void 0;
    const keepLow = keepLowStr ? parseInt(keepLowStr.slice(2)) : void 0;
    let results = [];
    for (let i = 0; i < count; i++) {
      let result = Math.floor(Math.random() * sides) + 1;
      results.push(result);
      if (explode) {
        while (result === sides) {
          result = Math.floor(Math.random() * sides) + 1;
          results.push(result);
        }
      }
    }
    if (keep) {
      results.sort((a, b) => b - a);
      results = results.slice(0, keep);
    } else if (keepLow) {
      results.sort((a, b) => a - b);
      results = results.slice(0, keepLow);
    }
    const sum = results.reduce((acc, val) => acc + val, 0);
    return sum + modifier;
  }
  /**
   * Remplace les lancers de dés encadrés par des délimiteurs dans une chaîne multi-lignes.
   *
   * @param {string} text Le texte multi-lignes contenant les lancers de dés.
   * @param {string} startDelimiter Le délimiteur de début des lancers de dés.
   * @param {string} endDelimiter Le délimiteur de fin des lancers de dés.
   * @returns {string} Le texte avec les lancers de dés remplacés par leurs résultats.
   */
  replaceDiceRolls(text, startDelimiter, endDelimiter) {
    const regex = new RegExp(
      `${this.escapeRegExp(startDelimiter)}([^${this.escapeRegExp(
        startDelimiter + endDelimiter
      )}]+)${this.escapeRegExp(endDelimiter)}`,
      "g"
    );
    return text.replace(regex, (match, diceString) => {
      try {
        const result = this.rollDice(diceString);
        return result.toString();
      } catch (error) {
        return match;
      }
    });
  }
  /**
   * Échappe les caractères spéciaux pour une utilisation dans une expression régulière.
   *
   * @param {string} string La chaîne de caractères à échapper.
   * @returns {string} La chaîne de caractères échappée.
   */
  escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }
};
var LIRPLogElement = class {
  getType() {
    const errors = ["dupInNote", "dupInFolder"];
    return "warning";
  }
  constructor(noteName, listTitle, status, complement = "") {
    this.noteName = noteName;
    this.listTitle = listTitle;
    this.status = status;
    this.complement = complement;
  }
  toString() {
    return `${this.getType()} / ${this.noteName} / ${this.listTitle} / ${this.status} / ${this.complement}`;
  }
};
var LIRPLog = class {
  constructor() {
    this.logs = [];
  }
  push(noteName, listTitle, status, complement = "") {
    this.logs.push(new LIRPLogElement(noteName, listTitle, status, complement));
  }
  add(logs) {
    this.logs = this.logs.concat(logs.logs);
  }
  get(type) {
    const logsForType = this.logs.filter(
      (element) => element.getType() === type
    );
    let getArray = [];
    logsForType.map((element) => {
      getArray.push(element.toString());
    });
    return getArray;
  }
};
var LIRPList = class {
  static getSettingString(value = "") {
    if (value === "") {
      return "- [ ] Hide this list\n";
    } else {
      switch (value) {
        case "hide":
          return "^- \\[[x ]\\] Hide this list$";
        case "hide_ticked":
          return "^- \\[x\\] Hide this list$";
      }
      ;
    }
    ;
  }
  constructor(noteName, lines, nullValue, escapeString) {
    this.title = "";
    this.description = "";
    this.hidden = false;
    this.items = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    lines.shift();
    const listBeginItemRegex = /^(-|\d+\.) (?!\[) *(.+)$/;
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.logs.push(noteName, this.title, "emptyList");
      this.hidden = true;
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      let mdDescription = cleanLines.slice(0, listBeginIndexes[0]);
      if (mdDescription[0] === "") {
        mdDescription.shift();
      }
      let isHidden = false;
      const hideRegexTicked = new RegExp(LIRPList.getSettingString("hide_ticked"));
      const hideRegex = new RegExp(LIRPList.getSettingString("hide"));
      mdDescription.map((element) => {
        if (hideRegexTicked.test(element)) {
          isHidden = true;
          this.hidden = isHidden;
        }
        ;
      });
      mdDescription = mdDescription.filter((element) => !hideRegex.test(element));
      this.description = mdDescription.join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    let item;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      item = cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]);
      this.pushItemBasedOnWeight(item);
    }
    item = cleanLines.slice(listBeginIndexes[listBeginCount - 1]);
    if (item.at(-1) === "") {
      item.pop();
    }
    this.pushItemBasedOnWeight(item);
  }
  pushItemBasedOnWeight(item) {
    const ItemWithWeightRegEx = /^\((\d+)\)\s+(.+)$/;
    let regExExecution;
    let repeat;
    if ((regExExecution = ItemWithWeightRegEx.exec(item[0])) !== null) {
      repeat = Number(regExExecution[1]);
      item[0] = regExExecution[2];
    } else {
      repeat = 1;
    }
    if (item[0] === this.nullValue) {
      if (item.length === 1) {
        item[0] = "";
      } else {
        item.shift();
      }
      ;
    }
    ;
    const stringRegex = `^ *${this.escapeString}(.*)`;
    const escapeStringRegEx = new RegExp(stringRegex, "gm");
    const escapeItem = item.map((element) => {
      return element.replace(escapeStringRegEx, "$1");
    });
    const stringItem = escapeItem.join("\n");
    for (let i = 0; i < repeat; i++) {
      this.items.push(stringItem);
    }
  }
  getSuggestion(noteName) {
    const suggestion = {
      noteName,
      title: this.title,
      description: this.description.split("\n")[0]
    };
    return suggestion;
  }
  notHidden() {
    return !this.hidden;
  }
  pickRandomItem() {
    let randomItem = "";
    if (this.items.length > 0) {
      randomItem = this.items[Math.floor(Math.random() * this.items.length)];
    }
    return randomItem;
  }
  getWarning() {
    return this.logs.get("warning");
  }
};
var LIRPNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.noteName = "";
    this.description = "";
    this.list = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.rollDice = true;
    this.referenceMaxDepth = referenceMaxDepth;
  }
  getListTitles() {
    let listTitles = [];
    this.list.map((element) => {
      listTitles.push(element.title);
    });
    return listTitles;
  }
  loadFromNote(noteName, noteContent) {
    this.noteName = noteName;
    const lines = noteContent.split("\n");
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.logs.push(noteName, "", "emptyNote");
      return false;
    }
    if (headingIndexes[0] !== 0) {
      this.description = lines.slice(0, headingIndexes[0]).join("\n");
    }
    const headingCount = headingIndexes.length;
    for (let currentIndex = 0; currentIndex < headingCount - 1; currentIndex++) {
      this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1]), this.nullValue, this.escapeString));
    }
    ;
    this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[headingCount - 1]), this.nullValue, this.escapeString));
    return true;
  }
  pushListIfNotExists(listToPush) {
    if (this.getListTitles().contains(listToPush.title)) {
      this.logs.push(this.noteName, listToPush.title, "dupInNote");
      return false;
    } else {
      this.list.push(listToPush);
      return true;
    }
    ;
  }
  getListSuggestion(withHidden = false) {
    const noteSuggestion = new LIRPSuggestionList();
    this.list.forEach((element) => {
      if (withHidden || element.notHidden()) {
        noteSuggestion.push(element.getSuggestion(this.noteName));
      }
    });
    return noteSuggestion;
  }
  execReferenceSubstitution(item) {
    const stringMacroRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    const macroRefRegex = new RegExp(stringMacroRefRegex, "mg");
    let match;
    let modifiedItem = item;
    let listTitle = "";
    while ((match = macroRefRegex.exec(modifiedItem)) !== null) {
      let newValue = this.pickRandomItemFromList(match[1], false);
      listTitle = match[0];
      modifiedItem = modifiedItem.replace(listTitle, newValue);
      macroRefRegex.lastIndex = match.index + newValue.length;
    }
    return {
      lastListTitle: listTitle,
      modifiedItem
    };
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let randomItem = "";
    let returnOfExecMacro = {
      lastListTitle: listTitle,
      modifiedItem: ""
    };
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      randomItem = currentList.pickRandomItem();
      for (let repeat = 0; repeat < this.referenceMaxDepth; repeat++) {
        returnOfExecMacro = this.execReferenceSubstitution(randomItem);
        randomItem = returnOfExecMacro.modifiedItem;
      }
    }
    const stringMacroRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    const macroRefRegex = new RegExp(stringMacroRefRegex);
    if (macroRefRegex.test(randomItem) && workOnReference) {
      new import_obsidian.Notice(`Macro depth limit reached in note "${this.noteName}" after calling "${returnOfExecMacro.lastListTitle}"`);
    }
    ;
    if (workOnReference && this.rollDice) {
      const diceRoller = new DiceRoller();
      return diceRoller.replaceDiceRolls(randomItem, "{", "}");
    } else {
      return randomItem;
    }
  }
  getError() {
    return this.logs.get("error");
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.list.forEach((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPMultiNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.multiNote = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.referenceMaxDepth = referenceMaxDepth;
    this.logs = new LIRPLog();
  }
  loadFromNote(noteName, noteContent) {
    const currentNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    const status = currentNote.loadFromNote(noteName, noteContent);
    this.pushNoteIfListNotExists(currentNote);
    return status;
  }
  pushNoteIfListNotExists(noteToPush) {
    const allListTitle = this.getListTitles();
    let unic = true;
    noteToPush.getListTitles().map((element) => {
      if (allListTitle.contains(element)) {
        this.logs.push(noteToPush.noteName, element, "dupInFolder", this.getNoteNameFromListTitle(element));
        unic = false;
      }
    });
    if (unic) {
      this.multiNote.push(noteToPush);
    } else {
      this.logs.add(noteToPush.logs);
    }
    ;
    return unic;
  }
  getNoteNameFromListTitle(listTitle) {
    let note = this.multiNote.find(
      (element) => element.getListTitles().contains(listTitle)
    );
    if (note !== void 0) {
      return note.noteName;
    } else {
      return "";
    }
    ;
  }
  getListTitles() {
    let listTitles = [];
    this.multiNote.map((element) => {
      listTitles = listTitles.concat(element.getListTitles());
    });
    return listTitles;
  }
  getListSuggestion(withHidden = false) {
    let allListSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      allListSuggestion = allListSuggestion.concat(element.getListSuggestion(withHidden));
    });
    return allListSuggestion;
  }
  getNoteSuggestion(withHidden = false) {
    let noteSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      if (element.getListSuggestion(withHidden).length > 0) {
        noteSuggestion.push({
          noteName: element.noteName,
          title: element.noteName,
          description: element.description.split("\n")[0]
        });
      }
      ;
    });
    return noteSuggestion;
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    return superNote.pickRandomItemFromList(listTitle);
  }
  getError() {
    let allError = [];
    this.multiNote.map((element) => {
      allError = allError.concat(element.getError());
    });
    return allError;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.multiNote.map((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.multiNote.length;
  }
};
var LIRPSuggestionList = class {
  constructor() {
    this.list = [];
  }
  push(element) {
    this.list.push(element);
  }
  filterByNoteName(noteName) {
    const filterList = new LIRPSuggestionList();
    this.list.map((element) => {
      if (element.noteName === noteName) {
        filterList.push(element);
      }
    });
    return filterList;
  }
  filter(callback) {
    const filteredList = new LIRPSuggestionList();
    for (let i = 0; i < this.list.length; i++) {
      if (callback(this.list[i], i, this.list)) {
        filteredList.push(this.list[i]);
      }
    }
    return filteredList;
  }
  concat(otherList) {
    const newList = new LIRPSuggestionList();
    newList.list = this.list.concat(otherList.list);
    return newList;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items.filter(
      (item) => item.title.toLowerCase().includes(query.toLowerCase())
    ).list;
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    let message = item.description;
    el.createEl("small", { text: message });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.doTheJob("note");
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.doTheJob("note");
      }
    });
    this.addCommand({
      id: "insert-setting-item",
      name: "Insert list settings values",
      callback: () => {
        this.insertString(LIRPList.getSettingString());
      }
    });
    this.addCommand({
      id: "insert-reference-item",
      name: "Insert list reference",
      callback: () => {
        this.doTheJob("reference");
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  async doTheJob(action) {
    const allLIRPFiles = this.getLIRPFiles(this.settings.notePath);
    let currentLIRP = new LIRPMultiNote(this.settings.nullValue, this.settings.escapeValue, this.settings.maxMacroDepth);
    let loadWithoutError = true;
    for (const currentFile of allLIRPFiles) {
      const currentFSObject = this.app.vault.getAbstractFileByPath(currentFile);
      let content = "";
      if (currentFSObject instanceof import_obsidian.TFile) {
        content = await this.app.vault.cachedRead(currentFSObject);
        loadWithoutError = currentLIRP.loadFromNote(currentFSObject.path.slice(0, -3), content) && loadWithoutError;
      }
      ;
    }
    ;
    if (!loadWithoutError) {
      currentLIRP.getError().map((element) => {
        new import_obsidian.Notice(element);
      });
      if (currentLIRP.length === 0) {
        return;
      }
    }
    if (this.settings.showWarning) {
      currentLIRP.getWarning().forEach((element) => {
        new import_obsidian.Notice(element);
      });
    }
    ;
    if (currentLIRP.length === 0) {
      new import_obsidian.Notice('Error : check settings "Path " in plugin List Item Random Picker !');
      return;
    } else if (currentLIRP.length === 1) {
      new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
        if (action === "note") {
          this.workWithTitle(currentLIRP, item.title);
        } else {
          this.insertString(`{${item.title}}`);
        }
        ;
      }).open();
    } else {
      if (this.settings.showNoteSelector) {
        new LIRPSuggestModal(this.app, currentLIRP.getNoteSuggestion(action === "reference"), (item) => {
          new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference").filterByNoteName(item.noteName), (item2) => {
            if (action === "note") {
              this.workWithTitle(currentLIRP, item2.title);
            } else {
              this.insertString(`{${item2.title}}`);
            }
            ;
          }).open();
        }).open();
      } else {
        new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
          if (action === "note") {
            this.workWithTitle(currentLIRP, item.title);
          } else {
            this.insertString(`{${item.title}}`);
          }
          ;
        }).open();
      }
      ;
    }
    ;
  }
  getLIRPFiles(notePath) {
    let allVaultFiles = this.app.vault.getFiles();
    let filesInNotePath = [];
    const notePathRegex = new RegExp(`^${notePath}(/.+)?.md$`);
    allVaultFiles.map((element) => {
      if (notePathRegex.test(element.path)) {
        filesInNotePath.push(element.path);
      }
      ;
    });
    return filesInNotePath;
  }
  workWithTitle(Note, listTitle) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selectionForNotificationRegex = `^${this.settings.selectionForNotification}$`;
      const noticeRegex = new RegExp(selectionForNotificationRegex);
      const editor = activeView.editor;
      const selection = editor.getSelection();
      if (noticeRegex.test(selection)) {
        new import_obsidian.Notice(Note.pickRandomItemFromList(listTitle));
        if (this.settings.deleteSelectionForNotification) {
          editor.replaceSelection("");
        }
      } else {
        let stringToInsert = "";
        const repeatInsertRegEx = /^(\d+)(.*)/gm;
        let regExExecution;
        let repeat;
        if ((regExExecution = repeatInsertRegEx.exec(selection)) !== null) {
          const repeat2 = Number(regExExecution[1]);
          const delimiter = selection.replace(/^\d+/, "");
          const arrayStringToinsert = [];
          for (let i = 0; i < repeat2; i++) {
            arrayStringToinsert.push(Note.pickRandomItemFromList(listTitle));
          }
          stringToInsert = arrayStringToinsert.join(delimiter);
        } else {
          stringToInsert = Note.pickRandomItemFromList(listTitle);
        }
        editor.replaceSelection(stringToInsert);
      }
      ;
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
    ;
  }
  insertString(stringToInsert) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      activeView.editor.replaceSelection(stringToInsert);
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
    ;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Note setting" });
    new import_obsidian.Setting(containerEl).setName("Note Path").setDesc('The path and filename of the note that contains the lists to be used. Exemple : "Folder/Note".').addText(
      (text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
        this.plugin.settings.notePath = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Interface settings" });
    new import_obsidian.Setting(containerEl).setName("Show note selector").setDesc("If path is a folder").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteSelector);
      toggle.onChange(async (value) => {
        this.plugin.settings.showNoteSelector = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Show warning").setDesc("Display the warnings of notes and lists, if any. Warnings for macro depth limit reached are always displayed.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showWarning);
      toggle.onChange(async (value) => {
        this.plugin.settings.showWarning = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "List settings" });
    new import_obsidian.Setting(containerEl).setName("Null value").setDesc("If the first line of an item has this value, the line is flush.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.nullValue).onChange(async (value) => {
        this.plugin.settings.nullValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Escape value").setDesc("If you want some headin one or first level list item in your item, you could escape them with these value").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.escapeValue).onChange(async (value) => {
        this.plugin.settings.escapeValue = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Selection settings" });
    new import_obsidian.Setting(containerEl).setName("Selection value for notification").setDesc("If the text selected has this value, the item is not inserted, but notified !").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.selectionForNotification).onChange(async (value) => {
        this.plugin.settings.selectionForNotification = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Delete selection value for notification").setDesc("If set, the selected value for notification is deleted.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deleteSelectionForNotification);
      toggle.onChange(async (value) => {
        this.plugin.settings.deleteSelectionForNotification = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "Technical settings" });
    new import_obsidian.Setting(containerEl).setName("Macro depth limit").setDesc("Macro recursion limit: how many nested macro calls are allowed. Zero prevents nested macros from being resolved.").addSlider(
      (slider) => slider.setValue(this.plugin.settings.maxMacroDepth).setLimits(0, 10, 1).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxMacroDepth = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XG5cbmZ1bmN0aW9uIGZpbmRJbmRleGVzPFQ+KGFuQXJyYXk6IFRbXSwgcHJlZGljYXRlOiAoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGFuQXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZWxlbWVudCwgaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ZXM7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cmluZ1RvRXNjYXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzdHJpbmdUb0VzY2FwZS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xufVxuaW50ZXJmYWNlIExJUlBQbHVnaW5TZXR0aW5ncyB7XG4gICAgbm90ZVBhdGg6IHN0cmluZztcbiAgICBzaG93V2FybmluZzogYm9vbGVhbjtcbiAgICBtYXhNYWNyb0RlcHRoOiBudW1iZXI7XG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBib29sZWFuO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVZhbHVlOiBzdHJpbmc7XG4gICAgc2hvd05vdGVTZWxlY3RvcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTElSUFBsdWdpblNldHRpbmdzID0ge1xuICAgIG5vdGVQYXRoOiAnUGF0aCBvZiBhIG5vdGUgb3IgYSBmb2xkZXInLFxuICAgIHNob3dXYXJuaW5nOiB0cnVlLFxuICAgIG1heE1hY3JvRGVwdGg6IDEsXG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiAnIScsXG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBmYWxzZSxcbiAgICBudWxsVmFsdWU6ICdudWxsJyxcbiAgICBlc2NhcGVWYWx1ZTogJy8vJyxcbiAgICBzaG93Tm90ZVNlbGVjdG9yOiB0cnVlLFxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY2xhc3MgRGljZVJvbGxlciB7XG4gICAgY2hlY2tEaWNlKGRpY2VTdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgY29uc3QgZGljZVJlZ2V4ID0gL14oXFxkKyk/ZChcXGQrKShbXFwrXFwtXVxcZCspPyhlKT8oa1xcZCspPyhrbFxcZCspPyQvaTtcbiAgICAgIHJldHVybiBkaWNlUmVnZXgudGVzdChkaWNlU3RyaW5nKTtcbiAgICB9O1xuICBcbiAgICByb2xsRGljZShkaWNlU3RyaW5nOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgaWYgKCF0aGlzLmNoZWNrRGljZShkaWNlU3RyaW5nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXhlIGRlIGxhbmNlciBkZSBkXHUwMEU5cyBpbnZhbGlkZS5cIik7XG4gICAgICB9XG4gIFxuICAgICAgY29uc3QgW18sIGNvdW50U3RyLCBzaWRlc1N0ciwgbW9kaWZpZXJTdHIsIGV4cGxvZGVTdHIsIGtlZXBTdHIsIGtlZXBMb3dTdHJdID1cbiAgICAgICAgZGljZVN0cmluZy5tYXRjaChcbiAgICAgICAgICAvXihcXGQrKT9kKFxcZCspKFtcXCtcXC1dXFxkKyk/KGUpPyhrXFxkKyk/KGtsXFxkKyk/JC9pXG4gICAgICAgICkgYXMgUmVnRXhwTWF0Y2hBcnJheTtcbiAgXG4gICAgICBjb25zdCBjb3VudCA9IHBhcnNlSW50KGNvdW50U3RyIHx8IFwiMVwiKTtcbiAgICAgIGNvbnN0IHNpZGVzID0gcGFyc2VJbnQoc2lkZXNTdHIpO1xuICAgICAgY29uc3QgbW9kaWZpZXIgPSBwYXJzZUludChtb2RpZmllclN0ciB8fCBcIjBcIik7XG4gICAgICBjb25zdCBleHBsb2RlID0gISFleHBsb2RlU3RyO1xuICAgICAgY29uc3Qga2VlcCA9IGtlZXBTdHIgPyBwYXJzZUludChrZWVwU3RyLnNsaWNlKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGtlZXBMb3cgPSBrZWVwTG93U3RyID8gcGFyc2VJbnQoa2VlcExvd1N0ci5zbGljZSgyKSkgOiB1bmRlZmluZWQ7XG4gIFxuICAgICAgbGV0IHJlc3VsdHM6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNpZGVzKSArIDE7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICBcbiAgICAgICAgaWYgKGV4cGxvZGUpIHtcbiAgICAgICAgICB3aGlsZSAocmVzdWx0ID09PSBzaWRlcykge1xuICAgICAgICAgICAgcmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2lkZXMpICsgMTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIGlmIChrZWVwKSB7XG4gICAgICAgIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYiAtIGEpO1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCBrZWVwKTtcbiAgICAgIH0gZWxzZSBpZiAoa2VlcExvdykge1xuICAgICAgICByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwga2VlcExvdyk7XG4gICAgICB9XG4gIFxuICAgICAgY29uc3Qgc3VtID0gcmVzdWx0cy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwsIDApO1xuICAgICAgcmV0dXJuIHN1bSArIG1vZGlmaWVyO1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAqIFJlbXBsYWNlIGxlcyBsYW5jZXJzIGRlIGRcdTAwRTlzIGVuY2Fkclx1MDBFOXMgcGFyIGRlcyBkXHUwMEU5bGltaXRldXJzIGRhbnMgdW5lIGNoYVx1MDBFRW5lIG11bHRpLWxpZ25lcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IExlIHRleHRlIG11bHRpLWxpZ25lcyBjb250ZW5hbnQgbGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXJ0RGVsaW1pdGVyIExlIGRcdTAwRTlsaW1pdGV1ciBkZSBkXHUwMEU5YnV0IGRlcyBsYW5jZXJzIGRlIGRcdTAwRTlzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmREZWxpbWl0ZXIgTGUgZFx1MDBFOWxpbWl0ZXVyIGRlIGZpbiBkZXMgbGFuY2VycyBkZSBkXHUwMEU5cy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBMZSB0ZXh0ZSBhdmVjIGxlcyBsYW5jZXJzIGRlIGRcdTAwRTlzIHJlbXBsYWNcdTAwRTlzIHBhciBsZXVycyByXHUwMEU5c3VsdGF0cy5cbiAgICAgKi9cbiAgICByZXBsYWNlRGljZVJvbGxzKFxuICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgc3RhcnREZWxpbWl0ZXI6IHN0cmluZyxcbiAgICAgIGVuZERlbGltaXRlcjogc3RyaW5nXG4gICAgKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgYCR7dGhpcy5lc2NhcGVSZWdFeHAoc3RhcnREZWxpbWl0ZXIpfShbXiR7dGhpcy5lc2NhcGVSZWdFeHAoXG4gICAgICAgICAgc3RhcnREZWxpbWl0ZXIgKyBlbmREZWxpbWl0ZXJcbiAgICAgICAgKX1dKykke3RoaXMuZXNjYXBlUmVnRXhwKGVuZERlbGltaXRlcil9YCxcbiAgICAgICAgXCJnXCJcbiAgICAgICk7XG4gIFxuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShyZWdleCwgKG1hdGNoLCBkaWNlU3RyaW5nKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yb2xsRGljZShkaWNlU3RyaW5nKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBTaSBsYSBzeW50YXhlIGVzdCBpbnZhbGlkZSwgb24gZ2FyZGUgbGUgdGV4dGUgZCdvcmlnaW5lXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAqIFx1MDBDOWNoYXBwZSBsZXMgY2FyYWN0XHUwMEU4cmVzIHNwXHUwMEU5Y2lhdXggcG91ciB1bmUgdXRpbGlzYXRpb24gZGFucyB1bmUgZXhwcmVzc2lvbiByXHUwMEU5Z3VsaVx1MDBFOHJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBMYSBjaGFcdTAwRUVuZSBkZSBjYXJhY3RcdTAwRThyZXMgXHUwMEUwIFx1MDBFOWNoYXBwZXIuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gTGEgY2hhXHUwMEVFbmUgZGUgY2FyYWN0XHUwMEU4cmVzIFx1MDBFOWNoYXBwXHUwMEU5ZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGVzY2FwZVJlZ0V4cChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICB9O1xuICB9O1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG50eXBlIExJUlBMb2dTdGF0dXMgPSAnZHVwSW5Ob3RlJyB8ICdkdXBJbkZvbGRlcicgfCAnZW1wdHlMaXN0JyB8ICdlbXB0eU5vdGUnO1xudHlwZSBMSVJQTG9nVHlwZSA9ICdlcnJvcicgfCAnd2FybmluZyc7XG5cbmNsYXNzIExJUlBMb2dFbGVtZW50IHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIGxpc3RUaXRsZTogc3RyaW5nO1xuICAgIHN0YXR1czogTElSUExvZ1N0YXR1cztcbiAgICBjb21wbGVtZW50OiBzdHJpbmc7XG5cbiAgICBnZXRUeXBlKCk6IExJUlBMb2dUeXBlIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFsnZHVwSW5Ob3RlJywgJ2R1cEluRm9sZGVyJ107XG4gICAgICAgIHJldHVybiAnd2FybmluZyc7XG4gICAgICAgIC8vIGlmIChlcnJvcnMuY29udGFpbnModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgIC8vICAgICByZXR1cm4gJ2Vycm9yJ1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgcmV0dXJuICd3YXJuaW5nJ1xuICAgICAgICAvLyB9XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yIChub3RlTmFtZTogc3RyaW5nLCBsaXN0VGl0bGU6IHN0cmluZywgc3RhdHVzOiBMSVJQTG9nU3RhdHVzLCBjb21wbGVtZW50OiBzdHJpbmcgPSAnJykge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gbm90ZU5hbWU7XG4gICAgICAgIHRoaXMubGlzdFRpdGxlID0gbGlzdFRpdGxlO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5jb21wbGVtZW50ID0gY29tcGxlbWVudDtcbiAgICB9O1xuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0VHlwZSgpfSAvICR7dGhpcy5ub3RlTmFtZX0gLyAke3RoaXMubGlzdFRpdGxlfSAvICR7dGhpcy5zdGF0dXN9IC8gJHt0aGlzLmNvbXBsZW1lbnR9YDtcbiAgICB9O1xufTtcbmNsYXNzIExJUlBMb2cge1xuICAgIGxvZ3M6IExJUlBMb2dFbGVtZW50W107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sb2dzID0gW107XG4gICAgfTtcbiAgICBcbiAgICBwdXNoKG5vdGVOYW1lOiBzdHJpbmcsIGxpc3RUaXRsZTogc3RyaW5nLCBzdGF0dXM6IExJUlBMb2dTdGF0dXMsIGNvbXBsZW1lbnQ6IHN0cmluZyA9ICcnKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9ncy5wdXNoKG5ldyBMSVJQTG9nRWxlbWVudChub3RlTmFtZSwgbGlzdFRpdGxlLCBzdGF0dXMsIGNvbXBsZW1lbnQpKTtcbiAgICB9O1xuXG4gICAgYWRkKGxvZ3M6IExJUlBMb2cpOnZvaWR7XG4gICAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5jb25jYXQobG9ncy5sb2dzKTtcbiAgICB9O1xuXG4gICAgZ2V0KHR5cGU6IExJUlBMb2dUeXBlKTogc3RyaW5nW117XG4gICAgICAgIGNvbnN0IGxvZ3NGb3JUeXBlID0gdGhpcy5sb2dzLmZpbHRlcigoZWxlbWVudCkgPT4gXG4gICAgICAgICAgICBlbGVtZW50LmdldFR5cGUoKSA9PT0gdHlwZVxuICAgICAgICApO1xuICAgICAgICBsZXQgZ2V0QXJyYXk6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxvZ3NGb3JUeXBlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZ2V0QXJyYXkucHVzaChlbGVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdldEFycmF5O1xuICAgIH1cbn07XG5pbnRlcmZhY2UgTElSUExpc3RJbnRlcmZhY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBpdGVtczogc3RyaW5nW107XG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U7XG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW47XG4gICAgcGlja1JhbmRvbUl0ZW0oKTogc3RyaW5nO1xuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW107XG59XG5cbmNsYXNzIExJUlBMaXN0IGltcGxlbWVudHMgTElSUExpc3RJbnRlcmZhY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBoaWRkZW46IGJvb2xlYW47XG4gICAgaXRlbXM6IHN0cmluZ1tdO1xuICAgIGxvZ3M6IExJUlBMb2c7XG4gICAgbnVsbFZhbHVlOiBzdHJpbmc7XG4gICAgZXNjYXBlU3RyaW5nOiBzdHJpbmc7XG5cbiAgICBzdGF0aWMgZ2V0U2V0dGluZ1N0cmluZyh2YWx1ZTogJycgfCAnaGlkZScgfCAnaGlkZV90aWNrZWQnID0gJycpOiBzdHJpbmcge1xuICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJy0gWyBdIEhpZGUgdGhpcyBsaXN0XFxuJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hpZGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ15cXC0gXFxcXFtbeCBdXFxcXF0gSGlkZSB0aGlzIGxpc3QkJztcbiAgICAgICAgICAgICAgICBjYXNlICdoaWRlX3RpY2tlZCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnXlxcLSBcXFxcW3hcXFxcXSBIaWRlIHRoaXMgbGlzdCQnO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3Iobm90ZU5hbWU6IHN0cmluZywgbGluZXM6IHN0cmluZ1tdLCBudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMubG9ncyA9IG5ldyBMSVJQTG9nKCk7XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcblxuICAgICAgICBjb25zdCBoZWFkaW5nUmVnRXggPSAvXiMgKyguKykkLztcbiAgICAgICAgdGhpcy50aXRsZSA9IGxpbmVzWzBdLnJlcGxhY2UoaGVhZGluZ1JlZ0V4LCBcIiQxXCIpO1xuICAgICAgICBsaW5lcy5zaGlmdCgpO1xuICAgICAgICBjb25zdCBsaXN0QmVnaW5JdGVtUmVnZXggPSAvXigtfFxcZCtcXC4pICg/IVxcWykgKiguKykkLztcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gbGlzdEJlZ2luSXRlbVJlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKG5vdGVOYW1lLCB0aGlzLnRpdGxlLCAnZW1wdHlMaXN0Jyk7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xlYW5MaW5lcyA9IGxpbmVzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVwbGFjZShsaXN0QmVnaW5JdGVtUmVnZXgsIFwiJDJcIilcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsaXN0QmVnaW5JbmRleGVzWzBdICE9PSAwKSB7XG4gICAgICAgICAgICBsZXQgbWREZXNjcmlwdGlvbiA9IGNsZWFuTGluZXMuc2xpY2UoMCwgbGlzdEJlZ2luSW5kZXhlc1swXSk7XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAyMlxuICAgICAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICAgICAgaWYgKG1kRGVzY3JpcHRpb25bMF0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBtZERlc2NyaXB0aW9uLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAzMlxuICAgICAgICAgICAgLy8gICBNRDAzMi9ibGFua3MtYXJvdW5kLWxpc3RzOiBMaXN0cyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICAgICAgLy8gRHVlIHRvIHNwbGl0IG9uICdcXG4nLCB0aGUgc2xpY2UsIGFuZCBhdCBsZWFzdCBhIGpvaW4gb24gJ1xcbicgdGhlIGxhc3QgJ1xcbicgaXMgYWx3YXlzIGxvc3QgIVxuICAgICAgICAgICAgLy8gU28gdGhlIGZvbG93aW5nIGNvZGUgaXMgdXNlbGVzc1xuICAgICAgICAgICAgLy8gaWYgKG1kRGVzY3JpcHRpb24uYXQoLTEpID09PSBcIlwiKSB7XG4gICAgICAgICAgICAvLyAgICAgbWREZXNjcmlwdGlvbi5wb3AoKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGxldCBpc0hpZGRlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaGlkZVJlZ2V4VGlja2VkID0gbmV3IFJlZ0V4cCAoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygnaGlkZV90aWNrZWQnKSk7XG4gICAgICAgICAgICBjb25zdCBoaWRlUmVnZXggPSBuZXcgUmVnRXhwIChMSVJQTGlzdC5nZXRTZXR0aW5nU3RyaW5nKCdoaWRlJykpO1xuICAgICAgICAgICAgbWREZXNjcmlwdGlvbi5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaGlkZVJlZ2V4VGlja2VkLnRlc3QoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbiA9IGlzSGlkZGVuO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1kRGVzY3JpcHRpb24gPSBtZERlc2NyaXB0aW9uLmZpbHRlcigoZWxlbWVudCkgPT4gIShoaWRlUmVnZXgudGVzdChlbGVtZW50KSkpO1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IG1kRGVzY3JpcHRpb24uam9pbignXFxuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkNvdW50ID0gbGlzdEJlZ2luSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgbGV0IGl0ZW06IHN0cmluZ1tdO1xuICAgICAgICBmb3IgKGxldCBjdXJyZW50SW5kZXggPSAwOyBjdXJyZW50SW5kZXggPCAobGlzdEJlZ2luQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2N1cnJlbnRJbmRleF0sIGxpc3RCZWdpbkluZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pKTtcbiAgICAgICAgICAgIHRoaXMucHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2xpc3RCZWdpbkNvdW50IC0gMV0pKTtcbiAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICBpZiAoaXRlbS5hdCgtMSkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGl0ZW0ucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdXNoSXRlbUJhc2VkT25XZWlnaHQoaXRlbSk7XG4gICAgfVxuXG4gICAgcHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW06IHN0cmluZ1tdKSA6IHZvaWQge1xuICAgICAgICBjb25zdCBJdGVtV2l0aFdlaWdodFJlZ0V4ID0gL15cXCgoXFxkKylcXClcXHMrKC4rKSQvO1xuICAgICAgICBsZXQgcmVnRXhFeGVjdXRpb247XG4gICAgICAgIGxldCByZXBlYXQ6IG51bWJlcjtcbiAgICAgICAgaWYgKChyZWdFeEV4ZWN1dGlvbiA9IEl0ZW1XaXRoV2VpZ2h0UmVnRXguZXhlYyhpdGVtWzBdKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcGVhdCA9IE51bWJlcihyZWdFeEV4ZWN1dGlvblsxXSk7XG4gICAgICAgICAgICBpdGVtWzBdID0gcmVnRXhFeGVjdXRpb25bMl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBlYXQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtWzBdID09PSB0aGlzLm51bGxWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgaXRlbVswXSA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2hpZnQoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVnZXggPSBgXiAqJHt0aGlzLmVzY2FwZVN0cmluZ30oLiopYDtcbiAgICAgICAgY29uc3QgZXNjYXBlU3RyaW5nUmVnRXggPSBuZXcgUmVnRXhwKHN0cmluZ1JlZ2V4LCAnZ20nKTtcbiAgICAgICAgY29uc3QgZXNjYXBlSXRlbSA9IGl0ZW0ubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5yZXBsYWNlKGVzY2FwZVN0cmluZ1JlZ0V4LCAnJDEnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ0l0ZW0gPSBlc2NhcGVJdGVtLmpvaW4oJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goc3RyaW5nSXRlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2Uge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0ge1xuICAgICAgICAgICAgbm90ZU5hbWU6IG5vdGVOYW1lLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogKHRoaXMuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbjtcbiAgICB9O1xuXG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuaGlkZGVuO1xuICAgIH1cblxuICAgIHBpY2tSYW5kb21JdGVtKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCByYW5kb21JdGVtOiBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gdGhpcy5pdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLml0ZW1zLmxlbmd0aCldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYW5kb21JdGVtO1xuICAgIH1cblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dzLmdldCgnd2FybmluZycpO1xuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgTElSUEV4ZWNSZWZTdWJJbnRlcmZhY2Uge1xuICAgIGxhc3RMaXN0VGl0bGU6IHN0cmluZztcbiAgICBtb2RpZmllZEl0ZW06IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIExJUlBOb3RlSW50ZXJmYWNlIHtcbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24oKTogTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbik6IHN0cmluZzsgXG4gICAgZ2V0RXJyb3IoKTogc3RyaW5nW107XG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXTtcbn1cblxuY2xhc3MgTElSUE5vdGUgaW1wbGVtZW50cyBMSVJQTm90ZUludGVyZmFjZSB7XG4gICAgbm90ZU5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGxpc3Q6IExJUlBMaXN0W107XG4gICAgbG9nczogTElSUExvZztcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcbiAgICByb2xsRGljZTogYm9vbGVhbjtcbiAgICByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IgKG51bGxWYWx1ZTogc3RyaW5nLCBlc2NhcGVTdHJpbmc6IHN0cmluZywgcmVmZXJlbmNlTWF4RGVwdGg6IG51bWJlcikge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gXCJcIjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG4gICAgICAgIHRoaXMucm9sbERpY2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZU1heERlcHRoID0gcmVmZXJlbmNlTWF4RGVwdGg7XG4gICAgfVxuXG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW10ge1xuICAgICAgICBsZXQgbGlzdFRpdGxlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBsaXN0VGl0bGVzLnB1c2goZWxlbWVudC50aXRsZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdFRpdGxlcztcbiAgICB9O1xuXG4gICAgbG9hZEZyb21Ob3RlKG5vdGVOYW1lOiBzdHJpbmcsIG5vdGVDb250ZW50OiBzdHJpbmcsICk6IGJvb2xlYW4ge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gbm90ZU5hbWU7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gbm90ZUNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb25zdCBoZWFkaW5nUmVnZXggPSAvXiMgLiskLztcbiAgICAgICAgbGV0IGhlYWRpbmdJbmRleGVzID0gZmluZEluZGV4ZXMobGluZXMsIChlbGVtZW50KSA9PiBoZWFkaW5nUmVnZXgudGVzdChlbGVtZW50KSk7XG4gICAgICAgIGlmIChoZWFkaW5nSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKG5vdGVOYW1lLCAnJywgJ2VtcHR5Tm90ZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkaW5nSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIC8vIER1ZSB0byBzcGxpdCBvbiAnXFxuJywgdGhlIHNsaWNlLCBhbmQgYXQgbGVhc3QgYSBqb2luIG9uICdcXG4nIHRoZSBsYXN0ICdcXG4nIGlzIGFsd2F5cyBsb3N0ICFcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBsaW5lcy5zbGljZSgwLCBoZWFkaW5nSW5kZXhlc1swXSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGluZ0NvdW50ID0gaGVhZGluZ0luZGV4ZXMubGVuZ3RoXG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRJbmRleCA9IDA7IGN1cnJlbnRJbmRleCA8IChoZWFkaW5nQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hMaXN0SWZOb3RFeGlzdHMobmV3IExJUlBMaXN0KHRoaXMubm90ZU5hbWUsIGxpbmVzLnNsaWNlKGhlYWRpbmdJbmRleGVzW2N1cnJlbnRJbmRleF0sIGhlYWRpbmdJbmRleGVzW2N1cnJlbnRJbmRleCArIDFdKSwgdGhpcy5udWxsVmFsdWUsIHRoaXMuZXNjYXBlU3RyaW5nKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHVzaExpc3RJZk5vdEV4aXN0cyhuZXcgTElSUExpc3QodGhpcy5ub3RlTmFtZSwgbGluZXMuc2xpY2UoaGVhZGluZ0luZGV4ZXNbaGVhZGluZ0NvdW50IC0gMV0pLCB0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcpKTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9O1xuXG4gICAgcHVzaExpc3RJZk5vdEV4aXN0cyhsaXN0VG9QdXNoOiBMSVJQTGlzdCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5nZXRMaXN0VGl0bGVzKCkuY29udGFpbnMobGlzdFRvUHVzaC50aXRsZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKHRoaXMubm90ZU5hbWUsIGxpc3RUb1B1c2gudGl0bGUsICdkdXBJbk5vdGUnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKGxpc3RUb1B1c2gpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW46IGJvb2xlYW4gPSBmYWxzZSk6IExJUlBTdWdnZXN0aW9uTGlzdCB7XG4gICAgICAgIGNvbnN0IG5vdGVTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdpdGhIaWRkZW4gfHwgZWxlbWVudC5ub3RIaWRkZW4oKSkge1xuICAgICAgICAgICAgICAgIG5vdGVTdWdnZXN0aW9uLnB1c2goZWxlbWVudC5nZXRTdWdnZXN0aW9uKHRoaXMubm90ZU5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub3RlU3VnZ2VzdGlvbjtcbiAgICB9XG5cbiAgICBleGVjUmVmZXJlbmNlU3Vic3RpdHV0aW9uKGl0ZW06IHN0cmluZyk6IExJUlBFeGVjUmVmU3ViSW50ZXJmYWNlIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nTWFjcm9SZWZSZWdleDogc3RyaW5nID0gYFxceygke3RoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IGVzY2FwZVJlZ2V4KGVsZW1lbnQudGl0bGUpKS5qb2luKCd8Jyl9KVxcfWA7XG4gICAgICAgIGNvbnN0IG1hY3JvUmVmUmVnZXggPSBuZXcgUmVnRXhwIChzdHJpbmdNYWNyb1JlZlJlZ2V4LCdtZycpO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIGxldCBtb2RpZmllZEl0ZW06c3RyaW5nID0gaXRlbTtcbiAgICAgICAgbGV0IGxpc3RUaXRsZTpzdHJpbmcgPSBcIlwiO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gbWFjcm9SZWZSZWdleC5leGVjKG1vZGlmaWVkSXRlbSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsZXQgbmV3VmFsdWU6IHN0cmluZyA9IHRoaXMucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChtYXRjaFsxXSwgZmFsc2UpOyBcbiAgICAgICAgICAgIGxpc3RUaXRsZSA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgbW9kaWZpZWRJdGVtID0gbW9kaWZpZWRJdGVtLnJlcGxhY2UobGlzdFRpdGxlLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICBtYWNyb1JlZlJlZ2V4Lmxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbmV3VmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZEl0ZW06IG1vZGlmaWVkSXRlbSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwaWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZTogc3RyaW5nLCB3b3JrT25SZWZlcmVuY2U6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJhbmRvbUl0ZW06IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCByZXR1cm5PZkV4ZWNNYWNybzogTElSUEV4ZWNSZWZTdWJJbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZEl0ZW06IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gdGhpcy5saXN0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQudGl0bGUgPT09IGxpc3RUaXRsZSk7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gY3VycmVudExpc3QucGlja1JhbmRvbUl0ZW0oKTtcbiAgICAgICAgICAgIGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHRoaXMucmVmZXJlbmNlTWF4RGVwdGg7IHJlcGVhdCsrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuT2ZFeGVjTWFjcm8gPSB0aGlzLmV4ZWNSZWZlcmVuY2VTdWJzdGl0dXRpb24ocmFuZG9tSXRlbSk7XG4gICAgICAgICAgICAgICAgcmFuZG9tSXRlbSA9IHJldHVybk9mRXhlY01hY3JvLm1vZGlmaWVkSXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJpbmdNYWNyb1JlZlJlZ2V4OiBzdHJpbmcgPSBgXFx7KCR7dGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4gZXNjYXBlUmVnZXgoZWxlbWVudC50aXRsZSkpLmpvaW4oJ3wnKX0pXFx9YDtcbiAgICAgICAgY29uc3QgbWFjcm9SZWZSZWdleCA9IG5ldyBSZWdFeHAgKHN0cmluZ01hY3JvUmVmUmVnZXgpO1xuICAgICAgICBpZiAobWFjcm9SZWZSZWdleC50ZXN0KHJhbmRvbUl0ZW0pICYmIHdvcmtPblJlZmVyZW5jZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTWFjcm8gZGVwdGggbGltaXQgcmVhY2hlZCBpbiBub3RlIFwiJHt0aGlzLm5vdGVOYW1lfVwiIGFmdGVyIGNhbGxpbmcgXCIke3JldHVybk9mRXhlY01hY3JvLmxhc3RMaXN0VGl0bGV9XCJgKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHdvcmtPblJlZmVyZW5jZSAmJiB0aGlzLnJvbGxEaWNlKSB7XG4gICAgICAgICAgICBjb25zdCBkaWNlUm9sbGVyID0gbmV3IERpY2VSb2xsZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBkaWNlUm9sbGVyLnJlcGxhY2VEaWNlUm9sbHMocmFuZG9tSXRlbSwneycsJ30nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByYW5kb21JdGVtO1xuICAgICAgICB9XG4gICAgfSBcblxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9ncy5nZXQoJ2Vycm9yJyk7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsV2FybmluZzogc3RyaW5nW10gPSB0aGlzLmxvZ3MuZ2V0KCd3YXJuaW5nJyk7XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxXYXJuaW5nID0gYWxsV2FybmluZy5jb25jYXQoZWxlbWVudC5nZXRXYXJuaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbFdhcm5pbmdcbiAgICB9O1xuXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0Lmxlbmd0aDtcbiAgICB9O1xufVxuXG5jbGFzcyBMSVJQTXVsdGlOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIG11bHRpTm90ZTogTElSUE5vdGVbXTtcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcbiAgICByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyO1xuICAgIGxvZ3M6IExJUlBMb2c7XG5cbiAgICBjb25zdHJ1Y3RvciAobnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nLCByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlID0gW107XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCA9IHJlZmVyZW5jZU1heERlcHRoO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgIH07XG5cbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Tm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBjdXJyZW50Tm90ZS5sb2FkRnJvbU5vdGUobm90ZU5hbWUsIG5vdGVDb250ZW50KTtcbiAgICAgICAgdGhpcy5wdXNoTm90ZUlmTGlzdE5vdEV4aXN0cyhjdXJyZW50Tm90ZSk7XG4gICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfTtcblxuICAgIHB1c2hOb3RlSWZMaXN0Tm90RXhpc3RzKG5vdGVUb1B1c2g6IExJUlBOb3RlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGFsbExpc3RUaXRsZSA9IHRoaXMuZ2V0TGlzdFRpdGxlcygpO1xuICAgICAgICBsZXQgdW5pYzpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgbm90ZVRvUHVzaC5nZXRMaXN0VGl0bGVzKCkubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoYWxsTGlzdFRpdGxlLmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2gobm90ZVRvUHVzaC5ub3RlTmFtZSwgZWxlbWVudCwgJ2R1cEluRm9sZGVyJywgdGhpcy5nZXROb3RlTmFtZUZyb21MaXN0VGl0bGUoZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgIHVuaWMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1bmljKSB7XG4gICAgICAgICAgICB0aGlzLm11bHRpTm90ZS5wdXNoKG5vdGVUb1B1c2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dzLmFkZChub3RlVG9QdXNoLmxvZ3MpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdW5pYztcbiAgICB9O1xuXG4gICAgZ2V0Tm90ZU5hbWVGcm9tTGlzdFRpdGxlKGxpc3RUaXRsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG5vdGUgPSB0aGlzLm11bHRpTm90ZS5maW5kKChlbGVtZW50KSA9PlxuICAgICAgICAgICAgZWxlbWVudC5nZXRMaXN0VGl0bGVzKCkuY29udGFpbnMobGlzdFRpdGxlKVxuICAgICAgICApO1xuICAgICAgICBpZiAobm90ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbm90ZS5ub3RlTmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFxuICAgIGdldExpc3RUaXRsZXMoKSA6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGxpc3RUaXRsZXM6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBsaXN0VGl0bGVzID0gbGlzdFRpdGxlcy5jb25jYXQoZWxlbWVudC5nZXRMaXN0VGl0bGVzKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpc3RUaXRsZXM7XG4gICAgfTtcblxuICAgIGdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW46IGJvb2xlYW4gPSBmYWxzZSk6IExJUlBTdWdnZXN0aW9uTGlzdCB7XG4gICAgICAgIGxldCBhbGxMaXN0U3VnZ2VzdGlvbiA9IG5ldyBMSVJQU3VnZ2VzdGlvbkxpc3QoKTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxMaXN0U3VnZ2VzdGlvbiA9IGFsbExpc3RTdWdnZXN0aW9uLmNvbmNhdChlbGVtZW50LmdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW4pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxMaXN0U3VnZ2VzdGlvbjtcbiAgICB9O1xuXG4gICAgZ2V0Tm90ZVN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgbGV0IG5vdGVTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdDtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5nZXRMaXN0U3VnZ2VzdGlvbih3aXRoSGlkZGVuKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbm90ZVN1Z2dlc3Rpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vdGVOYW1lOiBlbGVtZW50Lm5vdGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogZWxlbWVudC5ub3RlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IChlbGVtZW50LmRlc2NyaXB0aW9uLnNwbGl0KCdcXG4nKVswXSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vdGVTdWdnZXN0aW9uO1xuICAgIH07XG5cbiAgICBwaWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZTogc3RyaW5nLCB3b3JrT25SZWZlcmVuY2U6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN1cGVyTm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHN1cGVyTm90ZS5saXN0ID0gc3VwZXJOb3RlLmxpc3QuY29uY2F0KGVsZW1lbnQubGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3VwZXJOb3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlKTtcbiAgICB9O1xuXG4gICAgZ2V0RXJyb3IoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsRXJyb3I6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxFcnJvciA9IGFsbEVycm9yLmNvbmNhdChlbGVtZW50LmdldEVycm9yKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbEVycm9yO1xuICAgIH07XG5cbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbFdhcm5pbmc6c3RyaW5nW10gPSB0aGlzLmxvZ3MuZ2V0KCd3YXJuaW5nJyk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsV2FybmluZyA9IGFsbFdhcm5pbmcuY29uY2F0KGVsZW1lbnQuZ2V0V2FybmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxXYXJuaW5nO1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpTm90ZS5sZW5ndGg7XG4gICAgfTtcblxufTtcblxuaW50ZXJmYWNlIExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuY2xhc3MgTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICBsaXN0OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgIH07XG5cbiAgICBwdXNoIChlbGVtZW50OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxpc3QucHVzaChlbGVtZW50KTtcbiAgICB9O1xuXG4gICAgZmlsdGVyQnlOb3RlTmFtZShub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgZmlsdGVyTGlzdCA9IG5ldyBMSVJQU3VnZ2VzdGlvbkxpc3QoKTtcbiAgICAgICAgdGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm90ZU5hbWUgPT09IG5vdGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTGlzdC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbHRlckxpc3Q7XG4gICAgfTtcblxuICAgIGZpbHRlcihjYWxsYmFjazogKGVsZW1lbnQ6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBpbmRleD86IG51bWJlciwgYXJyYXk/OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdKSA9PiBib29sZWFuKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHRoaXMubGlzdFtpXSwgaSwgdGhpcy5saXN0KSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5wdXNoKHRoaXMubGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTGlzdDtcbiAgICB9O1xuXG4gICAgY29uY2F0KG90aGVyTGlzdDogTElSUFN1Z2dlc3Rpb25MaXN0KTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMSVJQU3VnZ2VzdGlvbkxpc3QoKTtcbiAgICAgICAgbmV3TGlzdC5saXN0ID0gdGhpcy5saXN0LmNvbmNhdChvdGhlckxpc3QubGlzdCk7XG4gICAgICAgIHJldHVybiBuZXdMaXN0O1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0Lmxlbmd0aDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMSVJQU3VnZ2VzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlPiB7XG4gICAgaXRlbXM6IExJUlBTdWdnZXN0aW9uTGlzdDtcbiAgICBjYWxsYmFjazogKHZhbHVlOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSkgPT4gdm9pZDtcbiAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGl0ZW1zOiBMSVJQU3VnZ2VzdGlvbkxpc3QsIGNhbGxiYWNrOiAodmFsdWU6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlKSA9PiB2b2lkKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cblxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICkubGlzdDsgLy8gUmV0b3VybmUgbGUgdGFibGVhdSBgbGlzdGAgZGUgTElSUFN1Z2dlc3Rpb25MaXN0XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSwgZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGl0ZW0udGl0bGUgfSk7XG4gICAgICAgIGxldCBtZXNzYWdlOnN0cmluZyA9IGl0ZW0uZGVzY3JpcHRpb25cbiAgICAgICAgLy8gaWYgKGl0ZW0ubm90ZU5hbWUgIT09IGl0ZW0udGl0bGUpIHtcbiAgICAgICAgLy8gICAgIGlmIChpdGVtLmRlc2NyaXB0aW9uICE9PSAnJykge1xuICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2UgPSBgJHtpdGVtLmRlc2NyaXB0aW9ufVxcbihmcm9tIDogJHtpdGVtLm5vdGVOYW1lfSlgO1xuICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gICAgICAgICBtZXNzYWdlID0gYChmcm9tIDogJHtpdGVtLm5vdGVOYW1lfSlgO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9O1xuICAgICAgICBlbC5jcmVhdGVFbCgnc21hbGwnLCB7dGV4dDogbWVzc2FnZX0pO1xuICAgICAgfVxuICBcbiAgICAgIG9uQ2hvb3NlU3VnZ2VzdGlvbihpdGVtOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrKGl0ZW0pO1xuICAgICAgfX1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdEl0ZW1SYW5kb21QaWNrZXIgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBMSVJQUGx1Z2luU2V0dGluZ3M7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdsaXN0LXRyZWUnLCAnUGljayByYW5kb20gbGlzdCBpdGVtJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb1RoZUpvYignbm90ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdpbnNlcnQtcmFuZG9tLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCByYW5kb20gaXRlbSBmcm9tIGxpc3QnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvVGhlSm9iKCdub3RlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2luc2VydC1zZXR0aW5nLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBsaXN0IHNldHRpbmdzIHZhbHVlcycsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKExJUlBMaXN0LmdldFNldHRpbmdTdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2luc2VydC1yZWZlcmVuY2UtaXRlbScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IGxpc3QgcmVmZXJlbmNlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb1RoZUpvYigncmVmZXJlbmNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTElSUFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpIHtcblxuICAgIH1cblxuICAgIGFzeW5jIGRvVGhlSm9iKGFjdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFsbExJUlBGaWxlcyA9IHRoaXMuZ2V0TElSUEZpbGVzKHRoaXMuc2V0dGluZ3Mubm90ZVBhdGgpO1xuICAgICAgICBsZXQgY3VycmVudExJUlAgPSBuZXcgTElSUE11bHRpTm90ZSh0aGlzLnNldHRpbmdzLm51bGxWYWx1ZSwgdGhpcy5zZXR0aW5ncy5lc2NhcGVWYWx1ZSwgdGhpcy5zZXR0aW5ncy5tYXhNYWNyb0RlcHRoKTtcbiAgICAgICAgbGV0IGxvYWRXaXRob3V0RXJyb3I6Ym9vbGVhbiA9IHRydWU7XG5cbiAgICAgICAgZm9yIChjb25zdCBjdXJyZW50RmlsZSBvZiBhbGxMSVJQRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGU09iamVjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjdXJyZW50RmlsZSk7XG4gICAgICAgICAgICBsZXQgY29udGVudDpzdHJpbmcgPSAnJztcbiAgICAgICAgICAgIGlmIChjdXJyZW50RlNPYmplY3QgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGN1cnJlbnRGU09iamVjdCk7XG4gICAgICAgICAgICAgICAgbG9hZFdpdGhvdXRFcnJvciA9ICBjdXJyZW50TElSUC5sb2FkRnJvbU5vdGUoY3VycmVudEZTT2JqZWN0LnBhdGguc2xpY2UoMCwgLTMpLCBjb250ZW50KSAmJiBsb2FkV2l0aG91dEVycm9yO1xuICAgICAgICAgICAgfTsgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWxvYWRXaXRob3V0RXJyb3IpIHtcbiAgICAgICAgICAgIGN1cnJlbnRMSVJQLmdldEVycm9yKCkubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMSVJQLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93V2FybmluZykge1xuICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0V2FybmluZygpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY3VycmVudExJUlAubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciA6IGNoZWNrIHNldHRpbmdzIFwiUGF0aCBcIiBpbiBwbHVnaW4gTGlzdCBJdGVtIFJhbmRvbSBQaWNrZXIgIScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRMSVJQLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgbmV3IExJUlBTdWdnZXN0TW9kYWwodGhpcy5hcHAsIGN1cnJlbnRMSVJQLmdldExpc3RTdWdnZXN0aW9uKGFjdGlvbiA9PT0gJ3JlZmVyZW5jZScpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKGB7JHtpdGVtLnRpdGxlfX1gKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd05vdGVTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXROb3RlU3VnZ2VzdGlvbihhY3Rpb24gPT09ICdyZWZlcmVuY2UnKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IExJUlBTdWdnZXN0TW9kYWwodGhpcy5hcHAsIGN1cnJlbnRMSVJQLmdldExpc3RTdWdnZXN0aW9uKGFjdGlvbiA9PT0gJ3JlZmVyZW5jZScpLmZpbHRlckJ5Tm90ZU5hbWUoaXRlbS5ub3RlTmFtZSksIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnbm90ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydFN0cmluZyhgeyR7aXRlbS50aXRsZX19YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oYWN0aW9uID09PSAncmVmZXJlbmNlJyksIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrV2l0aFRpdGxlKGN1cnJlbnRMSVJQLCBpdGVtLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKGB7JHtpdGVtLnRpdGxlfX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0TElSUEZpbGVzIChub3RlUGF0aDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsVmF1bHRGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIGxldCBmaWxlc0luTm90ZVBhdGg6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3Qgbm90ZVBhdGhSZWdleCA9IG5ldyBSZWdFeHAoYF4ke25vdGVQYXRofSgvLispP1xcLm1kJGApO1xuICAgICAgICBhbGxWYXVsdEZpbGVzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vdGVQYXRoUmVnZXgudGVzdChlbGVtZW50LnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgZmlsZXNJbk5vdGVQYXRoLnB1c2goZWxlbWVudC5wYXRoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmlsZXNJbk5vdGVQYXRoO1xuICAgIH07XG5cbiAgICB3b3JrV2l0aFRpdGxlKE5vdGU6IExJUlBNdWx0aU5vdGUsIGxpc3RUaXRsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25Gb3JOb3RpZmljYXRpb25SZWdleDpzdHJpbmcgPSBgXiR7dGhpcy5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb259JGA7XG4gICAgICAgICAgICBjb25zdCBub3RpY2VSZWdleCA9IG5ldyBSZWdFeHAoc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uUmVnZXgpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICAgICAgICAgIGlmIChub3RpY2VSZWdleC50ZXN0KHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKE5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0cmluZ1RvSW5zZXJ0OiBzdHJpbmcgPSAnJztcbiAgICAgICAgICAgICAgICBjb25zdCByZXBlYXRJbnNlcnRSZWdFeCA9IC9eKFxcZCspKC4qKS9nbTtcbiAgICAgICAgICAgICAgICBsZXQgcmVnRXhFeGVjdXRpb247XG4gICAgICAgICAgICAgICAgbGV0IHJlcGVhdDogbnVtYmVyO1xuICAgICAgICAgICAgICAgIGlmICgocmVnRXhFeGVjdXRpb24gPSByZXBlYXRJbnNlcnRSZWdFeC5leGVjKHNlbGVjdGlvbikpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdCA9IE51bWJlcihyZWdFeEV4ZWN1dGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGltaXRlciA9IHNlbGVjdGlvbi5yZXBsYWNlKC9eXFxkKy8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlTdHJpbmdUb2luc2VydDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlTdHJpbmdUb2luc2VydC5wdXNoKE5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdUb0luc2VydCA9IGFycmF5U3RyaW5nVG9pbnNlcnQuam9pbihkZWxpbWl0ZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1RvSW5zZXJ0ID0gTm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHN0cmluZ1RvSW5zZXJ0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gYWN0aXZlIE1hcmtkb3duIGVkaXRvciBmb3VuZC5cIik7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGluc2VydFN0cmluZyhzdHJpbmdUb0luc2VydDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgYWN0aXZlVmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihzdHJpbmdUb0luc2VydCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gYWN0aXZlIE1hcmtkb3duIGVkaXRvciBmb3VuZC5cIik7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn1cblxuY2xhc3MgTElSUFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IExpc3RJdGVtUmFuZG9tUGlja2VyO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlzdEl0ZW1SYW5kb21QaWNrZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ05vdGUgc2V0dGluZycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTm90ZSBQYXRoJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdUaGUgcGF0aCBhbmQgZmlsZW5hbWUgb2YgdGhlIG5vdGUgdGhhdCBjb250YWlucyB0aGUgbGlzdHMgdG8gYmUgdXNlZC4gRXhlbXBsZSA6IFwiRm9sZGVyL05vdGVcIi4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB0aGUgcGF0aCB0byB5b3VyIG5vdGUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlUGF0aClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ludGVyZmFjZSBzZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBub3RlIHNlbGVjdG9yJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiBwYXRoIGlzIGEgZm9sZGVyJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU2VsZWN0b3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgd2FybmluZycpXG4gICAgICAgICAgICAuc2V0RGVzYygnRGlzcGxheSB0aGUgd2FybmluZ3Mgb2Ygbm90ZXMgYW5kIGxpc3RzLCBpZiBhbnkuIFdhcm5pbmdzIGZvciBtYWNybyBkZXB0aCBsaW1pdCByZWFjaGVkIGFyZSBhbHdheXMgZGlzcGxheWVkLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dhcm5pbmcpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1dhcm5pbmcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0xpc3Qgc2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ051bGwgdmFsdWUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHRoZSBmaXJzdCBsaW5lIG9mIGFuIGl0ZW0gaGFzIHRoaXMgdmFsdWUsIHRoZSBsaW5lIGlzIGZsdXNoLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubnVsbFZhbHVlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubnVsbFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0VzY2FwZSB2YWx1ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgeW91IHdhbnQgc29tZSBoZWFkaW4gb25lIG9yIGZpcnN0IGxldmVsIGxpc3QgaXRlbSBpbiB5b3VyIGl0ZW0sIHlvdSBjb3VsZCBlc2NhcGUgdGhlbSB3aXRoIHRoZXNlIHZhbHVlJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdmFsdWUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lc2NhcGVWYWx1ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZVZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NlbGVjdGlvbiBzZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2VsZWN0aW9uIHZhbHVlIGZvciBub3RpZmljYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHRoZSB0ZXh0IHNlbGVjdGVkIGhhcyB0aGlzIHZhbHVlLCB0aGUgaXRlbSBpcyBub3QgaW5zZXJ0ZWQsIGJ1dCBub3RpZmllZCAhJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdmFsdWUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVsZXRlIHNlbGVjdGlvbiB2YWx1ZSBmb3Igbm90aWZpY2F0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiBzZXQsIHRoZSBzZWxlY3RlZCB2YWx1ZSBmb3Igbm90aWZpY2F0aW9uIGlzIGRlbGV0ZWQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVGVjaG5pY2FsIHNldHRpbmdzJyB9KTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ01hY3JvIGRlcHRoIGxpbWl0JylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnTWFjcm8gcmVjdXJzaW9uIGxpbWl0OiBob3cgbWFueSBuZXN0ZWQgbWFjcm8gY2FsbHMgYXJlIGFsbG93ZWQuIFplcm8gcHJldmVudHMgbmVzdGVkIG1hY3JvcyBmcm9tIGJlaW5nIHJlc29sdmVkLicpXG4gICAgICAgICAgICAgICAgLmFkZFNsaWRlcigoc2xpZGVyKSA9PlxuICAgICAgICAgICAgICAgICAgICBzbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhNYWNyb0RlcHRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxMCwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhNYWNyb0RlcHRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUEwRztBQUUxRyxTQUFTLFlBQWUsU0FBYyxXQUE2RDtBQUMvRixRQUFNLFVBQW9CLENBQUM7QUFDM0IsVUFBUSxRQUFRLENBQUMsU0FBUyxVQUFVO0FBQ2xDLFFBQUksVUFBVSxTQUFTLEtBQUssR0FBRztBQUM3QixjQUFRLEtBQUssS0FBSztBQUFBLElBQ3BCO0FBQUEsRUFDRixDQUFDO0FBQ0QsU0FBTztBQUNYO0FBRUEsU0FBUyxZQUFZLGdCQUFnQztBQUNqRCxTQUFPLGVBQWUsUUFBUSx1QkFBdUIsTUFBTTtBQUMv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
