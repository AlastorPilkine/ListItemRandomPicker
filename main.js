/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
function escapeRegex(stringToEscape) {
  return stringToEscape.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
var DEFAULT_SETTINGS = {
  notePath: "Path of a note or a folder",
  showWarning: true,
  maxMacroDepth: 1,
  selectionForNotification: "!",
  deleteSelectionForNotification: false,
  nullValue: "null",
  escapeValue: "//",
  showNoteSelector: true
};
var DiceRoller = class {
  checkDice(diceString) {
    const diceRegex = /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i;
    return diceRegex.test(diceString);
  }
  rollDice(diceString) {
    if (!this.checkDice(diceString)) {
      throw new Error("Syntaxe de lancer de d\xE9s invalide.");
    }
    const [_, countStr, sidesStr, modifierStr, explodeStr, keepStr, keepLowStr] = diceString.match(
      /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i
    );
    const count = parseInt(countStr || "1");
    const sides = parseInt(sidesStr);
    const modifier = parseInt(modifierStr || "0");
    const explode = !!explodeStr;
    const keep = keepStr ? parseInt(keepStr.slice(1)) : void 0;
    const keepLow = keepLowStr ? parseInt(keepLowStr.slice(2)) : void 0;
    let results = [];
    for (let i = 0; i < count; i++) {
      let result = Math.floor(Math.random() * sides) + 1;
      results.push(result);
      if (explode) {
        while (result === sides) {
          result = Math.floor(Math.random() * sides) + 1;
          results.push(result);
        }
      }
    }
    if (keep) {
      results.sort((a, b) => b - a);
      results = results.slice(0, keep);
    } else if (keepLow) {
      results.sort((a, b) => a - b);
      results = results.slice(0, keepLow);
    }
    const sum = results.reduce((acc, val) => acc + val, 0);
    return sum + modifier;
  }
  /**
   * Remplace les lancers de dés encadrés par des délimiteurs dans une chaîne multi-lignes.
   *
   * @param {string} text Le texte multi-lignes contenant les lancers de dés.
   * @param {string} startDelimiter Le délimiteur de début des lancers de dés.
   * @param {string} endDelimiter Le délimiteur de fin des lancers de dés.
   * @returns {string} Le texte avec les lancers de dés remplacés par leurs résultats.
   */
  replaceDiceRolls(text, startDelimiter, endDelimiter) {
    const regex = new RegExp(
      `${this.escapeRegExp(startDelimiter)}([^${this.escapeRegExp(
        startDelimiter + endDelimiter
      )}]+)${this.escapeRegExp(endDelimiter)}`,
      "g"
    );
    return text.replace(regex, (match, diceString) => {
      try {
        const result = this.rollDice(diceString);
        return result.toString();
      } catch (error) {
        return match;
      }
    });
  }
  /**
   * Échappe les caractères spéciaux pour une utilisation dans une expression régulière.
   *
   * @param {string} string La chaîne de caractères à échapper.
   * @returns {string} La chaîne de caractères échappée.
   */
  escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }
};
var LIRPLogElement = class {
  getType() {
    const errors = ["dupInNote", "dupInFolder"];
    return "warning";
  }
  constructor(noteName, listTitle, status, complement = "") {
    this.noteName = noteName;
    this.listTitle = listTitle;
    this.status = status;
    this.complement = complement;
  }
  toString() {
    return `${this.getType()} / ${this.noteName} / ${this.listTitle} / ${this.status} / ${this.complement}`;
  }
};
var LIRPLog = class {
  constructor() {
    this.logs = [];
  }
  push(noteName, listTitle, status, complement = "") {
    this.logs.push(new LIRPLogElement(noteName, listTitle, status, complement));
  }
  add(logs) {
    this.logs = this.logs.concat(logs.logs);
  }
  get(type) {
    const logsForType = this.logs.filter(
      (element) => element.getType() === type
    );
    let getArray = [];
    logsForType.map((element) => {
      getArray.push(element.toString());
    });
    return getArray;
  }
};
var LIRPList = class {
  static getSettingString(value = "") {
    if (value === "") {
      return "- [ ] Hide this list\n";
    } else {
      switch (value) {
        case "hide":
          return "^- \\[[x ]\\] Hide this list$";
        case "hide_ticked":
          return "^- \\[x\\] Hide this list$";
      }
      ;
    }
    ;
  }
  constructor(noteName, lines, nullValue, escapeString) {
    this.title = "";
    this.description = "";
    this.hidden = false;
    this.items = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    lines.shift();
    const listBeginItemRegex = /^(-|\d+\.) (?!\[) *(.+)$/;
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.logs.push(noteName, this.title, "emptyList");
      this.hidden = true;
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      let mdDescription = cleanLines.slice(0, listBeginIndexes[0]);
      if (mdDescription[0] === "") {
        mdDescription.shift();
      }
      let isHidden = false;
      const hideRegexTicked = new RegExp(LIRPList.getSettingString("hide_ticked"));
      const hideRegex = new RegExp(LIRPList.getSettingString("hide"));
      mdDescription.map((element) => {
        if (hideRegexTicked.test(element)) {
          isHidden = true;
          this.hidden = isHidden;
        }
        ;
      });
      mdDescription = mdDescription.filter((element) => !hideRegex.test(element));
      this.description = mdDescription.join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    let item;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      item = cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]);
      this.pushItemBasedOnWeight(item);
    }
    item = cleanLines.slice(listBeginIndexes[listBeginCount - 1]);
    if (item.at(-1) === "") {
      item.pop();
    }
    this.pushItemBasedOnWeight(item);
  }
  pushItemBasedOnWeight(item) {
    const ItemWithWeightRegEx = /^\((\d+)\)\s+(.+)$/;
    let regExExecution;
    let repeat;
    if ((regExExecution = ItemWithWeightRegEx.exec(item[0])) !== null) {
      repeat = Number(regExExecution[1]);
      item[0] = regExExecution[2];
    } else {
      repeat = 1;
    }
    if (item[0] === this.nullValue) {
      if (item.length === 1) {
        item[0] = "";
      } else {
        item.shift();
      }
      ;
    }
    ;
    const stringRegex = `^ *${this.escapeString}(.*)`;
    const escapeStringRegEx = new RegExp(stringRegex, "gm");
    const escapeItem = item.map((element) => {
      return element.replace(escapeStringRegEx, "$1");
    });
    const stringItem = escapeItem.join("\n");
    for (let i = 0; i < repeat; i++) {
      this.items.push(stringItem);
    }
  }
  getSuggestion(noteName) {
    const suggestion = {
      noteName,
      title: this.title,
      description: this.description.split("\n")[0]
    };
    return suggestion;
  }
  notHidden() {
    return !this.hidden;
  }
  pickRandomItem() {
    let randomItem = "";
    if (this.items.length > 0) {
      randomItem = this.items[Math.floor(Math.random() * this.items.length)];
    }
    return randomItem;
  }
  getWarning() {
    return this.logs.get("warning");
  }
};
var LIRPNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.noteName = "";
    this.description = "";
    this.list = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.rollDice = true;
    this.referenceMaxDepth = referenceMaxDepth;
  }
  getListTitles() {
    let listTitles = [];
    this.list.map((element) => {
      listTitles.push(element.title);
    });
    return listTitles;
  }
  loadFromNote(noteName, noteContent) {
    this.noteName = noteName;
    const lines = noteContent.split("\n");
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.logs.push(noteName, "", "emptyNote");
      return false;
    }
    if (headingIndexes[0] !== 0) {
      this.description = lines.slice(0, headingIndexes[0]).join("\n");
    }
    const headingCount = headingIndexes.length;
    for (let currentIndex = 0; currentIndex < headingCount - 1; currentIndex++) {
      this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1]), this.nullValue, this.escapeString));
    }
    ;
    this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[headingCount - 1]), this.nullValue, this.escapeString));
    return true;
  }
  pushListIfNotExists(listToPush) {
    if (this.getListTitles().contains(listToPush.title)) {
      this.logs.push(this.noteName, listToPush.title, "dupInNote");
      return false;
    } else {
      this.list.push(listToPush);
      return true;
    }
    ;
  }
  getListSuggestion(withHidden = false) {
    const noteSuggestion = new LIRPSuggestionList();
    this.list.forEach((element) => {
      if (withHidden || element.notHidden()) {
        noteSuggestion.push(element.getSuggestion(this.noteName));
      }
    });
    return noteSuggestion;
  }
  doReferenceSubstitution(text) {
    let match;
    let modifiedText = text;
    let listTitle = "";
    const stringRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    for (let repeat = 0; repeat < this.referenceMaxDepth; repeat++) {
      const refRegex = new RegExp(stringRefRegex, "mg");
      while ((match = refRegex.exec(modifiedText)) !== null) {
        let newValue = this.pickRandomItemFromList(match[1], false);
        listTitle = match[0];
        modifiedText = modifiedText.replace(listTitle, newValue);
        refRegex.lastIndex = match.index + newValue.length;
      }
    }
    if (this.rollDice) {
      const diceRoller = new DiceRoller();
      modifiedText = diceRoller.replaceDiceRolls(modifiedText, "{", "}");
    }
    return {
      lastListTitle: listTitle,
      modifiedText
    };
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let randomItem = "";
    let returnOfDoExecSub = {
      lastListTitle: listTitle,
      modifiedText: ""
    };
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      randomItem = currentList.pickRandomItem();
      if (workOnReference) {
        returnOfDoExecSub = this.doReferenceSubstitution(randomItem);
        randomItem = returnOfDoExecSub.modifiedText;
        const stringMacroRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
        const macroRefRegex = new RegExp(stringMacroRefRegex);
        if (macroRefRegex.test(randomItem) && workOnReference) {
          if (returnOfDoExecSub.lastListTitle === "") {
            returnOfDoExecSub.lastListTitle = listTitle;
          }
          this.logs.push(this.noteName, returnOfDoExecSub.lastListTitle, "refLimit");
          new import_obsidian.Notice(`Macro depth limit reached in note "${this.noteName}" after calling "${returnOfDoExecSub.lastListTitle}"`);
        }
        ;
      }
      ;
      return randomItem;
    } else {
      return "";
    }
    ;
  }
  getError() {
    return this.logs.get("error");
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.list.forEach((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPMultiNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.multiNote = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.referenceMaxDepth = referenceMaxDepth;
    this.logs = new LIRPLog();
  }
  loadFromNote(noteName, noteContent) {
    const currentNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    const status = currentNote.loadFromNote(noteName, noteContent);
    this.pushNoteIfListNotExists(currentNote);
    return status;
  }
  pushNoteIfListNotExists(noteToPush) {
    const allListTitle = this.getListTitles();
    let unic = true;
    noteToPush.getListTitles().map((element) => {
      if (allListTitle.contains(element)) {
        this.logs.push(noteToPush.noteName, element, "dupInFolder", this.getNoteNameFromListTitle(element));
        unic = false;
      }
    });
    if (unic) {
      this.multiNote.push(noteToPush);
    } else {
      this.logs.add(noteToPush.logs);
    }
    ;
    return unic;
  }
  getNoteNameFromListTitle(listTitle) {
    let note = this.multiNote.find(
      (element) => element.getListTitles().contains(listTitle)
    );
    if (note !== void 0) {
      return note.noteName;
    } else {
      return "";
    }
    ;
  }
  getListTitles() {
    let listTitles = [];
    this.multiNote.map((element) => {
      listTitles = listTitles.concat(element.getListTitles());
    });
    return listTitles;
  }
  getListSuggestion(withHidden = false) {
    let allListSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      allListSuggestion = allListSuggestion.concat(element.getListSuggestion(withHidden));
    });
    return allListSuggestion;
  }
  getNoteSuggestion(withHidden = false) {
    let noteSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      if (element.getListSuggestion(withHidden).length > 0) {
        noteSuggestion.push({
          noteName: element.noteName,
          title: element.noteName,
          description: element.description.split("\n")[0]
        });
      }
      ;
    });
    return noteSuggestion;
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    superNote.noteName = this.getNoteNameFromListTitle(listTitle);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    return superNote.pickRandomItemFromList(listTitle);
  }
  getError() {
    let allError = [];
    this.multiNote.map((element) => {
      allError = allError.concat(element.getError());
    });
    return allError;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.multiNote.map((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.multiNote.length;
  }
};
var LIRPSuggestionList = class {
  constructor() {
    this.list = [];
  }
  push(element) {
    this.list.push(element);
  }
  filterByNoteName(noteName) {
    const filterList = new LIRPSuggestionList();
    this.list.map((element) => {
      if (element.noteName === noteName) {
        filterList.push(element);
      }
    });
    return filterList;
  }
  filter(callback) {
    const filteredList = new LIRPSuggestionList();
    for (let i = 0; i < this.list.length; i++) {
      if (callback(this.list[i], i, this.list)) {
        filteredList.push(this.list[i]);
      }
    }
    return filteredList;
  }
  concat(otherList) {
    const newList = new LIRPSuggestionList();
    newList.list = this.list.concat(otherList.list);
    return newList;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items.filter(
      (item) => item.title.toLowerCase().includes(query.toLowerCase())
    ).list;
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    let message = item.description;
    el.createEl("small", { text: message });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.doTheJob("note");
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.doTheJob("note");
      }
    });
    this.addCommand({
      id: "insert-setting-item",
      name: "Insert list settings values",
      callback: () => {
        this.insertString(LIRPList.getSettingString());
      }
    });
    this.addCommand({
      id: "insert-reference-item",
      name: "Insert list reference",
      callback: () => {
        this.doTheJob("reference");
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  async doTheJob(action) {
    const allLIRPFiles = this.getLIRPFiles(this.settings.notePath);
    let currentLIRP = new LIRPMultiNote(this.settings.nullValue, this.settings.escapeValue, this.settings.maxMacroDepth);
    let loadWithoutError = true;
    for (const currentFile of allLIRPFiles) {
      const currentFSObject = this.app.vault.getAbstractFileByPath(currentFile);
      let content = "";
      if (currentFSObject instanceof import_obsidian.TFile) {
        content = await this.app.vault.cachedRead(currentFSObject);
        loadWithoutError = currentLIRP.loadFromNote(currentFSObject.path.slice(0, -3), content) && loadWithoutError;
      }
      ;
    }
    ;
    if (!loadWithoutError) {
      currentLIRP.getError().map((element) => {
        new import_obsidian.Notice(element);
      });
      if (currentLIRP.length === 0) {
        return;
      }
    }
    if (this.settings.showWarning) {
      currentLIRP.getWarning().forEach((element) => {
        new import_obsidian.Notice(element);
      });
    }
    ;
    if (currentLIRP.length === 0) {
      new import_obsidian.Notice('Error : check settings "Path " in plugin List Item Random Picker !');
      return;
    } else if (currentLIRP.length === 1) {
      new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
        if (action === "note") {
          this.workWithTitle(currentLIRP, item.title);
        } else {
          this.insertString(`{${item.title}}`);
        }
        ;
      }).open();
    } else {
      if (this.settings.showNoteSelector) {
        new LIRPSuggestModal(this.app, currentLIRP.getNoteSuggestion(action === "reference"), (item) => {
          new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference").filterByNoteName(item.noteName), (item2) => {
            if (action === "note") {
              this.workWithTitle(currentLIRP, item2.title);
            } else {
              this.insertString(`{${item2.title}}`);
            }
            ;
          }).open();
        }).open();
      } else {
        new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
          if (action === "note") {
            this.workWithTitle(currentLIRP, item.title);
          } else {
            this.insertString(`{${item.title}}`);
          }
          ;
        }).open();
      }
      ;
    }
    ;
  }
  getLIRPFiles(notePath) {
    let allVaultFiles = this.app.vault.getFiles();
    let filesInNotePath = [];
    const notePathRegex = new RegExp(`^${notePath}(/.+)?.md$`);
    allVaultFiles.map((element) => {
      if (notePathRegex.test(element.path)) {
        filesInNotePath.push(element.path);
      }
      ;
    });
    return filesInNotePath;
  }
  workWithTitle(Note, listTitle) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selectionForNotificationRegex = `^${this.settings.selectionForNotification}$`;
      const noticeRegex = new RegExp(selectionForNotificationRegex);
      const editor = activeView.editor;
      const selection = editor.getSelection();
      if (noticeRegex.test(selection)) {
        new import_obsidian.Notice(Note.pickRandomItemFromList(listTitle));
        if (this.settings.deleteSelectionForNotification) {
          editor.replaceSelection("");
        }
      } else {
        let stringToInsert = "";
        const repeatInsertRegEx = /^(\d+)(.*)/gm;
        let regExExecution;
        let repeat;
        if ((regExExecution = repeatInsertRegEx.exec(selection)) !== null) {
          const repeat2 = Number(regExExecution[1]);
          const delimiter = selection.replace(/^\d+/, "");
          const arrayStringToinsert = [];
          for (let i = 0; i < repeat2; i++) {
            arrayStringToinsert.push(Note.pickRandomItemFromList(listTitle));
          }
          stringToInsert = arrayStringToinsert.join(delimiter);
        } else {
          stringToInsert = Note.pickRandomItemFromList(listTitle);
        }
        editor.replaceSelection(stringToInsert);
      }
      ;
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
    ;
  }
  insertString(stringToInsert) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      activeView.editor.replaceSelection(stringToInsert);
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
    ;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Note setting" });
    new import_obsidian.Setting(containerEl).setName("Note Path").setDesc('The path and filename of the note that contains the lists to be used. Exemple : "Folder/Note".').addText(
      (text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
        this.plugin.settings.notePath = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Interface settings" });
    new import_obsidian.Setting(containerEl).setName("Show note selector").setDesc("If path is a folder").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteSelector);
      toggle.onChange(async (value) => {
        this.plugin.settings.showNoteSelector = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Show warning").setDesc("Display the warnings of notes and lists, if any. Warnings for macro depth limit reached are always displayed.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showWarning);
      toggle.onChange(async (value) => {
        this.plugin.settings.showWarning = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "List settings" });
    new import_obsidian.Setting(containerEl).setName("Null value").setDesc("If the first line of an item has this value, the line is flush.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.nullValue).onChange(async (value) => {
        this.plugin.settings.nullValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Escape value").setDesc("If you want some headin one or first level list item in your item, you could escape them with these value").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.escapeValue).onChange(async (value) => {
        this.plugin.settings.escapeValue = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Selection settings" });
    new import_obsidian.Setting(containerEl).setName("Selection value for notification").setDesc("If the text selected has this value, the item is not inserted, but notified !").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.selectionForNotification).onChange(async (value) => {
        this.plugin.settings.selectionForNotification = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Delete selection value for notification").setDesc("If set, the selected value for notification is deleted.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deleteSelectionForNotification);
      toggle.onChange(async (value) => {
        this.plugin.settings.deleteSelectionForNotification = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2", { text: "Technical settings" });
    new import_obsidian.Setting(containerEl).setName("Macro depth limit").setDesc("Macro recursion limit: how many nested macro calls are allowed. Zero prevents nested macros from being resolved.").addSlider(
      (slider) => slider.setValue(this.plugin.settings.maxMacroDepth).setLimits(0, 10, 1).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxMacroDepth = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XG5cbmZ1bmN0aW9uIGZpbmRJbmRleGVzPFQ+KGFuQXJyYXk6IFRbXSwgcHJlZGljYXRlOiAoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGFuQXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZWxlbWVudCwgaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ZXM7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cmluZ1RvRXNjYXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzdHJpbmdUb0VzY2FwZS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xufVxuaW50ZXJmYWNlIExJUlBQbHVnaW5TZXR0aW5ncyB7XG4gICAgbm90ZVBhdGg6IHN0cmluZztcbiAgICBzaG93V2FybmluZzogYm9vbGVhbjtcbiAgICBtYXhNYWNyb0RlcHRoOiBudW1iZXI7XG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBib29sZWFuO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVZhbHVlOiBzdHJpbmc7XG4gICAgc2hvd05vdGVTZWxlY3RvcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTElSUFBsdWdpblNldHRpbmdzID0ge1xuICAgIG5vdGVQYXRoOiAnUGF0aCBvZiBhIG5vdGUgb3IgYSBmb2xkZXInLFxuICAgIHNob3dXYXJuaW5nOiB0cnVlLFxuICAgIG1heE1hY3JvRGVwdGg6IDEsXG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiAnIScsXG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBmYWxzZSxcbiAgICBudWxsVmFsdWU6ICdudWxsJyxcbiAgICBlc2NhcGVWYWx1ZTogJy8vJyxcbiAgICBzaG93Tm90ZVNlbGVjdG9yOiB0cnVlLFxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY2xhc3MgRGljZVJvbGxlciB7XG4gICAgY2hlY2tEaWNlKGRpY2VTdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgY29uc3QgZGljZVJlZ2V4ID0gL14oXFxkKyk/ZChcXGQrKShbXFwrXFwtXVxcZCspPyhlKT8oa1xcZCspPyhrbFxcZCspPyQvaTtcbiAgICAgIHJldHVybiBkaWNlUmVnZXgudGVzdChkaWNlU3RyaW5nKTtcbiAgICB9O1xuICBcbiAgICByb2xsRGljZShkaWNlU3RyaW5nOiBzdHJpbmcpOiBudW1iZXIge1xuICAgICAgaWYgKCF0aGlzLmNoZWNrRGljZShkaWNlU3RyaW5nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXhlIGRlIGxhbmNlciBkZSBkXHUwMEU5cyBpbnZhbGlkZS5cIik7XG4gICAgICB9XG4gIFxuICAgICAgY29uc3QgW18sIGNvdW50U3RyLCBzaWRlc1N0ciwgbW9kaWZpZXJTdHIsIGV4cGxvZGVTdHIsIGtlZXBTdHIsIGtlZXBMb3dTdHJdID1cbiAgICAgICAgZGljZVN0cmluZy5tYXRjaChcbiAgICAgICAgICAvXihcXGQrKT9kKFxcZCspKFtcXCtcXC1dXFxkKyk/KGUpPyhrXFxkKyk/KGtsXFxkKyk/JC9pXG4gICAgICAgICkgYXMgUmVnRXhwTWF0Y2hBcnJheTtcbiAgXG4gICAgICBjb25zdCBjb3VudCA9IHBhcnNlSW50KGNvdW50U3RyIHx8IFwiMVwiKTtcbiAgICAgIGNvbnN0IHNpZGVzID0gcGFyc2VJbnQoc2lkZXNTdHIpO1xuICAgICAgY29uc3QgbW9kaWZpZXIgPSBwYXJzZUludChtb2RpZmllclN0ciB8fCBcIjBcIik7XG4gICAgICBjb25zdCBleHBsb2RlID0gISFleHBsb2RlU3RyO1xuICAgICAgY29uc3Qga2VlcCA9IGtlZXBTdHIgPyBwYXJzZUludChrZWVwU3RyLnNsaWNlKDEpKSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGtlZXBMb3cgPSBrZWVwTG93U3RyID8gcGFyc2VJbnQoa2VlcExvd1N0ci5zbGljZSgyKSkgOiB1bmRlZmluZWQ7XG4gIFxuICAgICAgbGV0IHJlc3VsdHM6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNpZGVzKSArIDE7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICBcbiAgICAgICAgaWYgKGV4cGxvZGUpIHtcbiAgICAgICAgICB3aGlsZSAocmVzdWx0ID09PSBzaWRlcykge1xuICAgICAgICAgICAgcmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2lkZXMpICsgMTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIGlmIChrZWVwKSB7XG4gICAgICAgIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYiAtIGEpO1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCBrZWVwKTtcbiAgICAgIH0gZWxzZSBpZiAoa2VlcExvdykge1xuICAgICAgICByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwga2VlcExvdyk7XG4gICAgICB9XG4gIFxuICAgICAgY29uc3Qgc3VtID0gcmVzdWx0cy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MgKyB2YWwsIDApO1xuICAgICAgcmV0dXJuIHN1bSArIG1vZGlmaWVyO1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAqIFJlbXBsYWNlIGxlcyBsYW5jZXJzIGRlIGRcdTAwRTlzIGVuY2Fkclx1MDBFOXMgcGFyIGRlcyBkXHUwMEU5bGltaXRldXJzIGRhbnMgdW5lIGNoYVx1MDBFRW5lIG11bHRpLWxpZ25lcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IExlIHRleHRlIG11bHRpLWxpZ25lcyBjb250ZW5hbnQgbGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXJ0RGVsaW1pdGVyIExlIGRcdTAwRTlsaW1pdGV1ciBkZSBkXHUwMEU5YnV0IGRlcyBsYW5jZXJzIGRlIGRcdTAwRTlzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmREZWxpbWl0ZXIgTGUgZFx1MDBFOWxpbWl0ZXVyIGRlIGZpbiBkZXMgbGFuY2VycyBkZSBkXHUwMEU5cy5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBMZSB0ZXh0ZSBhdmVjIGxlcyBsYW5jZXJzIGRlIGRcdTAwRTlzIHJlbXBsYWNcdTAwRTlzIHBhciBsZXVycyByXHUwMEU5c3VsdGF0cy5cbiAgICAgKi9cbiAgICByZXBsYWNlRGljZVJvbGxzKFxuICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgc3RhcnREZWxpbWl0ZXI6IHN0cmluZyxcbiAgICAgIGVuZERlbGltaXRlcjogc3RyaW5nXG4gICAgKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgYCR7dGhpcy5lc2NhcGVSZWdFeHAoc3RhcnREZWxpbWl0ZXIpfShbXiR7dGhpcy5lc2NhcGVSZWdFeHAoXG4gICAgICAgICAgc3RhcnREZWxpbWl0ZXIgKyBlbmREZWxpbWl0ZXJcbiAgICAgICAgKX1dKykke3RoaXMuZXNjYXBlUmVnRXhwKGVuZERlbGltaXRlcil9YCxcbiAgICAgICAgXCJnXCJcbiAgICAgICk7XG4gIFxuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShyZWdleCwgKG1hdGNoLCBkaWNlU3RyaW5nKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yb2xsRGljZShkaWNlU3RyaW5nKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoOyAvLyBTaSBsYSBzeW50YXhlIGVzdCBpbnZhbGlkZSwgb24gZ2FyZGUgbGUgdGV4dGUgZCdvcmlnaW5lXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAqIFx1MDBDOWNoYXBwZSBsZXMgY2FyYWN0XHUwMEU4cmVzIHNwXHUwMEU5Y2lhdXggcG91ciB1bmUgdXRpbGlzYXRpb24gZGFucyB1bmUgZXhwcmVzc2lvbiByXHUwMEU5Z3VsaVx1MDBFOHJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBMYSBjaGFcdTAwRUVuZSBkZSBjYXJhY3RcdTAwRThyZXMgXHUwMEUwIFx1MDBFOWNoYXBwZXIuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gTGEgY2hhXHUwMEVFbmUgZGUgY2FyYWN0XHUwMEU4cmVzIFx1MDBFOWNoYXBwXHUwMEU5ZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGVzY2FwZVJlZ0V4cChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICB9O1xuICB9O1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG50eXBlIExJUlBMb2dTdGF0dXMgPSAnZHVwSW5Ob3RlJyB8ICdkdXBJbkZvbGRlcicgfCAnZW1wdHlMaXN0JyB8ICdlbXB0eU5vdGUnIHwgJ3JlZkxpbWl0JztcbnR5cGUgTElSUExvZ1R5cGUgPSAnZXJyb3InIHwgJ3dhcm5pbmcnO1xuXG5jbGFzcyBMSVJQTG9nRWxlbWVudCB7XG4gICAgbm90ZU5hbWU6IHN0cmluZztcbiAgICBsaXN0VGl0bGU6IHN0cmluZztcbiAgICBzdGF0dXM6IExJUlBMb2dTdGF0dXM7XG4gICAgY29tcGxlbWVudDogc3RyaW5nO1xuXG4gICAgZ2V0VHlwZSgpOiBMSVJQTG9nVHlwZSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbJ2R1cEluTm90ZScsICdkdXBJbkZvbGRlciddO1xuICAgICAgICByZXR1cm4gJ3dhcm5pbmcnO1xuICAgICAgICAvLyBpZiAoZXJyb3JzLmNvbnRhaW5zKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAvLyAgICAgcmV0dXJuICdlcnJvcidcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIHJldHVybiAnd2FybmluZydcbiAgICAgICAgLy8gfVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvciAobm90ZU5hbWU6IHN0cmluZywgbGlzdFRpdGxlOiBzdHJpbmcsIHN0YXR1czogTElSUExvZ1N0YXR1cywgY29tcGxlbWVudDogc3RyaW5nID0gJycpIHtcbiAgICAgICAgdGhpcy5ub3RlTmFtZSA9IG5vdGVOYW1lO1xuICAgICAgICB0aGlzLmxpc3RUaXRsZSA9IGxpc3RUaXRsZTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuY29tcGxlbWVudCA9IGNvbXBsZW1lbnQ7XG4gICAgfTtcblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmdldFR5cGUoKX0gLyAke3RoaXMubm90ZU5hbWV9IC8gJHt0aGlzLmxpc3RUaXRsZX0gLyAke3RoaXMuc3RhdHVzfSAvICR7dGhpcy5jb21wbGVtZW50fWA7XG4gICAgfTtcbn07XG5jbGFzcyBMSVJQTG9nIHtcbiAgICBsb2dzOiBMSVJQTG9nRWxlbWVudFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9ncyA9IFtdO1xuICAgIH07XG4gICAgXG4gICAgcHVzaChub3RlTmFtZTogc3RyaW5nLCBsaXN0VGl0bGU6IHN0cmluZywgc3RhdHVzOiBMSVJQTG9nU3RhdHVzLCBjb21wbGVtZW50OiBzdHJpbmcgPSAnJyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ3MucHVzaChuZXcgTElSUExvZ0VsZW1lbnQobm90ZU5hbWUsIGxpc3RUaXRsZSwgc3RhdHVzLCBjb21wbGVtZW50KSk7XG4gICAgfTtcblxuICAgIGFkZChsb2dzOiBMSVJQTG9nKTp2b2lke1xuICAgICAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3MuY29uY2F0KGxvZ3MubG9ncyk7XG4gICAgfTtcblxuICAgIGdldCh0eXBlOiBMSVJQTG9nVHlwZSk6IHN0cmluZ1tde1xuICAgICAgICBjb25zdCBsb2dzRm9yVHlwZSA9IHRoaXMubG9ncy5maWx0ZXIoKGVsZW1lbnQpID0+IFxuICAgICAgICAgICAgZWxlbWVudC5nZXRUeXBlKCkgPT09IHR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGdldEFycmF5OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsb2dzRm9yVHlwZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGdldEFycmF5LnB1c2goZWxlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnZXRBcnJheTtcbiAgICB9XG59O1xuaW50ZXJmYWNlIExJUlBMaXN0SW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaXRlbXM6IHN0cmluZ1tdO1xuICAgIGdldFN1Z2dlc3Rpb24obm90ZU5hbWU6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlO1xuICAgIG5vdEhpZGRlbigpOiBib29sZWFuO1xuICAgIHBpY2tSYW5kb21JdGVtKCk6IHN0cmluZztcbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdO1xufVxuXG5jbGFzcyBMSVJQTGlzdCBpbXBsZW1lbnRzIExJUlBMaXN0SW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaGlkZGVuOiBib29sZWFuO1xuICAgIGl0ZW1zOiBzdHJpbmdbXTtcbiAgICBsb2dzOiBMSVJQTG9nO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuXG4gICAgc3RhdGljIGdldFNldHRpbmdTdHJpbmcodmFsdWU6ICcnIHwgJ2hpZGUnIHwgJ2hpZGVfdGlja2VkJyA9ICcnKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuICctIFsgXSBIaWRlIHRoaXMgbGlzdFxcbidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdoaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdeXFwtIFxcXFxbW3ggXVxcXFxdIEhpZGUgdGhpcyBsaXN0JCc7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGlkZV90aWNrZWQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ15cXC0gXFxcXFt4XFxcXF0gSGlkZSB0aGlzIGxpc3QkJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKG5vdGVOYW1lOiBzdHJpbmcsIGxpbmVzOiBzdHJpbmdbXSwgbnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG5cbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ0V4ID0gL14jICsoLispJC87XG4gICAgICAgIHRoaXMudGl0bGUgPSBsaW5lc1swXS5yZXBsYWNlKGhlYWRpbmdSZWdFeCwgXCIkMVwiKTtcbiAgICAgICAgbGluZXMuc2hpZnQoKTtcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSXRlbVJlZ2V4ID0gL14oLXxcXGQrXFwuKSAoPyFcXFspICooLispJC87XG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkluZGV4ZXMgPSBmaW5kSW5kZXhlcyhsaW5lcywgKGVsZW1lbnQpID0+IGxpc3RCZWdpbkl0ZW1SZWdleC50ZXN0KGVsZW1lbnQpKTtcbiAgICAgICAgaWYgKGxpc3RCZWdpbkluZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlTmFtZSwgdGhpcy50aXRsZSwgJ2VtcHR5TGlzdCcpO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFuTGluZXMgPSBsaW5lcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnJlcGxhY2UobGlzdEJlZ2luSXRlbVJlZ2V4LCBcIiQyXCIpXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgbGV0IG1kRGVzY3JpcHRpb24gPSBjbGVhbkxpbmVzLnNsaWNlKDAsIGxpc3RCZWdpbkluZGV4ZXNbMF0pO1xuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIGlmIChtZERlc2NyaXB0aW9uWzBdID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgbWREZXNjcmlwdGlvbi5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMzJcbiAgICAgICAgICAgIC8vICAgTUQwMzIvYmxhbmtzLWFyb3VuZC1saXN0czogTGlzdHMgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIC8vIER1ZSB0byBzcGxpdCBvbiAnXFxuJywgdGhlIHNsaWNlLCBhbmQgYXQgbGVhc3QgYSBqb2luIG9uICdcXG4nIHRoZSBsYXN0ICdcXG4nIGlzIGFsd2F5cyBsb3N0ICFcbiAgICAgICAgICAgIC8vIFNvIHRoZSBmb2xvd2luZyBjb2RlIGlzIHVzZWxlc3NcbiAgICAgICAgICAgIC8vIGlmIChtZERlc2NyaXB0aW9uLmF0KC0xKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgLy8gICAgIG1kRGVzY3JpcHRpb24ucG9wKCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBsZXQgaXNIaWRkZW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGhpZGVSZWdleFRpY2tlZCA9IG5ldyBSZWdFeHAgKExJUlBMaXN0LmdldFNldHRpbmdTdHJpbmcoJ2hpZGVfdGlja2VkJykpO1xuICAgICAgICAgICAgY29uc3QgaGlkZVJlZ2V4ID0gbmV3IFJlZ0V4cCAoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygnaGlkZScpKTtcbiAgICAgICAgICAgIG1kRGVzY3JpcHRpb24ubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhpZGVSZWdleFRpY2tlZC50ZXN0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSBpc0hpZGRlbjtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtZERlc2NyaXB0aW9uID0gbWREZXNjcmlwdGlvbi5maWx0ZXIoKGVsZW1lbnQpID0+ICEoaGlkZVJlZ2V4LnRlc3QoZWxlbWVudCkpKTtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBtZERlc2NyaXB0aW9uLmpvaW4oJ1xcbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaXN0QmVnaW5Db3VudCA9IGxpc3RCZWdpbkluZGV4ZXMubGVuZ3RoXG4gICAgICAgIGxldCBpdGVtOiBzdHJpbmdbXTtcbiAgICAgICAgZm9yIChsZXQgY3VycmVudEluZGV4ID0gMDsgY3VycmVudEluZGV4IDwgKGxpc3RCZWdpbkNvdW50IC0gMSk7IGN1cnJlbnRJbmRleCsrKSB7XG4gICAgICAgICAgICBpdGVtID0gKGNsZWFuTGluZXMuc2xpY2UobGlzdEJlZ2luSW5kZXhlc1tjdXJyZW50SW5kZXhdLCBsaXN0QmVnaW5JbmRleGVzW2N1cnJlbnRJbmRleCArIDFdKSk7XG4gICAgICAgICAgICB0aGlzLnB1c2hJdGVtQmFzZWRPbldlaWdodChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtID0gKGNsZWFuTGluZXMuc2xpY2UobGlzdEJlZ2luSW5kZXhlc1tsaXN0QmVnaW5Db3VudCAtIDFdKSk7XG4gICAgICAgIC8vIHRha2luZyBjYXJlIG9mIE1EMDIyXG4gICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgaWYgKGl0ZW0uYXQoLTEpID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpdGVtLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW0pO1xuICAgIH1cblxuICAgIHB1c2hJdGVtQmFzZWRPbldlaWdodChpdGVtOiBzdHJpbmdbXSkgOiB2b2lkIHtcbiAgICAgICAgY29uc3QgSXRlbVdpdGhXZWlnaHRSZWdFeCA9IC9eXFwoKFxcZCspXFwpXFxzKyguKykkLztcbiAgICAgICAgbGV0IHJlZ0V4RXhlY3V0aW9uO1xuICAgICAgICBsZXQgcmVwZWF0OiBudW1iZXI7XG4gICAgICAgIGlmICgocmVnRXhFeGVjdXRpb24gPSBJdGVtV2l0aFdlaWdodFJlZ0V4LmV4ZWMoaXRlbVswXSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXBlYXQgPSBOdW1iZXIocmVnRXhFeGVjdXRpb25bMV0pO1xuICAgICAgICAgICAgaXRlbVswXSA9IHJlZ0V4RXhlY3V0aW9uWzJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVwZWF0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbVswXSA9PT0gdGhpcy5udWxsVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGl0ZW1bMF0gPSBcIlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNoaWZ0KClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN0cmluZ1JlZ2V4ID0gYF4gKiR7dGhpcy5lc2NhcGVTdHJpbmd9KC4qKWA7XG4gICAgICAgIGNvbnN0IGVzY2FwZVN0cmluZ1JlZ0V4ID0gbmV3IFJlZ0V4cChzdHJpbmdSZWdleCwgJ2dtJyk7XG4gICAgICAgIGNvbnN0IGVzY2FwZUl0ZW0gPSBpdGVtLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVwbGFjZShlc2NhcGVTdHJpbmdSZWdFeCwgJyQxJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHJpbmdJdGVtID0gZXNjYXBlSXRlbS5qb2luKCdcXG4nKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHN0cmluZ0l0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdldFN1Z2dlc3Rpb24obm90ZU5hbWU6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHtcbiAgICAgICAgICAgIG5vdGVOYW1lOiBub3RlTmFtZSxcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICh0aGlzLmRlc2NyaXB0aW9uLnNwbGl0KCdcXG4nKVswXSksXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb247XG4gICAgfTtcblxuICAgIG5vdEhpZGRlbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhpZGRlbjtcbiAgICB9XG5cbiAgICBwaWNrUmFuZG9tSXRlbSgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmFuZG9tSXRlbTogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmFuZG9tSXRlbSA9IHRoaXMuaXRlbXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5pdGVtcy5sZW5ndGgpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZG9tSXRlbTtcbiAgICB9XG5cbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9ncy5nZXQoJ3dhcm5pbmcnKTtcbiAgICB9XG5cbn1cblxuaW50ZXJmYWNlIExJUlBEb1JlZlN1YkludGVyZmFjZSB7XG4gICAgbGFzdExpc3RUaXRsZTogc3RyaW5nO1xuICAgIG1vZGlmaWVkVGV4dDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIGxvYWRGcm9tTm90ZShub3RlTmFtZTogc3RyaW5nLCBub3RlQ29udGVudDogc3RyaW5nKTogYm9vbGVhbjtcbiAgICBnZXRMaXN0U3VnZ2VzdGlvbigpOiBMSVJQU3VnZ2VzdGlvbkxpc3Q7XG4gICAgcGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGU6IHN0cmluZywgd29ya09uUmVmZXJlbmNlOiBib29sZWFuKTogc3RyaW5nOyBcbiAgICBnZXRFcnJvcigpOiBzdHJpbmdbXTtcbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdO1xufVxuXG5jbGFzcyBMSVJQTm90ZSBpbXBsZW1lbnRzIExJUlBOb3RlSW50ZXJmYWNlIHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgbGlzdDogTElSUExpc3RbXTtcbiAgICBsb2dzOiBMSVJQTG9nO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuICAgIHJvbGxEaWNlOiBib29sZWFuO1xuICAgIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAobnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nLCByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubm90ZU5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgdGhpcy5saXN0ID0gW107XG4gICAgICAgIHRoaXMubG9ncyA9IG5ldyBMSVJQTG9nKCk7XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcbiAgICAgICAgdGhpcy5yb2xsRGljZSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlTWF4RGVwdGggPSByZWZlcmVuY2VNYXhEZXB0aDtcbiAgICB9XG5cbiAgICBnZXRMaXN0VGl0bGVzKCkgOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBsaXN0VGl0bGVzOnN0cmluZ1tdID0gW107XG4gICAgICAgIHRoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxpc3RUaXRsZXMucHVzaChlbGVtZW50LnRpdGxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaXN0VGl0bGVzO1xuICAgIH07XG5cbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZywgKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMubm90ZU5hbWUgPSBub3RlTmFtZTtcbiAgICAgICAgY29uc3QgbGluZXMgPSBub3RlQ29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGNvbnN0IGhlYWRpbmdSZWdleCA9IC9eIyAuKyQvO1xuICAgICAgICBsZXQgaGVhZGluZ0luZGV4ZXMgPSBmaW5kSW5kZXhlcyhsaW5lcywgKGVsZW1lbnQpID0+IGhlYWRpbmdSZWdleC50ZXN0KGVsZW1lbnQpKTtcbiAgICAgICAgaWYgKGhlYWRpbmdJbmRleGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2gobm90ZU5hbWUsICcnLCAnZW1wdHlOb3RlJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlYWRpbmdJbmRleGVzWzBdICE9PSAwKSB7XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAyMlxuICAgICAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICAgICAgLy8gRHVlIHRvIHNwbGl0IG9uICdcXG4nLCB0aGUgc2xpY2UsIGFuZCBhdCBsZWFzdCBhIGpvaW4gb24gJ1xcbicgdGhlIGxhc3QgJ1xcbicgaXMgYWx3YXlzIGxvc3QgIVxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGxpbmVzLnNsaWNlKDAsIGhlYWRpbmdJbmRleGVzWzBdKS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkaW5nQ291bnQgPSBoZWFkaW5nSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgZm9yIChsZXQgY3VycmVudEluZGV4ID0gMDsgY3VycmVudEluZGV4IDwgKGhlYWRpbmdDb3VudCAtIDEpOyBjdXJyZW50SW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaExpc3RJZk5vdEV4aXN0cyhuZXcgTElSUExpc3QodGhpcy5ub3RlTmFtZSwgbGluZXMuc2xpY2UoaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4XSwgaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pLCB0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wdXNoTGlzdElmTm90RXhpc3RzKG5ldyBMSVJQTGlzdCh0aGlzLm5vdGVOYW1lLCBsaW5lcy5zbGljZShoZWFkaW5nSW5kZXhlc1toZWFkaW5nQ291bnQgLSAxXSksIHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZykpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH07XG5cbiAgICBwdXNoTGlzdElmTm90RXhpc3RzKGxpc3RUb1B1c2g6IExJUlBMaXN0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmdldExpc3RUaXRsZXMoKS5jb250YWlucyhsaXN0VG9QdXNoLnRpdGxlKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2godGhpcy5ub3RlTmFtZSwgbGlzdFRvUHVzaC50aXRsZSwgJ2R1cEluTm90ZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2gobGlzdFRvUHVzaCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3Qgbm90ZVN1Z2dlc3Rpb24gPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0KCk7XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAod2l0aEhpZGRlbiB8fCBlbGVtZW50Lm5vdEhpZGRlbigpKSB7XG4gICAgICAgICAgICAgICAgbm90ZVN1Z2dlc3Rpb24ucHVzaChlbGVtZW50LmdldFN1Z2dlc3Rpb24odGhpcy5ub3RlTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vdGVTdWdnZXN0aW9uO1xuICAgIH1cblxuICAgIGRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHRleHQ6IHN0cmluZyk6IExJUlBEb1JlZlN1YkludGVyZmFjZSB7XG4gICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgbGV0IG1vZGlmaWVkVGV4dDpzdHJpbmcgPSB0ZXh0O1xuICAgICAgICBsZXQgbGlzdFRpdGxlOnN0cmluZyA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHN0cmluZ1JlZlJlZ2V4OiBzdHJpbmcgPSBgXFx7KCR7dGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4gZXNjYXBlUmVnZXgoZWxlbWVudC50aXRsZSkpLmpvaW4oJ3wnKX0pXFx9YDtcbiAgICAgICAgZm9yIChsZXQgcmVwZWF0ID0gMDsgcmVwZWF0IDwgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aDsgcmVwZWF0KyspIHtcbiAgICAgICAgICAgIC8vIHJldHVybk9mRG9FeGVjU3ViID0gdGhpcy5kb1JlZmVyZW5jZVN1YnN0aXR1dGlvbihyYW5kb21JdGVtKTtcbiAgICAgICAgICAgIC8vIHJhbmRvbUl0ZW0gPSByZXR1cm5PZkRvRXhlY1N1Yi5tb2RpZmllZFRleHQ7XG4gICAgICAgICAgICBjb25zdCByZWZSZWdleCA9IG5ldyBSZWdFeHAgKHN0cmluZ1JlZlJlZ2V4LCdtZycpO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZlJlZ2V4LmV4ZWMobW9kaWZpZWRUZXh0KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWU6IHN0cmluZyA9IHRoaXMucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChtYXRjaFsxXSwgZmFsc2UpOyBcbiAgICAgICAgICAgICAgICBsaXN0VGl0bGUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgICAgICBtb2RpZmllZFRleHQgPSBtb2RpZmllZFRleHQucmVwbGFjZShsaXN0VGl0bGUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICByZWZSZWdleC5sYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG5ld1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xsRGljZSkge1xuICAgICAgICAgICAgY29uc3QgZGljZVJvbGxlciA9IG5ldyBEaWNlUm9sbGVyKCk7XG4gICAgICAgICAgICBtb2RpZmllZFRleHQgPSBkaWNlUm9sbGVyLnJlcGxhY2VEaWNlUm9sbHMobW9kaWZpZWRUZXh0LCd7JywnfScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IG1vZGlmaWVkVGV4dCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwaWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZTogc3RyaW5nLCB3b3JrT25SZWZlcmVuY2U6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJhbmRvbUl0ZW06IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCByZXR1cm5PZkRvRXhlY1N1YjogTElSUERvUmVmU3ViSW50ZXJmYWNlID0ge1xuICAgICAgICAgICAgbGFzdExpc3RUaXRsZTogbGlzdFRpdGxlLFxuICAgICAgICAgICAgbW9kaWZpZWRUZXh0OiBcIlwiLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjdXJyZW50TGlzdCA9IHRoaXMubGlzdC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LnRpdGxlID09PSBsaXN0VGl0bGUpO1xuICAgICAgICBpZiAoY3VycmVudExpc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmFuZG9tSXRlbSA9IGN1cnJlbnRMaXN0LnBpY2tSYW5kb21JdGVtKCk7XG4gICAgICAgICAgICAvLyBmb3IgKGxldCByZXBlYXQgPSAwOyByZXBlYXQgPCB0aGlzLnJlZmVyZW5jZU1heERlcHRoOyByZXBlYXQrKykge1xuICAgICAgICAgICAgaWYgKHdvcmtPblJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybk9mRG9FeGVjU3ViID0gdGhpcy5kb1JlZmVyZW5jZVN1YnN0aXR1dGlvbihyYW5kb21JdGVtKTtcbiAgICAgICAgICAgICAgICByYW5kb21JdGVtID0gcmV0dXJuT2ZEb0V4ZWNTdWIubW9kaWZpZWRUZXh0O1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdNYWNyb1JlZlJlZ2V4OiBzdHJpbmcgPSBgXFx7KCR7dGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4gZXNjYXBlUmVnZXgoZWxlbWVudC50aXRsZSkpLmpvaW4oJ3wnKX0pXFx9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBtYWNyb1JlZlJlZ2V4ID0gbmV3IFJlZ0V4cCAoc3RyaW5nTWFjcm9SZWZSZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKG1hY3JvUmVmUmVnZXgudGVzdChyYW5kb21JdGVtKSAmJiB3b3JrT25SZWZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVybk9mRG9FeGVjU3ViLmxhc3RMaXN0VGl0bGUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5PZkRvRXhlY1N1Yi5sYXN0TGlzdFRpdGxlID0gbGlzdFRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKHRoaXMubm90ZU5hbWUsIHJldHVybk9mRG9FeGVjU3ViLmxhc3RMaXN0VGl0bGUsICdyZWZMaW1pdCcpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBNYWNybyBkZXB0aCBsaW1pdCByZWFjaGVkIGluIG5vdGUgXCIke3RoaXMubm90ZU5hbWV9XCIgYWZ0ZXIgY2FsbGluZyBcIiR7cmV0dXJuT2ZEb0V4ZWNTdWIubGFzdExpc3RUaXRsZX1cImApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJhbmRvbUl0ZW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZ2V0RXJyb3IoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dzLmdldCgnZXJyb3InKTtcbiAgICB9O1xuXG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBhbGxXYXJuaW5nOiBzdHJpbmdbXSA9IHRoaXMubG9ncy5nZXQoJ3dhcm5pbmcnKTtcbiAgICAgICAgdGhpcy5saXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbFdhcm5pbmcgPSBhbGxXYXJuaW5nLmNvbmNhdChlbGVtZW50LmdldFdhcm5pbmcoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWxsV2FybmluZ1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoO1xuICAgIH07XG59XG5cbmNsYXNzIExJUlBNdWx0aU5vdGUgaW1wbGVtZW50cyBMSVJQTm90ZUludGVyZmFjZSB7XG4gICAgbXVsdGlOb3RlOiBMSVJQTm90ZVtdO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuICAgIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXI7XG4gICAgbG9nczogTElSUExvZztcblxuICAgIGNvbnN0cnVjdG9yIChudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcsIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUgPSBbXTtcbiAgICAgICAgdGhpcy5udWxsVmFsdWUgPSBudWxsVmFsdWU7XG4gICAgICAgIHRoaXMuZXNjYXBlU3RyaW5nID0gZXNjYXBlU3RyaW5nO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZU1heERlcHRoID0gcmVmZXJlbmNlTWF4RGVwdGg7XG4gICAgICAgIHRoaXMubG9ncyA9IG5ldyBMSVJQTG9nKCk7XG4gICAgfTtcblxuICAgIGxvYWRGcm9tTm90ZShub3RlTmFtZTogc3RyaW5nLCBub3RlQ29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnROb3RlID0gbmV3IExJUlBOb3RlKHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZywgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCk7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGN1cnJlbnROb3RlLmxvYWRGcm9tTm90ZShub3RlTmFtZSwgbm90ZUNvbnRlbnQpO1xuICAgICAgICB0aGlzLnB1c2hOb3RlSWZMaXN0Tm90RXhpc3RzKGN1cnJlbnROb3RlKTtcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9O1xuXG4gICAgcHVzaE5vdGVJZkxpc3ROb3RFeGlzdHMobm90ZVRvUHVzaDogTElSUE5vdGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWxsTGlzdFRpdGxlID0gdGhpcy5nZXRMaXN0VGl0bGVzKCk7XG4gICAgICAgIGxldCB1bmljOmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICBub3RlVG9QdXNoLmdldExpc3RUaXRsZXMoKS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChhbGxMaXN0VGl0bGUuY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlVG9QdXNoLm5vdGVOYW1lLCBlbGVtZW50LCAnZHVwSW5Gb2xkZXInLCB0aGlzLmdldE5vdGVOYW1lRnJvbUxpc3RUaXRsZShlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgdW5pYyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVuaWMpIHtcbiAgICAgICAgICAgIHRoaXMubXVsdGlOb3RlLnB1c2gobm90ZVRvUHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuYWRkKG5vdGVUb1B1c2gubG9ncyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1bmljO1xuICAgIH07XG5cbiAgICBnZXROb3RlTmFtZUZyb21MaXN0VGl0bGUobGlzdFRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbm90ZSA9IHRoaXMubXVsdGlOb3RlLmZpbmQoKGVsZW1lbnQpID0+XG4gICAgICAgICAgICBlbGVtZW50LmdldExpc3RUaXRsZXMoKS5jb250YWlucyhsaXN0VGl0bGUpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChub3RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlLm5vdGVOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgXG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW10ge1xuICAgICAgICBsZXQgbGlzdFRpdGxlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxpc3RUaXRsZXMgPSBsaXN0VGl0bGVzLmNvbmNhdChlbGVtZW50LmdldExpc3RUaXRsZXMoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdFRpdGxlcztcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgbGV0IGFsbExpc3RTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbExpc3RTdWdnZXN0aW9uID0gYWxsTGlzdFN1Z2dlc3Rpb24uY29uY2F0KGVsZW1lbnQuZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbExpc3RTdWdnZXN0aW9uO1xuICAgIH07XG5cbiAgICBnZXROb3RlU3VnZ2VzdGlvbih3aXRoSGlkZGVuOiBib29sZWFuID0gZmFsc2UpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBsZXQgbm90ZVN1Z2dlc3Rpb24gPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW4pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBub3RlU3VnZ2VzdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZU5hbWU6IGVsZW1lbnQubm90ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBlbGVtZW50Lm5vdGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGVsZW1lbnQuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm90ZVN1Z2dlc3Rpb247XG4gICAgfTtcblxuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICAgICAgICBsZXQgc3VwZXJOb3RlID0gbmV3IExJUlBOb3RlKHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZywgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCk7XG4gICAgICAgIHN1cGVyTm90ZS5ub3RlTmFtZSA9IHRoaXMuZ2V0Tm90ZU5hbWVGcm9tTGlzdFRpdGxlKGxpc3RUaXRsZSk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc3VwZXJOb3RlLmxpc3QgPSBzdXBlck5vdGUubGlzdC5jb25jYXQoZWxlbWVudC5saXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdXBlck5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpO1xuICAgIH07XG5cbiAgICBnZXRFcnJvcigpOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBhbGxFcnJvcjpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbEVycm9yID0gYWxsRXJyb3IuY29uY2F0KGVsZW1lbnQuZ2V0RXJyb3IoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWxsRXJyb3I7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsV2FybmluZzpzdHJpbmdbXSA9IHRoaXMubG9ncy5nZXQoJ3dhcm5pbmcnKTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxXYXJuaW5nID0gYWxsV2FybmluZy5jb25jYXQoZWxlbWVudC5nZXRXYXJuaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbFdhcm5pbmc7XG4gICAgfTtcblxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlOb3RlLmxlbmd0aDtcbiAgICB9O1xuXG59O1xuXG5pbnRlcmZhY2UgTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2Uge1xuICAgIG5vdGVOYW1lOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5jbGFzcyBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgIGxpc3Q6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saXN0ID0gW107XG4gICAgfTtcblxuICAgIHB1c2ggKGVsZW1lbnQ6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGlzdC5wdXNoKGVsZW1lbnQpO1xuICAgIH07XG5cbiAgICBmaWx0ZXJCeU5vdGVOYW1lKG5vdGVOYW1lOiBzdHJpbmcpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBmaWx0ZXJMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5ub3RlTmFtZSA9PT0gbm90ZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJMaXN0LnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmlsdGVyTGlzdDtcbiAgICB9O1xuXG4gICAgZmlsdGVyKGNhbGxiYWNrOiAoZWxlbWVudDogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UsIGluZGV4PzogbnVtYmVyLCBhcnJheT86IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10pID0+IGJvb2xlYW4pOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0KCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sodGhpcy5saXN0W2ldLCBpLCB0aGlzLmxpc3QpKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRMaXN0LnB1c2godGhpcy5saXN0W2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRMaXN0O1xuICAgIH07XG5cbiAgICBjb25jYXQob3RoZXJMaXN0OiBMSVJQU3VnZ2VzdGlvbkxpc3QpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICBuZXdMaXN0Lmxpc3QgPSB0aGlzLmxpc3QuY29uY2F0KG90aGVyTGlzdC5saXN0KTtcbiAgICAgICAgcmV0dXJuIG5ld0xpc3Q7XG4gICAgfTtcblxuICAgIGdldCBsZW5ndGggKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExJUlBTdWdnZXN0TW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8TElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U+IHtcbiAgICBpdGVtczogTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgIGNhbGxiYWNrOiAodmFsdWU6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlKSA9PiB2b2lkO1xuICBcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaXRlbXM6IExJUlBTdWdnZXN0aW9uTGlzdCwgY2FsbGJhY2s6ICh2YWx1ZTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UpID0+IHZvaWQpIHtcbiAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKS5saXN0OyAvLyBSZXRvdXJuZSBsZSB0YWJsZWF1IGBsaXN0YCBkZSBMSVJQU3VnZ2VzdGlvbkxpc3RcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGl0ZW06IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBlbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogaXRlbS50aXRsZSB9KTtcbiAgICAgICAgbGV0IG1lc3NhZ2U6c3RyaW5nID0gaXRlbS5kZXNjcmlwdGlvblxuICAgICAgICAvLyBpZiAoaXRlbS5ub3RlTmFtZSAhPT0gaXRlbS50aXRsZSkge1xuICAgICAgICAvLyAgICAgaWYgKGl0ZW0uZGVzY3JpcHRpb24gIT09ICcnKSB7XG4gICAgICAgIC8vICAgICAgICAgbWVzc2FnZSA9IGAke2l0ZW0uZGVzY3JpcHRpb259XFxuKGZyb20gOiAke2l0ZW0ubm90ZU5hbWV9KWA7XG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2UgPSBgKGZyb20gOiAke2l0ZW0ubm90ZU5hbWV9KWA7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH07XG4gICAgICAgIGVsLmNyZWF0ZUVsKCdzbWFsbCcsIHt0ZXh0OiBtZXNzYWdlfSk7XG4gICAgICB9XG4gIFxuICAgICAgb25DaG9vc2VTdWdnZXN0aW9uKGl0ZW06IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soaXRlbSk7XG4gICAgICB9fVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0SXRlbVJhbmRvbVBpY2tlciBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IExJUlBQbHVnaW5TZXR0aW5ncztcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2xpc3QtdHJlZScsICdQaWNrIHJhbmRvbSBsaXN0IGl0ZW0nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRvVGhlSm9iKCdub3RlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2luc2VydC1yYW5kb20taXRlbScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IHJhbmRvbSBpdGVtIGZyb20gbGlzdCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9UaGVKb2IoJ25vdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LXNldHRpbmctaXRlbScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IGxpc3Qgc2V0dGluZ3MgdmFsdWVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRTdHJpbmcoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LXJlZmVyZW5jZS1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgbGlzdCByZWZlcmVuY2UnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvVGhlSm9iKCdyZWZlcmVuY2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBMSVJQU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZG9UaGVKb2IoYWN0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWxsTElSUEZpbGVzID0gdGhpcy5nZXRMSVJQRmlsZXModGhpcy5zZXR0aW5ncy5ub3RlUGF0aCk7XG4gICAgICAgIGxldCBjdXJyZW50TElSUCA9IG5ldyBMSVJQTXVsdGlOb3RlKHRoaXMuc2V0dGluZ3MubnVsbFZhbHVlLCB0aGlzLnNldHRpbmdzLmVzY2FwZVZhbHVlLCB0aGlzLnNldHRpbmdzLm1heE1hY3JvRGVwdGgpO1xuICAgICAgICBsZXQgbG9hZFdpdGhvdXRFcnJvcjpib29sZWFuID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGNvbnN0IGN1cnJlbnRGaWxlIG9mIGFsbExJUlBGaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEZTT2JqZWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN1cnJlbnRGaWxlKTtcbiAgICAgICAgICAgIGxldCBjb250ZW50OnN0cmluZyA9ICcnO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGU09iamVjdCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoY3VycmVudEZTT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBsb2FkV2l0aG91dEVycm9yID0gIGN1cnJlbnRMSVJQLmxvYWRGcm9tTm90ZShjdXJyZW50RlNPYmplY3QucGF0aC5zbGljZSgwLCAtMyksIGNvbnRlbnQpICYmIGxvYWRXaXRob3V0RXJyb3I7XG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIH07XG4gICAgICAgIGlmICghbG9hZFdpdGhvdXRFcnJvcikge1xuICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0RXJyb3IoKS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY3VycmVudExJUlAubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dXYXJuaW5nKSB7XG4gICAgICAgICAgICBjdXJyZW50TElSUC5nZXRXYXJuaW5nKCkuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdXJyZW50TElSUC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIDogY2hlY2sgc2V0dGluZ3MgXCJQYXRoIFwiIGluIHBsdWdpbiBMaXN0IEl0ZW0gUmFuZG9tIFBpY2tlciAhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudExJUlAubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oYWN0aW9uID09PSAncmVmZXJlbmNlJyksIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ25vdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29ya1dpdGhUaXRsZShjdXJyZW50TElSUCwgaXRlbS50aXRsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRTdHJpbmcoYHske2l0ZW0udGl0bGV9fWApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IExJUlBTdWdnZXN0TW9kYWwodGhpcy5hcHAsIGN1cnJlbnRMSVJQLmdldE5vdGVTdWdnZXN0aW9uKGFjdGlvbiA9PT0gJ3JlZmVyZW5jZScpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oYWN0aW9uID09PSAncmVmZXJlbmNlJykuZmlsdGVyQnlOb3RlTmFtZShpdGVtLm5vdGVOYW1lKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya1dpdGhUaXRsZShjdXJyZW50TElSUCwgaXRlbS50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKGB7JHtpdGVtLnRpdGxlfX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXRMaXN0U3VnZ2VzdGlvbihhY3Rpb24gPT09ICdyZWZlcmVuY2UnKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ25vdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRTdHJpbmcoYHske2l0ZW0udGl0bGV9fWApO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZXRMSVJQRmlsZXMgKG5vdGVQYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBhbGxWYXVsdEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgbGV0IGZpbGVzSW5Ob3RlUGF0aDpzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBub3RlUGF0aFJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7bm90ZVBhdGh9KC8uKyk/XFwubWQkYCk7XG4gICAgICAgIGFsbFZhdWx0RmlsZXMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAobm90ZVBhdGhSZWdleC50ZXN0KGVsZW1lbnQucGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlc0luTm90ZVBhdGgucHVzaChlbGVtZW50LnBhdGgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmaWxlc0luTm90ZVBhdGg7XG4gICAgfTtcblxuICAgIHdvcmtXaXRoVGl0bGUoTm90ZTogTElSUE11bHRpTm90ZSwgbGlzdFRpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvblJlZ2V4OnN0cmluZyA9IGBeJHt0aGlzLnNldHRpbmdzLnNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbn0kYDtcbiAgICAgICAgICAgIGNvbnN0IG5vdGljZVJlZ2V4ID0gbmV3IFJlZ0V4cChzZWxlY3Rpb25Gb3JOb3RpZmljYXRpb25SZWdleCk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblxuICAgICAgICAgICAgaWYgKG5vdGljZVJlZ2V4LnRlc3Qoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoTm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSkpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nVG9JbnNlcnQ6IHN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdEluc2VydFJlZ0V4ID0gL14oXFxkKykoLiopL2dtO1xuICAgICAgICAgICAgICAgIGxldCByZWdFeEV4ZWN1dGlvbjtcbiAgICAgICAgICAgICAgICBsZXQgcmVwZWF0OiBudW1iZXI7XG4gICAgICAgICAgICAgICAgaWYgKChyZWdFeEV4ZWN1dGlvbiA9IHJlcGVhdEluc2VydFJlZ0V4LmV4ZWMoc2VsZWN0aW9uKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwZWF0ID0gTnVtYmVyKHJlZ0V4RXhlY3V0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsaW1pdGVyID0gc2VsZWN0aW9uLnJlcGxhY2UoL15cXGQrLywgJycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheVN0cmluZ1RvaW5zZXJ0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVN0cmluZ1RvaW5zZXJ0LnB1c2goTm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1RvSW5zZXJ0ID0gYXJyYXlTdHJpbmdUb2luc2VydC5qb2luKGRlbGltaXRlcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVG9JbnNlcnQgPSBOb3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oc3RyaW5nVG9JbnNlcnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgTWFya2Rvd24gZWRpdG9yIGZvdW5kLlwiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgaW5zZXJ0U3RyaW5nKHN0cmluZ1RvSW5zZXJ0OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBhY3RpdmVWaWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHN0cmluZ1RvSW5zZXJ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgTWFya2Rvd24gZWRpdG9yIGZvdW5kLlwiKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxufVxuXG5jbGFzcyBMSVJQU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogTGlzdEl0ZW1SYW5kb21QaWNrZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMaXN0SXRlbVJhbmRvbVBpY2tlcikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTm90ZSBzZXR0aW5nJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdOb3RlIFBhdGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBwYXRoIGFuZCBmaWxlbmFtZSBvZiB0aGUgbm90ZSB0aGF0IGNvbnRhaW5zIHRoZSBsaXN0cyB0byBiZSB1c2VkLiBFeGVtcGxlIDogXCJGb2xkZXIvTm90ZVwiLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHRoZSBwYXRoIHRvIHlvdXIgbm90ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVQYXRoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSW50ZXJmYWNlIHNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IG5vdGUgc2VsZWN0b3InKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHBhdGggaXMgYSBmb2xkZXInKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVTZWxlY3RvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyB3YXJuaW5nJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEaXNwbGF5IHRoZSB3YXJuaW5ncyBvZiBub3RlcyBhbmQgbGlzdHMsIGlmIGFueS4gV2FybmluZ3MgZm9yIG1hY3JvIGRlcHRoIGxpbWl0IHJlYWNoZWQgYXJlIGFsd2F5cyBkaXNwbGF5ZWQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2FybmluZyk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2FybmluZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTGlzdCBzZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTnVsbCB2YWx1ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgdGhlIGZpcnN0IGxpbmUgb2YgYW4gaXRlbSBoYXMgdGhpcyB2YWx1ZSwgdGhlIGxpbmUgaXMgZmx1c2guJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdmFsdWUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5udWxsVmFsdWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5udWxsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRXNjYXBlIHZhbHVlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiB5b3Ugd2FudCBzb21lIGhlYWRpbiBvbmUgb3IgZmlyc3QgbGV2ZWwgbGlzdCBpdGVtIGluIHlvdXIgaXRlbSwgeW91IGNvdWxkIGVzY2FwZSB0aGVtIHdpdGggdGhlc2UgdmFsdWUnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB2YWx1ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZVZhbHVlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXNjYXBlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2VsZWN0aW9uIHNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTZWxlY3Rpb24gdmFsdWUgZm9yIG5vdGlmaWNhdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgdGhlIHRleHQgc2VsZWN0ZWQgaGFzIHRoaXMgdmFsdWUsIHRoZSBpdGVtIGlzIG5vdCBpbnNlcnRlZCwgYnV0IG5vdGlmaWVkICEnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB2YWx1ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWxldGUgc2VsZWN0aW9uIHZhbHVlIGZvciBub3RpZmljYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHNldCwgdGhlIHNlbGVjdGVkIHZhbHVlIGZvciBub3RpZmljYXRpb24gaXMgZGVsZXRlZC4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUZWNobmljYWwgc2V0dGluZ3MnIH0pO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTWFjcm8gZGVwdGggbGltaXQnKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdNYWNybyByZWN1cnNpb24gbGltaXQ6IGhvdyBtYW55IG5lc3RlZCBtYWNybyBjYWxscyBhcmUgYWxsb3dlZC4gWmVybyBwcmV2ZW50cyBuZXN0ZWQgbWFjcm9zIGZyb20gYmVpbmcgcmVzb2x2ZWQuJylcbiAgICAgICAgICAgICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heE1hY3JvRGVwdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEwLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heE1hY3JvRGVwdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTBHO0FBRTFHLFNBQVMsWUFBZSxTQUFjLFdBQTZEO0FBQy9GLFFBQU0sVUFBb0IsQ0FBQztBQUMzQixVQUFRLFFBQVEsQ0FBQyxTQUFTLFVBQVU7QUFDbEMsUUFBSSxVQUFVLFNBQVMsS0FBSyxHQUFHO0FBQzdCLGNBQVEsS0FBSyxLQUFLO0FBQUEsSUFDcEI7QUFBQSxFQUNGLENBQUM7QUFDRCxTQUFPO0FBQ1g7QUFFQSxTQUFTLFlBQVksZ0JBQWdDO0FBQ2pELFNBQU8sZUFBZSxRQUFRLHVCQUF1QixNQUFNO0FBQy9EO0FBWUEsSUFBTSxtQkFBdUM7QUFBQSxFQUN6QyxVQUFVO0FBQUEsRUFDVixhQUFhO0FBQUEsRUFDYixlQUFlO0FBQUEsRUFDZiwwQkFBMEI7QUFBQSxFQUMxQixnQ0FBZ0M7QUFBQSxFQUNoQyxXQUFXO0FBQUEsRUFDWCxhQUFhO0FBQUEsRUFDYixrQkFBa0I7QUFDdEI7QUFHQSxJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQUNiLFVBQVUsWUFBNkI7QUFDckMsVUFBTSxZQUFZO0FBQ2xCLFdB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
