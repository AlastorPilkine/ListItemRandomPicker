/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
function escapeRegex(stringToEscape) {
  return stringToEscape.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
var DEFAULT_SETTINGS = {
  notePath: "Note or folder path",
  showWarning: true,
  maxReferenceDepth: 1,
  selectionForNotification: "!",
  deleteSelectionForNotification: false,
  nullValue: "null",
  escapeValue: "//",
  showNoteSelector: true
};
var DiceRoller = class {
  checkDice(diceString) {
    const diceRegex = /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i;
    return diceRegex.test(diceString);
  }
  rollDice(diceString) {
    if (!this.checkDice(diceString)) {
      throw new Error("Syntaxe de lancer de d\xE9s invalide.");
    }
    const [_, countStr, sidesStr, modifierStr, explodeStr, keepStr, keepLowStr] = diceString.match(
      /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i
    );
    const count = parseInt(countStr || "1");
    const sides = parseInt(sidesStr);
    const modifier = parseInt(modifierStr || "0");
    const explode = !!explodeStr;
    const keep = keepStr ? parseInt(keepStr.slice(1)) : void 0;
    const keepLow = keepLowStr ? parseInt(keepLowStr.slice(2)) : void 0;
    let results = [];
    for (let i = 0; i < count; i++) {
      let result = Math.floor(Math.random() * sides) + 1;
      results.push(result);
      if (explode) {
        while (result === sides) {
          result = Math.floor(Math.random() * sides) + 1;
          results.push(result);
        }
      }
    }
    if (keep) {
      results.sort((a, b) => b - a);
      results = results.slice(0, keep);
    } else if (keepLow) {
      results.sort((a, b) => a - b);
      results = results.slice(0, keepLow);
    }
    const sum = results.reduce((acc, val) => acc + val, 0);
    return sum + modifier;
  }
  /**
   * Remplace les lancers de dés encadrés par des délimiteurs dans une chaîne multi-lignes.
   *
   * @param {string} text Le texte multi-lignes contenant les lancers de dés.
   * @param {string} startDelimiter Le délimiteur de début des lancers de dés.
   * @param {string} endDelimiter Le délimiteur de fin des lancers de dés.
   * @returns {string} Le texte avec les lancers de dés remplacés par leurs résultats.
   */
  replaceDiceRolls(text, startDelimiter, endDelimiter) {
    const regex = new RegExp(
      `${this.escapeRegExp(startDelimiter)}([^${this.escapeRegExp(
        startDelimiter + endDelimiter
      )}]+)${this.escapeRegExp(endDelimiter)}`,
      "g"
    );
    return text.replace(regex, (match, diceString) => {
      try {
        const result = this.rollDice(diceString);
        return result.toString();
      } catch (error) {
        return match;
      }
    });
  }
  /**
   * Échappe les caractères spéciaux pour une utilisation dans une expression régulière.
   *
   * @param {string} string La chaîne de caractères à échapper.
   * @returns {string} La chaîne de caractères échappée.
   */
  escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }
};
var LIRPLogStatusValues = [
  "dupInNote",
  "dupInFolder",
  "emptyList",
  "emptyNote",
  "refLimit",
  "subRefLimit",
  "pathSetting",
  "folderAndFile",
  "showItem",
  "noActiveView"
];
var LIRPLogElement = class {
  static getErrorStatus() {
    return ["dupInFolder", "pathSetting"];
  }
  static getWarningStatus() {
    let warningStatus = [];
    LIRPLogStatusValues.map((element) => {
      if (!LIRPLogElement.getErrorStatus().contains(element) && !LIRPLogElement.getWarningStatus().contains(element)) {
        warningStatus.push(element);
      }
      ;
    });
    return warningStatus;
  }
  static getInfoStatus() {
    return ["showItem", "refLimit", "subRefLimit"];
  }
  getType() {
    const errors = ["pathSetting", "dupInFolder"];
    if (errors.contains(this.status)) {
      return "error";
    } else {
      return "warning";
    }
    ;
  }
  constructor(father, child, status, complement = "") {
    this.father = father;
    this.child = child;
    this.status = status;
    this.complement = complement;
  }
  toString() {
    return `${this.getType()} / ${this.father} / ${this.child} / ${this.status} / ${this.complement}`;
  }
};
var LIRPLog = class {
  constructor() {
    this.logs = [];
  }
  push(father, child, status, complement = "") {
    this.logs.push(new LIRPLogElement(father, child, status, complement));
  }
  add(logs) {
    this.logs = this.logs.concat(logs.logs);
  }
  get(type) {
    const logsForType = this.logs.filter(
      (element) => element.getType() === type
    );
    let getArray = [];
    logsForType.map((element) => {
      getArray.push(element.toString());
    });
    return getArray;
  }
  flush() {
    this.logs = [];
  }
};
var LIRPList = class {
  static getSettingString(value = "") {
    if (value === "") {
      return "- [ ] Hide this list\n";
    } else {
      switch (value) {
        case "hide":
          return "^- \\[[x ]\\] Hide this list$";
        case "hide_ticked":
          return "^- \\[x\\] Hide this list$";
      }
      ;
    }
    ;
  }
  constructor(noteName, lines, nullValue, escapeString) {
    this.title = "";
    this.description = "";
    this.hidden = false;
    this.items = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    lines.shift();
    const listBeginItemRegex = /^(-|\d+\.) (?!\[) *(.+)$/;
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.logs.push(noteName, this.title, "emptyList");
      this.hidden = true;
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      let mdDescription = cleanLines.slice(0, listBeginIndexes[0]);
      if (mdDescription[0] === "") {
        mdDescription.shift();
      }
      let isHidden = false;
      const hideRegexTicked = new RegExp(LIRPList.getSettingString("hide_ticked"));
      const hideRegex = new RegExp(LIRPList.getSettingString("hide"));
      mdDescription.map((element) => {
        if (hideRegexTicked.test(element)) {
          isHidden = true;
          this.hidden = isHidden;
        }
        ;
      });
      mdDescription = mdDescription.filter((element) => !hideRegex.test(element));
      this.description = mdDescription.join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    let item;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      item = cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]);
      this.pushItemBasedOnWeight(item);
    }
    item = cleanLines.slice(listBeginIndexes[listBeginCount - 1]);
    if (item.at(-1) === "") {
      item.pop();
    }
    this.pushItemBasedOnWeight(item);
  }
  flushLogs() {
    this.logs.flush();
  }
  pushItemBasedOnWeight(item) {
    const ItemWithWeightRegEx = /^\((\d+)\)\s+(.+)$/;
    let regExExecution;
    let repeat;
    if ((regExExecution = ItemWithWeightRegEx.exec(item[0])) !== null) {
      repeat = Number(regExExecution[1]);
      item[0] = regExExecution[2];
    } else {
      repeat = 1;
    }
    if (item[0] === this.nullValue) {
      if (item.length === 1) {
        item[0] = "";
      } else {
        item.shift();
      }
      ;
    }
    ;
    const stringRegex = `^ *${this.escapeString}(.*)`;
    const escapeStringRegEx = new RegExp(stringRegex, "gm");
    const escapeItem = item.map((element) => {
      return element.replace(escapeStringRegEx, "$1");
    });
    const stringItem = escapeItem.join("\n");
    for (let i = 0; i < repeat; i++) {
      this.items.push(stringItem);
    }
  }
  getSuggestion(noteName) {
    const suggestion = {
      noteName,
      title: this.title,
      description: this.description.split("\n")[0]
    };
    return suggestion;
  }
  notHidden() {
    return !this.hidden;
  }
  pickRandomItem() {
    let randomItem = "";
    if (this.items.length > 0) {
      randomItem = this.items[Math.floor(Math.random() * this.items.length)];
    }
    return randomItem;
  }
  getLogs() {
    return this.logs;
  }
  getWarning() {
    return this.logs.get("warning");
  }
  get length() {
    return this.items.length;
  }
};
var LIRPNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.noteName = "";
    this.description = "";
    this.list = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.rollDice = true;
    this.referenceMaxDepth = referenceMaxDepth;
  }
  getListTitles() {
    let listTitles = [];
    this.list.map((element) => {
      listTitles.push(element.title);
    });
    return listTitles;
  }
  loadFromNote(noteName, noteContent) {
    this.noteName = noteName;
    const lines = noteContent.split("\n");
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.logs.push(noteName, "", "emptyNote");
      return false;
    }
    if (headingIndexes[0] !== 0) {
      this.description = lines.slice(0, headingIndexes[0]).join("\n");
    }
    const headingCount = headingIndexes.length;
    let pushSuccess = true;
    for (let currentIndex = 0; currentIndex < headingCount - 1; currentIndex++) {
      pushSuccess = this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1]), this.nullValue, this.escapeString)) && pushSuccess;
    }
    ;
    pushSuccess = this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[headingCount - 1]), this.nullValue, this.escapeString)) && pushSuccess;
    return pushSuccess;
  }
  pushListIfNotExists(listToPush) {
    if (this.getListTitles().contains(listToPush.title)) {
      this.logs.push(this.noteName, listToPush.title, "dupInNote");
      return false;
    } else {
      this.list.push(listToPush);
      return true;
    }
    ;
  }
  getListSuggestion(withHidden = false) {
    const noteSuggestion = new LIRPSuggestionList();
    this.list.forEach((element) => {
      if (withHidden || element.notHidden()) {
        noteSuggestion.push(element.getSuggestion(this.noteName));
      }
    });
    return noteSuggestion;
  }
  doReferenceSubstitution(text) {
    let match;
    let modifiedText = text;
    let listTitle = "";
    const stringRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    for (let repeat = 0; repeat < this.referenceMaxDepth; repeat++) {
      const refRegex = new RegExp(stringRefRegex, "mg");
      while ((match = refRegex.exec(modifiedText)) !== null) {
        let newValue = this.pickRandomItemFromList(match[1], false);
        listTitle = match[0];
        modifiedText = modifiedText.replace(listTitle, newValue);
        refRegex.lastIndex = match.index + newValue.length;
      }
    }
    if (this.rollDice) {
      const diceRoller = new DiceRoller();
      modifiedText = diceRoller.replaceDiceRolls(modifiedText, "{", "}");
    }
    return {
      lastListTitle: listTitle,
      modifiedText
    };
  }
  flushLogs() {
    this.logs.flush();
    this.list.map((element) => {
      element.flushLogs();
    });
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let randomItem = "";
    let returnOfDoExecSub = {
      lastListTitle: listTitle,
      modifiedText: ""
    };
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      randomItem = currentList.pickRandomItem();
      if (workOnReference) {
        returnOfDoExecSub = this.doReferenceSubstitution(randomItem);
        randomItem = returnOfDoExecSub.modifiedText;
        const stringRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
        const RefRegex = new RegExp(stringRefRegex);
        if (RefRegex.test(randomItem) && workOnReference) {
          if (returnOfDoExecSub.lastListTitle === "") {
            returnOfDoExecSub.lastListTitle = listTitle;
          }
          this.logs.push(this.noteName, returnOfDoExecSub.lastListTitle, "refLimit");
        }
        ;
      }
      ;
      return randomItem;
    } else {
      return "";
    }
    ;
  }
  getError() {
    return this.logs.get("error");
  }
  getLogs() {
    let allLogs = new LIRPLog();
    allLogs.add(this.logs);
    this.list.map((element) => {
      allLogs.add(element.getLogs());
    });
    return allLogs;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.list.forEach((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPMultiNote = class {
  constructor(nullValue, escapeString, referenceMaxDepth) {
    this.multiNote = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.referenceMaxDepth = referenceMaxDepth;
    this.logs = new LIRPLog();
  }
  loadFromNote(noteName, noteContent) {
    const currentNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    let status = currentNote.loadFromNote(noteName, noteContent);
    status = this.pushNoteIfListNotExists(currentNote) && status;
    return status;
  }
  pushNoteIfListNotExists(noteToPush) {
    const allListTitle = this.getListTitles();
    let unic = true;
    noteToPush.getListTitles().map((element) => {
      if (allListTitle.contains(element)) {
        this.logs.push(noteToPush.noteName, element, "dupInFolder", this.getNoteNameFromListTitle(element));
        unic = false;
      }
    });
    if (unic) {
      this.multiNote.push(noteToPush);
    } else {
      this.logs.add(noteToPush.logs);
    }
    ;
    return unic;
  }
  getNoteNameFromListTitle(listTitle) {
    let note = this.multiNote.find(
      (element) => element.getListTitles().contains(listTitle)
    );
    if (note !== void 0) {
      return note.noteName;
    } else {
      return "";
    }
    ;
  }
  getListTitles() {
    let listTitles = [];
    this.multiNote.map((element) => {
      listTitles = listTitles.concat(element.getListTitles());
    });
    return listTitles;
  }
  getListSuggestion(withHidden = false) {
    let allListSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      allListSuggestion = allListSuggestion.concat(element.getListSuggestion(withHidden));
    });
    return allListSuggestion;
  }
  getNoteSuggestion(withHidden = false) {
    let noteSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      if (element.getListSuggestion(withHidden).length > 0) {
        noteSuggestion.push({
          noteName: element.noteName,
          title: element.noteName,
          description: element.description.split("\n")[0]
        });
      }
      ;
    });
    return noteSuggestion;
  }
  doReferenceSubstitution(text) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    let returnOfDoExecSub = {
      lastListTitle: "Reference substitution in selection",
      modifiedText: ""
    };
    returnOfDoExecSub = superNote.doReferenceSubstitution(text);
    let listTitle = "";
    const stringRefRegex = `{(${superNote.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    const refRegex = new RegExp(stringRefRegex);
    if (refRegex.test(returnOfDoExecSub.modifiedText)) {
      this.logs.push("", "", "subRefLimit");
    }
    ;
    return returnOfDoExecSub.modifiedText;
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.referenceMaxDepth);
    superNote.noteName = this.getNoteNameFromListTitle(listTitle);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    const randomItem = superNote.pickRandomItemFromList(listTitle);
    this.logs.add(superNote.getLogs());
    return randomItem;
  }
  flushLogs() {
    this.logs.flush();
    this.multiNote.map((element) => {
      element.flushLogs();
    });
  }
  getError() {
    let allError = [];
    this.multiNote.map((element) => {
      allError = allError.concat(element.getError());
    });
    return allError;
  }
  getLogs() {
    let allLogs = new LIRPLog();
    allLogs.add(this.logs);
    this.multiNote.map((element) => {
      allLogs.add(element.getLogs());
    });
    return allLogs;
  }
  hasErrors() {
    const allLogs = this.getLogs();
    return allLogs.get("error").length !== 0;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.multiNote.map((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.multiNote.length;
  }
};
var LIRPSuggestionList = class {
  constructor() {
    this.list = [];
  }
  push(element) {
    this.list.push(element);
  }
  filterByNoteName(noteName) {
    const filterList = new LIRPSuggestionList();
    this.list.map((element) => {
      if (element.noteName === noteName) {
        filterList.push(element);
      }
    });
    return filterList;
  }
  filter(callback) {
    const filteredList = new LIRPSuggestionList();
    for (let i = 0; i < this.list.length; i++) {
      if (callback(this.list[i], i, this.list)) {
        filteredList.push(this.list[i]);
      }
    }
    return filteredList;
  }
  concat(otherList) {
    const newList = new LIRPSuggestionList();
    newList.list = this.list.concat(otherList.list);
    return newList;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items.filter(
      (item) => item.title.toLowerCase().includes(query.toLowerCase())
    ).list;
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    let message = item.description;
    el.createEl("small", { text: message });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.logs = new LIRPLog();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.prepareAction("note");
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.prepareAction("note");
      }
    });
    this.addCommand({
      id: "insert-setting-item",
      name: "Insert list settings values",
      callback: () => {
        this.insertString(LIRPList.getSettingString());
      }
    });
    this.addCommand({
      id: "insert-reference-item",
      name: "Insert list reference",
      callback: () => {
        this.prepareAction("reference");
      }
    });
    this.addCommand({
      id: "replace-reference-item",
      name: "Replace references in selection",
      callback: () => {
        this.prepareAction("doRefSubstitution");
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  getLIRPFiles(notePath) {
    let allVaultFiles = this.app.vault.getMarkdownFiles();
    let filesInNotePath = [];
    let foundAFile = false;
    const noteFileName = `${notePath}.md`;
    const notePathRegex = new RegExp(`^${notePath}/.+.md$`);
    allVaultFiles.map((element) => {
      if (notePathRegex.test(element.path)) {
        filesInNotePath.push(element.path);
      } else if (element.path === noteFileName) {
        foundAFile = true;
      }
      ;
    });
    if (filesInNotePath.length === 0 && foundAFile) {
      filesInNotePath.push(noteFileName);
    } else if (foundAFile && filesInNotePath.length !== 0) {
      this.logs.push("ListItemRandmPicker", "getLIRPFiles", "folderAndFile");
    }
    return filesInNotePath;
  }
  async loadLIRPFiles() {
    const allLIRPFiles = this.getLIRPFiles(this.settings.notePath);
    let currentLIRP = new LIRPMultiNote(this.settings.nullValue, this.settings.escapeValue, this.settings.maxReferenceDepth);
    for (const currentFile of allLIRPFiles) {
      const currentFSObject = this.app.vault.getAbstractFileByPath(currentFile);
      let content = "";
      if (currentFSObject instanceof import_obsidian.TFile) {
        content = await this.app.vault.cachedRead(currentFSObject);
        currentLIRP.loadFromNote(currentFSObject.path.slice(0, -3), content);
      }
      ;
    }
    ;
    return currentLIRP;
  }
  async prepareAction(action) {
    const currentLIRP = await this.loadLIRPFiles();
    if (currentLIRP.length === 0) {
      this.logs.push("ListItemRandomPicker", "loadLIRPFiles", "pathSetting");
    }
    ;
    if (!currentLIRP.hasErrors() && currentLIRP.length !== 0) {
      if (action === "doRefSubstitution") {
        this.doReferenceSubstitution(currentLIRP);
      } else {
        if (currentLIRP.length === 1 || !this.settings.showNoteSelector) {
          new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
            if (action === "note") {
              this.workWithTitle(currentLIRP, item.title);
            } else {
              this.insertString(`{${item.title}}`);
            }
            ;
          }).open();
        } else {
          new LIRPSuggestModal(this.app, currentLIRP.getNoteSuggestion(action === "reference"), (item) => {
            new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference").filterByNoteName(item.noteName), (item2) => {
              if (action === "note") {
                this.workWithTitle(currentLIRP, item2.title);
              } else {
                this.insertString(`{${item2.title}}`);
              }
              ;
            }).open();
          }).open();
        }
        ;
      }
      ;
    }
    this.doLogManagement(currentLIRP.getLogs());
    this.logs.flush();
    currentLIRP.flushLogs();
  }
  doLogManagement(multiNoteLogs) {
    const allLogs = this.logs;
    if (multiNoteLogs !== void 0) {
      allLogs.add(multiNoteLogs);
      multiNoteLogs.flush();
    }
    ;
    const errorMsg = [];
    const warningMsg = [];
    const infoMsg = [];
    allLogs.logs.map((element) => {
      switch (element.status) {
        case "dupInNote":
          warningMsg.push(`List "${element.child}" is duplicate in note "${element.father}". List is ignored`);
          break;
        case "dupInFolder":
          errorMsg.push(`ERROR : List "${element.child}" exists in two notes, "${element.father}" and "${element.complement}", make correction !`);
          break;
        case "emptyList":
          warningMsg.push(`List "${element.child}" is empty in "${element.father}"`);
          break;
        case "emptyNote":
          warningMsg.push(`"${element.child}" is empty`);
          break;
        case "refLimit":
          warningMsg.push(`Reference depth limit reach with list "${element.child}" in note "${element.father}"`);
          break;
        case "pathSetting":
          errorMsg.push(`ERROR : verify path in plugin settings`);
          break;
        case "folderAndFile":
          warningMsg.push(`A note with the same name as the folder in settings gets ignored.`);
          break;
        case "showItem":
          infoMsg.push(`${element.complement}`);
          break;
        case "noActiveView":
          warningMsg.push(`No note in edition mode to do this action`);
          break;
      }
      ;
      errorMsg.map((element2) => new import_obsidian.Notice(element2));
      if (this.settings.showWarning) {
        warningMsg.map((element2) => new import_obsidian.Notice(element2));
      }
      ;
      infoMsg.map((element2) => new import_obsidian.Notice(element2));
    });
    this.logs.flush();
  }
  workWithTitle(note, listTitle) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selectionForNotificationRegex = `^${this.settings.selectionForNotification}$`;
      const noticeRegex = new RegExp(selectionForNotificationRegex);
      const selection = activeView.editor.getSelection();
      if (noticeRegex.test(selection)) {
        this.logs.push("", "", "showItem", note.pickRandomItemFromList(listTitle));
        if (this.settings.deleteSelectionForNotification) {
          activeView.editor.replaceSelection("");
        }
      } else {
        let stringToInsert = "";
        const repeatInsertRegEx = /^(\d+)(.*)/gm;
        let regExExecution;
        let repeat;
        if ((regExExecution = repeatInsertRegEx.exec(selection)) !== null) {
          const repeat2 = Number(regExExecution[1]);
          const delimiter = selection.replace(/^\d+/, "");
          const arrayStringToinsert = [];
          for (let i = 0; i < repeat2; i++) {
            arrayStringToinsert.push(note.pickRandomItemFromList(listTitle));
          }
          stringToInsert = arrayStringToinsert.join(delimiter);
        } else {
          stringToInsert = note.pickRandomItemFromList(listTitle);
        }
        activeView.editor.replaceSelection(stringToInsert);
      }
      ;
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
    this.doLogManagement(note.getLogs());
  }
  doReferenceSubstitution(multiNote) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selection = activeView.editor.getSelection();
      activeView.editor.replaceSelection(multiNote.doReferenceSubstitution(selection));
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
  }
  insertString(stringToInsert) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      activeView.editor.replaceSelection(stringToInsert);
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
    this.doLogManagement();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Path").setDesc('The path of a note or folder. Example: "Folder/Note" or "Folder".').addText(
      (text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
        this.plugin.settings.notePath = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Specific values" });
    new import_obsidian.Setting(containerEl).setName("Null value").setDesc("If the first line of a list item has this value, that line is ignored. This allows you to have probabilities of getting no result. Usage example: having, or not having, a particle in a noun.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.nullValue).onChange(async (value) => {
        this.plugin.settings.nullValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Escape value").setDesc("To include heading one elements or first-level list items in your random list, escape them with these values. Exemple : // # Heading").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.escapeValue).onChange(async (value) => {
        this.plugin.settings.escapeValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Selection value for notification").setDesc("If the selected text has this value, the item is not inserted; instead, a notification is shown.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.selectionForNotification).onChange(async (value) => {
        this.plugin.settings.selectionForNotification = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Behavior" });
    new import_obsidian.Setting(containerEl).setName("Show note selector").setDesc("If path is a folder containing at least two notes, a selector will allow you to choose the note; otherwise, all lists will be offered to you.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteSelector);
      toggle.onChange(async (value) => {
        this.plugin.settings.showNoteSelector = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Show warning").setDesc("Are warnings displayed as notifications ?").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showWarning);
      toggle.onChange(async (value) => {
        this.plugin.settings.showWarning = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Delete selection value on notification").setDesc("If this setting is on, the selected notification value is removed after it's used.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deleteSelectionForNotification);
      toggle.onChange(async (value) => {
        this.plugin.settings.deleteSelectionForNotification = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reference depth limit").setDesc("Reference recursion limit: the maximum number of nested reference calls allowed. Zero disables reference resolution.").addSlider(
      (slider) => slider.setValue(this.plugin.settings.maxReferenceDepth).setLimits(0, 10, 1).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxReferenceDepth = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ2NvbnNvbGUnO1xuaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XG5cbmZ1bmN0aW9uIGZpbmRJbmRleGVzPFQ+KGFuQXJyYXk6IFRbXSwgcHJlZGljYXRlOiAoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGFuQXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZWxlbWVudCwgaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ZXM7XG59O1xuXG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHJpbmdUb0VzY2FwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc3RyaW5nVG9Fc2NhcGUucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbn07XG5pbnRlcmZhY2UgTElSUFBsdWdpblNldHRpbmdzIHtcbiAgICBub3RlUGF0aDogc3RyaW5nO1xuICAgIHNob3dXYXJuaW5nOiBib29sZWFuO1xuICAgIG1heFJlZmVyZW5jZURlcHRoOiBudW1iZXI7XG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBib29sZWFuO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVZhbHVlOiBzdHJpbmc7XG4gICAgc2hvd05vdGVTZWxlY3RvcjogYm9vbGVhbjtcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExJUlBQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICBub3RlUGF0aDogJ05vdGUgb3IgZm9sZGVyIHBhdGgnLFxuICAgIHNob3dXYXJuaW5nOiB0cnVlLFxuICAgIG1heFJlZmVyZW5jZURlcHRoOiAxLFxuICAgIHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbjogJyEnLFxuICAgIGRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgbnVsbFZhbHVlOiAnbnVsbCcsXG4gICAgZXNjYXBlVmFsdWU6ICcvLycsXG4gICAgc2hvd05vdGVTZWxlY3RvcjogdHJ1ZSxcbn07XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNsYXNzIERpY2VSb2xsZXIge1xuICAgIGNoZWNrRGljZShkaWNlU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgIGNvbnN0IGRpY2VSZWdleCA9IC9eKFxcZCspP2QoXFxkKykoW1xcK1xcLV1cXGQrKT8oZSk/KGtcXGQrKT8oa2xcXGQrKT8kL2k7XG4gICAgICByZXR1cm4gZGljZVJlZ2V4LnRlc3QoZGljZVN0cmluZyk7XG4gICAgfTtcbiAgXG4gICAgcm9sbERpY2UoZGljZVN0cmluZzogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgIGlmICghdGhpcy5jaGVja0RpY2UoZGljZVN0cmluZykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3ludGF4ZSBkZSBsYW5jZXIgZGUgZFx1MDBFOXMgaW52YWxpZGUuXCIpO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnN0IFtfLCBjb3VudFN0ciwgc2lkZXNTdHIsIG1vZGlmaWVyU3RyLCBleHBsb2RlU3RyLCBrZWVwU3RyLCBrZWVwTG93U3RyXSA9XG4gICAgICAgIGRpY2VTdHJpbmcubWF0Y2goXG4gICAgICAgICAgL14oXFxkKyk/ZChcXGQrKShbXFwrXFwtXVxcZCspPyhlKT8oa1xcZCspPyhrbFxcZCspPyQvaVxuICAgICAgICApIGFzIFJlZ0V4cE1hdGNoQXJyYXk7XG4gIFxuICAgICAgY29uc3QgY291bnQgPSBwYXJzZUludChjb3VudFN0ciB8fCBcIjFcIik7XG4gICAgICBjb25zdCBzaWRlcyA9IHBhcnNlSW50KHNpZGVzU3RyKTtcbiAgICAgIGNvbnN0IG1vZGlmaWVyID0gcGFyc2VJbnQobW9kaWZpZXJTdHIgfHwgXCIwXCIpO1xuICAgICAgY29uc3QgZXhwbG9kZSA9ICEhZXhwbG9kZVN0cjtcbiAgICAgIGNvbnN0IGtlZXAgPSBrZWVwU3RyID8gcGFyc2VJbnQoa2VlcFN0ci5zbGljZSgxKSkgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBrZWVwTG93ID0ga2VlcExvd1N0ciA/IHBhcnNlSW50KGtlZXBMb3dTdHIuc2xpY2UoMikpIDogdW5kZWZpbmVkO1xuICBcbiAgICAgIGxldCByZXN1bHRzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaWRlcykgKyAxO1xuICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgXG4gICAgICAgIGlmIChleHBsb2RlKSB7XG4gICAgICAgICAgd2hpbGUgKHJlc3VsdCA9PT0gc2lkZXMpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNpZGVzKSArIDE7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICBpZiAoa2VlcCkge1xuICAgICAgICByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGIgLSBhKTtcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwga2VlcCk7XG4gICAgICB9IGVsc2UgaWYgKGtlZXBMb3cpIHtcbiAgICAgICAgcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNsaWNlKDAsIGtlZXBMb3cpO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnN0IHN1bSA9IHJlc3VsdHMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsLCAwKTtcbiAgICAgIHJldHVybiBzdW0gKyBtb2RpZmllcjtcbiAgICB9O1xuICBcbiAgICAvKipcbiAgICAgKiBSZW1wbGFjZSBsZXMgbGFuY2VycyBkZSBkXHUwMEU5cyBlbmNhZHJcdTAwRTlzIHBhciBkZXMgZFx1MDBFOWxpbWl0ZXVycyBkYW5zIHVuZSBjaGFcdTAwRUVuZSBtdWx0aS1saWduZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBMZSB0ZXh0ZSBtdWx0aS1saWduZXMgY29udGVuYW50IGxlcyBsYW5jZXJzIGRlIGRcdTAwRTlzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGFydERlbGltaXRlciBMZSBkXHUwMEU5bGltaXRldXIgZGUgZFx1MDBFOWJ1dCBkZXMgbGFuY2VycyBkZSBkXHUwMEU5cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5kRGVsaW1pdGVyIExlIGRcdTAwRTlsaW1pdGV1ciBkZSBmaW4gZGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gTGUgdGV4dGUgYXZlYyBsZXMgbGFuY2VycyBkZSBkXHUwMEU5cyByZW1wbGFjXHUwMEU5cyBwYXIgbGV1cnMgclx1MDBFOXN1bHRhdHMuXG4gICAgICovXG4gICAgcmVwbGFjZURpY2VSb2xscyhcbiAgICAgIHRleHQ6IHN0cmluZyxcbiAgICAgIHN0YXJ0RGVsaW1pdGVyOiBzdHJpbmcsXG4gICAgICBlbmREZWxpbWl0ZXI6IHN0cmluZ1xuICAgICk6IHN0cmluZyB7XG4gICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAgIGAke3RoaXMuZXNjYXBlUmVnRXhwKHN0YXJ0RGVsaW1pdGVyKX0oW14ke3RoaXMuZXNjYXBlUmVnRXhwKFxuICAgICAgICAgIHN0YXJ0RGVsaW1pdGVyICsgZW5kRGVsaW1pdGVyXG4gICAgICAgICl9XSspJHt0aGlzLmVzY2FwZVJlZ0V4cChlbmREZWxpbWl0ZXIpfWAsXG4gICAgICAgIFwiZ1wiXG4gICAgICApO1xuICBcbiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UocmVnZXgsIChtYXRjaCwgZGljZVN0cmluZykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucm9sbERpY2UoZGljZVN0cmluZyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBtYXRjaDsgLy8gU2kgbGEgc3ludGF4ZSBlc3QgaW52YWxpZGUsIG9uIGdhcmRlIGxlIHRleHRlIGQnb3JpZ2luZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICBcbiAgICAvKipcbiAgICAgKiBcdTAwQzljaGFwcGUgbGVzIGNhcmFjdFx1MDBFOHJlcyBzcFx1MDBFOWNpYXV4IHBvdXIgdW5lIHV0aWxpc2F0aW9uIGRhbnMgdW5lIGV4cHJlc3Npb24gclx1MDBFOWd1bGlcdTAwRThyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgTGEgY2hhXHUwMEVFbmUgZGUgY2FyYWN0XHUwMEU4cmVzIFx1MDBFMCBcdTAwRTljaGFwcGVyLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IExhIGNoYVx1MDBFRW5lIGRlIGNhcmFjdFx1MDBFOHJlcyBcdTAwRTljaGFwcFx1MDBFOWUuXG4gICAgICovXG4gICAgcHJpdmF0ZSBlc2NhcGVSZWdFeHAoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgfTtcbiAgfTtcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxudHlwZSBMSVJQTG9nU3RhdHVzID0gJ2R1cEluTm90ZScgfCAnZHVwSW5Gb2xkZXInIHwgJ2VtcHR5TGlzdCcgfCAnZW1wdHlOb3RlJyB8ICdyZWZMaW1pdCcgfCAnc3ViUmVmTGltaXQnIHwgJ3BhdGhTZXR0aW5nJyB8ICdmb2xkZXJBbmRGaWxlJyB8ICdzaG93SXRlbScgfCAnbm9BY3RpdmVWaWV3JztcbnR5cGUgTElSUExvZ1R5cGUgPSAnZXJyb3InIHwgJ3dhcm5pbmcnIHwgJ2luZm8nO1xuXG5jb25zdCBMSVJQTG9nU3RhdHVzVmFsdWVzOiBMSVJQTG9nU3RhdHVzW10gPSBbXG4gICAgJ2R1cEluTm90ZScsXG4gICAgJ2R1cEluRm9sZGVyJyxcbiAgICAnZW1wdHlMaXN0JyxcbiAgICAnZW1wdHlOb3RlJyxcbiAgICAncmVmTGltaXQnLFxuICAgICdzdWJSZWZMaW1pdCcsXG4gICAgJ3BhdGhTZXR0aW5nJyxcbiAgICAnZm9sZGVyQW5kRmlsZScsXG4gICAgJ3Nob3dJdGVtJyxcbiAgICAnbm9BY3RpdmVWaWV3Jyxcbl07XG5cbmNsYXNzIExJUlBMb2dFbGVtZW50IHtcbiAgICBmYXRoZXI6IHN0cmluZztcbiAgICBjaGlsZDogc3RyaW5nO1xuICAgIHN0YXR1czogTElSUExvZ1N0YXR1cztcbiAgICBjb21wbGVtZW50OiBzdHJpbmc7XG5cbiAgICBzdGF0aWMgZ2V0RXJyb3JTdGF0dXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gWydkdXBJbkZvbGRlcicsJ3BhdGhTZXR0aW5nJ107XG4gICAgfTtcblxuICAgIHN0YXRpYyBnZXRXYXJuaW5nU3RhdHVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IHdhcm5pbmdTdGF0dXM6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgTElSUExvZ1N0YXR1c1ZhbHVlcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghTElSUExvZ0VsZW1lbnQuZ2V0RXJyb3JTdGF0dXMoKS5jb250YWlucyhlbGVtZW50KSAmJiAhTElSUExvZ0VsZW1lbnQuZ2V0V2FybmluZ1N0YXR1cygpLmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ1N0YXR1cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB3YXJuaW5nU3RhdHVzO1xuICAgIH07XG5cbiAgICBzdGF0aWMgZ2V0SW5mb1N0YXR1cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbJ3Nob3dJdGVtJywncmVmTGltaXQnLCdzdWJSZWZMaW1pdCddO1xuICAgIH07XG5cbiAgICBnZXRUeXBlKCk6IExJUlBMb2dUeXBlIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFsncGF0aFNldHRpbmcnLCAnZHVwSW5Gb2xkZXInXTtcbiAgICAgICAgaWYgKGVycm9ycy5jb250YWlucyh0aGlzLnN0YXR1cykpIHtcbiAgICAgICAgICAgIHJldHVybiAnZXJyb3InXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ3dhcm5pbmcnXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yIChmYXRoZXI6IHN0cmluZywgY2hpbGQ6IHN0cmluZywgc3RhdHVzOiBMSVJQTG9nU3RhdHVzLCBjb21wbGVtZW50OiBzdHJpbmcgPSAnJykge1xuICAgICAgICB0aGlzLmZhdGhlciA9IGZhdGhlcjtcbiAgICAgICAgdGhpcy5jaGlsZCA9IGNoaWxkO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5jb21wbGVtZW50ID0gY29tcGxlbWVudDtcbiAgICB9O1xuXG4gICAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0VHlwZSgpfSAvICR7dGhpcy5mYXRoZXJ9IC8gJHt0aGlzLmNoaWxkfSAvICR7dGhpcy5zdGF0dXN9IC8gJHt0aGlzLmNvbXBsZW1lbnR9YDtcbiAgICB9O1xufTtcbmNsYXNzIExJUlBMb2cge1xuICAgIGxvZ3M6IExJUlBMb2dFbGVtZW50W107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sb2dzID0gW107XG4gICAgfTtcbiAgICBcbiAgICBwdXNoKGZhdGhlcjogc3RyaW5nLCBjaGlsZDogc3RyaW5nLCBzdGF0dXM6IExJUlBMb2dTdGF0dXMsIGNvbXBsZW1lbnQ6IHN0cmluZyA9ICcnKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9ncy5wdXNoKG5ldyBMSVJQTG9nRWxlbWVudChmYXRoZXIsIGNoaWxkLCBzdGF0dXMsIGNvbXBsZW1lbnQpKTtcbiAgICB9O1xuXG4gICAgYWRkKGxvZ3M6IExJUlBMb2cpOnZvaWR7XG4gICAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5jb25jYXQobG9ncy5sb2dzKTtcbiAgICB9O1xuXG4gICAgZ2V0KHR5cGU6IExJUlBMb2dUeXBlKTogc3RyaW5nW117XG4gICAgICAgIGNvbnN0IGxvZ3NGb3JUeXBlID0gdGhpcy5sb2dzLmZpbHRlcigoZWxlbWVudCkgPT4gXG4gICAgICAgICAgICBlbGVtZW50LmdldFR5cGUoKSA9PT0gdHlwZVxuICAgICAgICApO1xuICAgICAgICBsZXQgZ2V0QXJyYXk6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxvZ3NGb3JUeXBlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZ2V0QXJyYXkucHVzaChlbGVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdldEFycmF5O1xuICAgIH07XG5cbiAgICBmbHVzaCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dzID0gW107XG4gICAgfTtcblxufTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbnRlcmZhY2UgTElSUExpc3RJbnRlcmZhY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBpdGVtczogc3RyaW5nW107XG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U7XG4gICAgZmx1c2hMb2dzKCk6IHZvaWQ7XG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW47XG4gICAgcGlja1JhbmRvbUl0ZW0oKTogc3RyaW5nO1xuICAgIGdldExvZ3MoKTogTElSUExvZztcbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdO1xufVxuXG5jbGFzcyBMSVJQTGlzdCBpbXBsZW1lbnRzIExJUlBMaXN0SW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaGlkZGVuOiBib29sZWFuO1xuICAgIGl0ZW1zOiBzdHJpbmdbXTtcbiAgICBsb2dzOiBMSVJQTG9nO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuXG4gICAgc3RhdGljIGdldFNldHRpbmdTdHJpbmcodmFsdWU6ICcnIHwgJ2hpZGUnIHwgJ2hpZGVfdGlja2VkJyA9ICcnKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuICctIFsgXSBIaWRlIHRoaXMgbGlzdFxcbidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdoaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdeXFwtIFxcXFxbW3ggXVxcXFxdIEhpZGUgdGhpcyBsaXN0JCc7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGlkZV90aWNrZWQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ15cXC0gXFxcXFt4XFxcXF0gSGlkZSB0aGlzIGxpc3QkJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKG5vdGVOYW1lOiBzdHJpbmcsIGxpbmVzOiBzdHJpbmdbXSwgbnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG5cbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ0V4ID0gL14jICsoLispJC87XG4gICAgICAgIHRoaXMudGl0bGUgPSBsaW5lc1swXS5yZXBsYWNlKGhlYWRpbmdSZWdFeCwgXCIkMVwiKTtcbiAgICAgICAgbGluZXMuc2hpZnQoKTtcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSXRlbVJlZ2V4ID0gL14oLXxcXGQrXFwuKSAoPyFcXFspICooLispJC87XG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkluZGV4ZXMgPSBmaW5kSW5kZXhlcyhsaW5lcywgKGVsZW1lbnQpID0+IGxpc3RCZWdpbkl0ZW1SZWdleC50ZXN0KGVsZW1lbnQpKTtcbiAgICAgICAgaWYgKGxpc3RCZWdpbkluZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlTmFtZSwgdGhpcy50aXRsZSwgJ2VtcHR5TGlzdCcpO1xuICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFuTGluZXMgPSBsaW5lcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnJlcGxhY2UobGlzdEJlZ2luSXRlbVJlZ2V4LCBcIiQyXCIpXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgbGV0IG1kRGVzY3JpcHRpb24gPSBjbGVhbkxpbmVzLnNsaWNlKDAsIGxpc3RCZWdpbkluZGV4ZXNbMF0pO1xuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIGlmIChtZERlc2NyaXB0aW9uWzBdID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgbWREZXNjcmlwdGlvbi5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMzJcbiAgICAgICAgICAgIC8vICAgTUQwMzIvYmxhbmtzLWFyb3VuZC1saXN0czogTGlzdHMgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIC8vIER1ZSB0byBzcGxpdCBvbiAnXFxuJywgdGhlIHNsaWNlLCBhbmQgYXQgbGVhc3QgYSBqb2luIG9uICdcXG4nIHRoZSBsYXN0ICdcXG4nIGlzIGFsd2F5cyBsb3N0ICFcbiAgICAgICAgICAgIC8vIFNvIHRoZSBmb2xvd2luZyBjb2RlIGlzIHVzZWxlc3NcbiAgICAgICAgICAgIC8vIGlmIChtZERlc2NyaXB0aW9uLmF0KC0xKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgLy8gICAgIG1kRGVzY3JpcHRpb24ucG9wKCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBsZXQgaXNIaWRkZW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGhpZGVSZWdleFRpY2tlZCA9IG5ldyBSZWdFeHAgKExJUlBMaXN0LmdldFNldHRpbmdTdHJpbmcoJ2hpZGVfdGlja2VkJykpO1xuICAgICAgICAgICAgY29uc3QgaGlkZVJlZ2V4ID0gbmV3IFJlZ0V4cCAoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygnaGlkZScpKTtcbiAgICAgICAgICAgIG1kRGVzY3JpcHRpb24ubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhpZGVSZWdleFRpY2tlZC50ZXN0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRkZW4gPSBpc0hpZGRlbjtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtZERlc2NyaXB0aW9uID0gbWREZXNjcmlwdGlvbi5maWx0ZXIoKGVsZW1lbnQpID0+ICEoaGlkZVJlZ2V4LnRlc3QoZWxlbWVudCkpKTtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBtZERlc2NyaXB0aW9uLmpvaW4oJ1xcbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaXN0QmVnaW5Db3VudCA9IGxpc3RCZWdpbkluZGV4ZXMubGVuZ3RoXG4gICAgICAgIGxldCBpdGVtOiBzdHJpbmdbXTtcbiAgICAgICAgZm9yIChsZXQgY3VycmVudEluZGV4ID0gMDsgY3VycmVudEluZGV4IDwgKGxpc3RCZWdpbkNvdW50IC0gMSk7IGN1cnJlbnRJbmRleCsrKSB7XG4gICAgICAgICAgICBpdGVtID0gKGNsZWFuTGluZXMuc2xpY2UobGlzdEJlZ2luSW5kZXhlc1tjdXJyZW50SW5kZXhdLCBsaXN0QmVnaW5JbmRleGVzW2N1cnJlbnRJbmRleCArIDFdKSk7XG4gICAgICAgICAgICB0aGlzLnB1c2hJdGVtQmFzZWRPbldlaWdodChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtID0gKGNsZWFuTGluZXMuc2xpY2UobGlzdEJlZ2luSW5kZXhlc1tsaXN0QmVnaW5Db3VudCAtIDFdKSk7XG4gICAgICAgIC8vIHRha2luZyBjYXJlIG9mIE1EMDIyXG4gICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgaWYgKGl0ZW0uYXQoLTEpID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpdGVtLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW0pO1xuICAgIH07XG5cbiAgICBmbHVzaExvZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9ncy5mbHVzaCgpXG4gICAgfTtcblxuICAgIHB1c2hJdGVtQmFzZWRPbldlaWdodChpdGVtOiBzdHJpbmdbXSkgOiB2b2lkIHtcbiAgICAgICAgY29uc3QgSXRlbVdpdGhXZWlnaHRSZWdFeCA9IC9eXFwoKFxcZCspXFwpXFxzKyguKykkLztcbiAgICAgICAgbGV0IHJlZ0V4RXhlY3V0aW9uO1xuICAgICAgICBsZXQgcmVwZWF0OiBudW1iZXI7XG4gICAgICAgIGlmICgocmVnRXhFeGVjdXRpb24gPSBJdGVtV2l0aFdlaWdodFJlZ0V4LmV4ZWMoaXRlbVswXSkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXBlYXQgPSBOdW1iZXIocmVnRXhFeGVjdXRpb25bMV0pO1xuICAgICAgICAgICAgaXRlbVswXSA9IHJlZ0V4RXhlY3V0aW9uWzJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVwZWF0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbVswXSA9PT0gdGhpcy5udWxsVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGl0ZW1bMF0gPSBcIlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtLnNoaWZ0KClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN0cmluZ1JlZ2V4ID0gYF4gKiR7dGhpcy5lc2NhcGVTdHJpbmd9KC4qKWA7XG4gICAgICAgIGNvbnN0IGVzY2FwZVN0cmluZ1JlZ0V4ID0gbmV3IFJlZ0V4cChzdHJpbmdSZWdleCwgJ2dtJyk7XG4gICAgICAgIGNvbnN0IGVzY2FwZUl0ZW0gPSBpdGVtLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVwbGFjZShlc2NhcGVTdHJpbmdSZWdFeCwgJyQxJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdHJpbmdJdGVtID0gZXNjYXBlSXRlbS5qb2luKCdcXG4nKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHN0cmluZ0l0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdldFN1Z2dlc3Rpb24obm90ZU5hbWU6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHtcbiAgICAgICAgICAgIG5vdGVOYW1lOiBub3RlTmFtZSxcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICh0aGlzLmRlc2NyaXB0aW9uLnNwbGl0KCdcXG4nKVswXSksXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb247XG4gICAgfTtcblxuICAgIG5vdEhpZGRlbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhpZGRlbjtcbiAgICB9O1xuXG4gICAgcGlja1JhbmRvbUl0ZW0oKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJhbmRvbUl0ZW06IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJhbmRvbUl0ZW0gPSB0aGlzLml0ZW1zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuaXRlbXMubGVuZ3RoKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmRvbUl0ZW07XG4gICAgfTtcblxuICAgIGdldExvZ3MoKTogTElSUExvZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ3M7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dzLmdldCgnd2FybmluZycpO1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICB9O1xuXG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW50ZXJmYWNlIExJUlBEb1JlZlN1YkludGVyZmFjZSB7XG4gICAgbGFzdExpc3RUaXRsZTogc3RyaW5nO1xuICAgIG1vZGlmaWVkVGV4dDogc3RyaW5nO1xufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmludGVyZmFjZSBMSVJQTm90ZUludGVyZmFjZSB7XG4gICAgbG9hZEZyb21Ob3RlKG5vdGVOYW1lOiBzdHJpbmcsIG5vdGVDb250ZW50OiBzdHJpbmcpOiBib29sZWFuO1xuICAgIGdldExpc3RTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uTGlzdDtcbiAgICBwaWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZTogc3RyaW5nLCB3b3JrT25SZWZlcmVuY2U6IGJvb2xlYW4pOiBzdHJpbmc7IFxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdO1xuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW107XG4gICAgZ2V0TG9ncygpOiBMSVJQTG9nO1xuICAgIGdldExpc3RUaXRsZXMoKSA6IHN0cmluZ1tdO1xuICAgIGZsdXNoTG9ncygpOiB2b2lkO1xufVxuXG5jbGFzcyBMSVJQTm90ZSBpbXBsZW1lbnRzIExJUlBOb3RlSW50ZXJmYWNlIHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgbGlzdDogTElSUExpc3RbXTtcbiAgICBsb2dzOiBMSVJQTG9nO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuICAgIHJvbGxEaWNlOiBib29sZWFuO1xuICAgIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvciAobnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nLCByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubm90ZU5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgdGhpcy5saXN0ID0gW107XG4gICAgICAgIHRoaXMubG9ncyA9IG5ldyBMSVJQTG9nKCk7XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcbiAgICAgICAgdGhpcy5yb2xsRGljZSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlTWF4RGVwdGggPSByZWZlcmVuY2VNYXhEZXB0aDtcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW10ge1xuICAgICAgICBsZXQgbGlzdFRpdGxlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBsaXN0VGl0bGVzLnB1c2goZWxlbWVudC50aXRsZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdFRpdGxlcztcbiAgICB9O1xuXG4gICAgbG9hZEZyb21Ob3RlKG5vdGVOYW1lOiBzdHJpbmcsIG5vdGVDb250ZW50OiBzdHJpbmcsICk6IGJvb2xlYW4ge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gbm90ZU5hbWU7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gbm90ZUNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb25zdCBoZWFkaW5nUmVnZXggPSAvXiMgLiskLztcbiAgICAgICAgbGV0IGhlYWRpbmdJbmRleGVzID0gZmluZEluZGV4ZXMobGluZXMsIChlbGVtZW50KSA9PiBoZWFkaW5nUmVnZXgudGVzdChlbGVtZW50KSk7XG4gICAgICAgIGlmIChoZWFkaW5nSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKG5vdGVOYW1lLCAnJywgJ2VtcHR5Tm90ZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkaW5nSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIC8vIER1ZSB0byBzcGxpdCBvbiAnXFxuJywgdGhlIHNsaWNlLCBhbmQgYXQgbGVhc3QgYSBqb2luIG9uICdcXG4nIHRoZSBsYXN0ICdcXG4nIGlzIGFsd2F5cyBsb3N0ICFcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBsaW5lcy5zbGljZSgwLCBoZWFkaW5nSW5kZXhlc1swXSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGluZ0NvdW50ID0gaGVhZGluZ0luZGV4ZXMubGVuZ3RoO1xuICAgICAgICBsZXQgcHVzaFN1Y2Nlc3M6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRJbmRleCA9IDA7IGN1cnJlbnRJbmRleCA8IChoZWFkaW5nQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBwdXNoU3VjY2VzcyA9IHRoaXMucHVzaExpc3RJZk5vdEV4aXN0cyhuZXcgTElSUExpc3QodGhpcy5ub3RlTmFtZSwgbGluZXMuc2xpY2UoaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4XSwgaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pLCB0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcpKSAmJiBwdXNoU3VjY2VzcztcbiAgICAgICAgfTtcbiAgICAgICAgIHB1c2hTdWNjZXNzID0gdGhpcy5wdXNoTGlzdElmTm90RXhpc3RzKG5ldyBMSVJQTGlzdCh0aGlzLm5vdGVOYW1lLCBsaW5lcy5zbGljZShoZWFkaW5nSW5kZXhlc1toZWFkaW5nQ291bnQgLSAxXSksIHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZykpICYmIHB1c2hTdWNjZXNzO1xuICAgICAgICAgcmV0dXJuIHB1c2hTdWNjZXNzO1xuICAgIH07XG5cbiAgICBwdXNoTGlzdElmTm90RXhpc3RzKGxpc3RUb1B1c2g6IExJUlBMaXN0KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmdldExpc3RUaXRsZXMoKS5jb250YWlucyhsaXN0VG9QdXNoLnRpdGxlKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2godGhpcy5ub3RlTmFtZSwgbGlzdFRvUHVzaC50aXRsZSwgJ2R1cEluTm90ZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2gobGlzdFRvUHVzaCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3Qgbm90ZVN1Z2dlc3Rpb24gPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0KCk7XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAod2l0aEhpZGRlbiB8fCBlbGVtZW50Lm5vdEhpZGRlbigpKSB7XG4gICAgICAgICAgICAgICAgbm90ZVN1Z2dlc3Rpb24ucHVzaChlbGVtZW50LmdldFN1Z2dlc3Rpb24odGhpcy5ub3RlTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vdGVTdWdnZXN0aW9uO1xuICAgIH07XG5cbiAgICBkb1JlZmVyZW5jZVN1YnN0aXR1dGlvbih0ZXh0OiBzdHJpbmcpOiBMSVJQRG9SZWZTdWJJbnRlcmZhY2Uge1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIGxldCBtb2RpZmllZFRleHQ6c3RyaW5nID0gdGV4dDtcbiAgICAgICAgbGV0IGxpc3RUaXRsZTpzdHJpbmcgPSBcIlwiO1xuICAgICAgICBjb25zdCBzdHJpbmdSZWZSZWdleDogc3RyaW5nID0gYFxceygke3RoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IGVzY2FwZVJlZ2V4KGVsZW1lbnQudGl0bGUpKS5qb2luKCd8Jyl9KVxcfWA7XG4gICAgICAgIGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHRoaXMucmVmZXJlbmNlTWF4RGVwdGg7IHJlcGVhdCsrKSB7XG4gICAgICAgICAgICAvLyByZXR1cm5PZkRvRXhlY1N1YiA9IHRoaXMuZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24ocmFuZG9tSXRlbSk7XG4gICAgICAgICAgICAvLyByYW5kb21JdGVtID0gcmV0dXJuT2ZEb0V4ZWNTdWIubW9kaWZpZWRUZXh0O1xuICAgICAgICAgICAgY29uc3QgcmVmUmVnZXggPSBuZXcgUmVnRXhwIChzdHJpbmdSZWZSZWdleCwnbWcnKTtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWZSZWdleC5leGVjKG1vZGlmaWVkVGV4dCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlOiBzdHJpbmcgPSB0aGlzLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobWF0Y2hbMV0sIGZhbHNlKTsgXG4gICAgICAgICAgICAgICAgbGlzdFRpdGxlID0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgbW9kaWZpZWRUZXh0ID0gbW9kaWZpZWRUZXh0LnJlcGxhY2UobGlzdFRpdGxlLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmVmUmVnZXgubGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBuZXdWYWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm9sbERpY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpY2VSb2xsZXIgPSBuZXcgRGljZVJvbGxlcigpO1xuICAgICAgICAgICAgbW9kaWZpZWRUZXh0ID0gZGljZVJvbGxlci5yZXBsYWNlRGljZVJvbGxzKG1vZGlmaWVkVGV4dCwneycsJ30nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IG1vZGlmaWVkVGV4dCxcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZmx1c2hMb2dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ3MuZmx1c2goKTtcbiAgICAgICAgdGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5mbHVzaExvZ3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmFuZG9tSXRlbTogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgbGV0IHJldHVybk9mRG9FeGVjU3ViOiBMSVJQRG9SZWZTdWJJbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gdGhpcy5saXN0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQudGl0bGUgPT09IGxpc3RUaXRsZSk7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gY3VycmVudExpc3QucGlja1JhbmRvbUl0ZW0oKTtcbiAgICAgICAgICAgIC8vIGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IHRoaXMucmVmZXJlbmNlTWF4RGVwdGg7IHJlcGVhdCsrKSB7XG4gICAgICAgICAgICBpZiAod29ya09uUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuT2ZEb0V4ZWNTdWIgPSB0aGlzLmRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHJhbmRvbUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJhbmRvbUl0ZW0gPSByZXR1cm5PZkRvRXhlY1N1Yi5tb2RpZmllZFRleHQ7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1JlZlJlZ2V4OiBzdHJpbmcgPSBgXFx7KCR7dGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4gZXNjYXBlUmVnZXgoZWxlbWVudC50aXRsZSkpLmpvaW4oJ3wnKX0pXFx9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBSZWZSZWdleCA9IG5ldyBSZWdFeHAgKHN0cmluZ1JlZlJlZ2V4KTtcbiAgICAgICAgICAgICAgICBpZiAoUmVmUmVnZXgudGVzdChyYW5kb21JdGVtKSAmJiB3b3JrT25SZWZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVybk9mRG9FeGVjU3ViLmxhc3RMaXN0VGl0bGUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5PZkRvRXhlY1N1Yi5sYXN0TGlzdFRpdGxlID0gbGlzdFRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKHRoaXMubm90ZU5hbWUsIHJldHVybk9mRG9FeGVjU3ViLmxhc3RMaXN0VGl0bGUsICdyZWZMaW1pdCcpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJhbmRvbUl0ZW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZ2V0RXJyb3IoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dzLmdldCgnZXJyb3InKTtcbiAgICB9O1xuXG4gICAgZ2V0TG9ncygpOiBMSVJQTG9nIHtcbiAgICAgICAgbGV0IGFsbExvZ3MgPSBuZXcgTElSUExvZztcbiAgICAgICAgYWxsTG9ncy5hZGQodGhpcy5sb2dzKTtcbiAgICAgICAgdGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsTG9ncy5hZGQoZWxlbWVudC5nZXRMb2dzKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbExvZ3M7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsV2FybmluZzogc3RyaW5nW10gPSB0aGlzLmxvZ3MuZ2V0KCd3YXJuaW5nJyk7XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxXYXJuaW5nID0gYWxsV2FybmluZy5jb25jYXQoZWxlbWVudC5nZXRXYXJuaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbFdhcm5pbmdcbiAgICB9O1xuXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0Lmxlbmd0aDtcbiAgICB9O1xufVxuXG5jbGFzcyBMSVJQTXVsdGlOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIG11bHRpTm90ZTogTElSUE5vdGVbXTtcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcbiAgICByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyO1xuICAgIGxvZ3M6IExJUlBMb2c7XG5cbiAgICBjb25zdHJ1Y3RvciAobnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nLCByZWZlcmVuY2VNYXhEZXB0aDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlID0gW107XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCA9IHJlZmVyZW5jZU1heERlcHRoO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgIH07XG5cbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Tm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICBsZXQgc3RhdHVzID0gY3VycmVudE5vdGUubG9hZEZyb21Ob3RlKG5vdGVOYW1lLCBub3RlQ29udGVudCk7XG4gICAgICAgIHN0YXR1cyA9IHRoaXMucHVzaE5vdGVJZkxpc3ROb3RFeGlzdHMoY3VycmVudE5vdGUpICYmIHN0YXR1cztcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9O1xuXG4gICAgcHVzaE5vdGVJZkxpc3ROb3RFeGlzdHMobm90ZVRvUHVzaDogTElSUE5vdGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWxsTGlzdFRpdGxlID0gdGhpcy5nZXRMaXN0VGl0bGVzKCk7XG4gICAgICAgIGxldCB1bmljOmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICBub3RlVG9QdXNoLmdldExpc3RUaXRsZXMoKS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChhbGxMaXN0VGl0bGUuY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlVG9QdXNoLm5vdGVOYW1lLCBlbGVtZW50LCAnZHVwSW5Gb2xkZXInLCB0aGlzLmdldE5vdGVOYW1lRnJvbUxpc3RUaXRsZShlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgdW5pYyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVuaWMpIHtcbiAgICAgICAgICAgIHRoaXMubXVsdGlOb3RlLnB1c2gobm90ZVRvUHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuYWRkKG5vdGVUb1B1c2gubG9ncyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1bmljO1xuICAgIH07XG5cbiAgICBnZXROb3RlTmFtZUZyb21MaXN0VGl0bGUobGlzdFRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbm90ZSA9IHRoaXMubXVsdGlOb3RlLmZpbmQoKGVsZW1lbnQpID0+XG4gICAgICAgICAgICBlbGVtZW50LmdldExpc3RUaXRsZXMoKS5jb250YWlucyhsaXN0VGl0bGUpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChub3RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlLm5vdGVOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgXG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW10ge1xuICAgICAgICBsZXQgbGlzdFRpdGxlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxpc3RUaXRsZXMgPSBsaXN0VGl0bGVzLmNvbmNhdChlbGVtZW50LmdldExpc3RUaXRsZXMoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdFRpdGxlcztcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgbGV0IGFsbExpc3RTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbExpc3RTdWdnZXN0aW9uID0gYWxsTGlzdFN1Z2dlc3Rpb24uY29uY2F0KGVsZW1lbnQuZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbExpc3RTdWdnZXN0aW9uO1xuICAgIH07XG5cbiAgICBnZXROb3RlU3VnZ2VzdGlvbih3aXRoSGlkZGVuOiBib29sZWFuID0gZmFsc2UpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBsZXQgbm90ZVN1Z2dlc3Rpb24gPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW4pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBub3RlU3VnZ2VzdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZU5hbWU6IGVsZW1lbnQubm90ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBlbGVtZW50Lm5vdGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGVsZW1lbnQuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm90ZVN1Z2dlc3Rpb247XG4gICAgfTtcblxuICAgIGRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHRleHQ6IHN0cmluZyk6c3RyaW5nIHtcbiAgICAgICAgbGV0IHN1cGVyTm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHN1cGVyTm90ZS5saXN0ID0gc3VwZXJOb3RlLmxpc3QuY29uY2F0KGVsZW1lbnQubGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcmV0dXJuT2ZEb0V4ZWNTdWI6IExJUlBEb1JlZlN1YkludGVyZmFjZSA9IHtcbiAgICAgICAgICAgIGxhc3RMaXN0VGl0bGU6ICdSZWZlcmVuY2Ugc3Vic3RpdHV0aW9uIGluIHNlbGVjdGlvbicsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybk9mRG9FeGVjU3ViID0gc3VwZXJOb3RlLmRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHRleHQpO1xuICAgICAgICBsZXQgbGlzdFRpdGxlOnN0cmluZyA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHN0cmluZ1JlZlJlZ2V4OiBzdHJpbmcgPSBgXFx7KCR7c3VwZXJOb3RlLmxpc3QubWFwKChlbGVtZW50KSA9PiBlc2NhcGVSZWdleChlbGVtZW50LnRpdGxlKSkuam9pbignfCcpfSlcXH1gO1xuICAgICAgICBjb25zdCByZWZSZWdleCA9IG5ldyBSZWdFeHAoc3RyaW5nUmVmUmVnZXgpO1xuICAgICAgICBpZiAocmVmUmVnZXgudGVzdChyZXR1cm5PZkRvRXhlY1N1Yi5tb2RpZmllZFRleHQpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCgnJywgJycsICdzdWJSZWZMaW1pdCcpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmV0dXJuT2ZEb0V4ZWNTdWIubW9kaWZpZWRUZXh0XG4gICAgfTtcblxuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICAgICAgICBsZXQgc3VwZXJOb3RlID0gbmV3IExJUlBOb3RlKHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZywgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCk7XG4gICAgICAgIHN1cGVyTm90ZS5ub3RlTmFtZSA9IHRoaXMuZ2V0Tm90ZU5hbWVGcm9tTGlzdFRpdGxlKGxpc3RUaXRsZSk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc3VwZXJOb3RlLmxpc3QgPSBzdXBlck5vdGUubGlzdC5jb25jYXQoZWxlbWVudC5saXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJhbmRvbUl0ZW06IHN0cmluZyA9IHN1cGVyTm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSk7XG4gICAgICAgIHRoaXMubG9ncy5hZGQoc3VwZXJOb3RlLmdldExvZ3MoKSk7XG4gICAgICAgIHJldHVybiByYW5kb21JdGVtO1xuICAgIH07XG5cbiAgICBmbHVzaExvZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9ncy5mbHVzaCgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuZmx1c2hMb2dzKClcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbEVycm9yOnN0cmluZ1tdID0gW107XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsRXJyb3IgPSBhbGxFcnJvci5jb25jYXQoZWxlbWVudC5nZXRFcnJvcigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxFcnJvcjtcbiAgICB9O1xuXG4gICAgZ2V0TG9ncygpOiBMSVJQTG9nIHtcbiAgICAgICAgbGV0IGFsbExvZ3MgPSBuZXcgTElSUExvZztcbiAgICAgICAgYWxsTG9ncy5hZGQodGhpcy5sb2dzKTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxMb2dzLmFkZChlbGVtZW50LmdldExvZ3MoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWxsTG9ncztcbiAgICB9O1xuXG4gICAgaGFzRXJyb3JzKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBhbGxMb2dzID0gdGhpcy5nZXRMb2dzKCk7XG4gICAgICAgIHJldHVybiAoYWxsTG9ncy5nZXQoJ2Vycm9yJykubGVuZ3RoICE9PSAwKSA7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsV2FybmluZzpzdHJpbmdbXSA9IHRoaXMubG9ncy5nZXQoJ3dhcm5pbmcnKTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxXYXJuaW5nID0gYWxsV2FybmluZy5jb25jYXQoZWxlbWVudC5nZXRXYXJuaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbFdhcm5pbmc7XG4gICAgfTtcblxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlOb3RlLmxlbmd0aDtcbiAgICB9O1xuXG59O1xuXG5pbnRlcmZhY2UgTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2Uge1xuICAgIG5vdGVOYW1lOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuXG5jbGFzcyBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgIGxpc3Q6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saXN0ID0gW107XG4gICAgfTtcblxuICAgIHB1c2ggKGVsZW1lbnQ6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGlzdC5wdXNoKGVsZW1lbnQpO1xuICAgIH07XG5cbiAgICBmaWx0ZXJCeU5vdGVOYW1lKG5vdGVOYW1lOiBzdHJpbmcpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBmaWx0ZXJMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5ub3RlTmFtZSA9PT0gbm90ZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJMaXN0LnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmlsdGVyTGlzdDtcbiAgICB9O1xuXG4gICAgZmlsdGVyKGNhbGxiYWNrOiAoZWxlbWVudDogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UsIGluZGV4PzogbnVtYmVyLCBhcnJheT86IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10pID0+IGJvb2xlYW4pOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0KCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sodGhpcy5saXN0W2ldLCBpLCB0aGlzLmxpc3QpKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRMaXN0LnB1c2godGhpcy5saXN0W2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRMaXN0O1xuICAgIH07XG5cbiAgICBjb25jYXQob3RoZXJMaXN0OiBMSVJQU3VnZ2VzdGlvbkxpc3QpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICBuZXdMaXN0Lmxpc3QgPSB0aGlzLmxpc3QuY29uY2F0KG90aGVyTGlzdC5saXN0KTtcbiAgICAgICAgcmV0dXJuIG5ld0xpc3Q7XG4gICAgfTtcblxuICAgIGdldCBsZW5ndGggKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoO1xuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBMSVJQU3VnZ2VzdE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlPiB7XG4gICAgaXRlbXM6IExJUlBTdWdnZXN0aW9uTGlzdDtcbiAgICBjYWxsYmFjazogKHZhbHVlOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSkgPT4gdm9pZDtcbiAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGl0ZW1zOiBMSVJQU3VnZ2VzdGlvbkxpc3QsIGNhbGxiYWNrOiAodmFsdWU6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlKSA9PiB2b2lkKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH07XG5cbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0udGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApLmxpc3Q7XG4gICAgfTtcblxuICAgIHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UsIGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBpdGVtLnRpdGxlIH0pO1xuICAgICAgICBsZXQgbWVzc2FnZTpzdHJpbmcgPSBpdGVtLmRlc2NyaXB0aW9uXG4gICAgICAgIC8vIGlmIChpdGVtLm5vdGVOYW1lICE9PSBpdGVtLnRpdGxlKSB7XG4gICAgICAgIC8vICAgICBpZiAoaXRlbS5kZXNjcmlwdGlvbiAhPT0gJycpIHtcbiAgICAgICAgLy8gICAgICAgICBtZXNzYWdlID0gYCR7aXRlbS5kZXNjcmlwdGlvbn1cXG4oZnJvbSA6ICR7aXRlbS5ub3RlTmFtZX0pYDtcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XG4gICAgICAgIC8vICAgICAgICAgbWVzc2FnZSA9IGAoZnJvbSA6ICR7aXRlbS5ub3RlTmFtZX0pYDtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfTtcbiAgICAgICAgZWwuY3JlYXRlRWwoJ3NtYWxsJywge3RleHQ6IG1lc3NhZ2V9KTtcbiAgICAgIH07XG4gIFxuICAgICAgb25DaG9vc2VTdWdnZXN0aW9uKGl0ZW06IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soaXRlbSk7XG4gICAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdEl0ZW1SYW5kb21QaWNrZXIgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBMSVJQUGx1Z2luU2V0dGluZ3M7XG4gICAgbG9nczogTElSUExvZztcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5sb2dzID0gbmV3IExJUlBMb2coKTtcbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdsaXN0LXRyZWUnLCAnUGljayByYW5kb20gbGlzdCBpdGVtJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmVwYXJlQWN0aW9uKCdub3RlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2luc2VydC1yYW5kb20taXRlbScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IHJhbmRvbSBpdGVtIGZyb20gbGlzdCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUFjdGlvbignbm90ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdpbnNlcnQtc2V0dGluZy1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgbGlzdCBzZXR0aW5ncyB2YWx1ZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydFN0cmluZyhMSVJQTGlzdC5nZXRTZXR0aW5nU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdpbnNlcnQtcmVmZXJlbmNlLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBsaXN0IHJlZmVyZW5jZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUFjdGlvbigncmVmZXJlbmNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3JlcGxhY2UtcmVmZXJlbmNlLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ1JlcGxhY2UgcmVmZXJlbmNlcyBpbiBzZWxlY3Rpb24nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmVBY3Rpb24oJ2RvUmVmU3Vic3RpdHV0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTElSUFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgb251bmxvYWQoKSB7XG4gICAgfTtcblxuICAgIGdldExJUlBGaWxlcyAobm90ZVBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbFZhdWx0RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBmaWxlc0luTm90ZVBhdGg6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IGZvdW5kQUZpbGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgbm90ZUZpbGVOYW1lOiBzdHJpbmcgPSBgJHtub3RlUGF0aH0ubWRgXG4gICAgICAgIGNvbnN0IG5vdGVQYXRoUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtub3RlUGF0aH0vLitcXC5tZCRgKTtcbiAgICAgICAgYWxsVmF1bHRGaWxlcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChub3RlUGF0aFJlZ2V4LnRlc3QoZWxlbWVudC5wYXRoKSkge1xuICAgICAgICAgICAgICAgIGZpbGVzSW5Ob3RlUGF0aC5wdXNoKGVsZW1lbnQucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQucGF0aCA9PT0gbm90ZUZpbGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgZm91bmRBRmlsZSA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpbGVzSW5Ob3RlUGF0aC5sZW5ndGggPT09IDAgJiYgZm91bmRBRmlsZSkge1xuICAgICAgICAgICAgZmlsZXNJbk5vdGVQYXRoLnB1c2gobm90ZUZpbGVOYW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChmb3VuZEFGaWxlICYmIGZpbGVzSW5Ob3RlUGF0aC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCdMaXN0SXRlbVJhbmRtUGlja2VyJywnZ2V0TElSUEZpbGVzJywnZm9sZGVyQW5kRmlsZScpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzSW5Ob3RlUGF0aDtcbiAgICB9O1xuXG4gICAgYXN5bmMgbG9hZExJUlBGaWxlcygpOiBQcm9taXNlPExJUlBNdWx0aU5vdGU+IHtcbiAgICAgICAgY29uc3QgYWxsTElSUEZpbGVzID0gdGhpcy5nZXRMSVJQRmlsZXModGhpcy5zZXR0aW5ncy5ub3RlUGF0aCk7XG4gICAgICAgIGxldCBjdXJyZW50TElSUCA9IG5ldyBMSVJQTXVsdGlOb3RlKHRoaXMuc2V0dGluZ3MubnVsbFZhbHVlLCB0aGlzLnNldHRpbmdzLmVzY2FwZVZhbHVlLCB0aGlzLnNldHRpbmdzLm1heFJlZmVyZW5jZURlcHRoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGN1cnJlbnRGaWxlIG9mIGFsbExJUlBGaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEZTT2JqZWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGN1cnJlbnRGaWxlKTtcbiAgICAgICAgICAgIGxldCBjb250ZW50OnN0cmluZyA9ICcnO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRGU09iamVjdCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoY3VycmVudEZTT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TElSUC5sb2FkRnJvbU5vdGUoY3VycmVudEZTT2JqZWN0LnBhdGguc2xpY2UoMCwgLTMpLCBjb250ZW50KTtcbiAgICAgICAgICAgIH07ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRMSVJQO1xuICAgIH07XG5cbiAgICBhc3luYyBwcmVwYXJlQWN0aW9uKGFjdGlvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMSVJQID0gYXdhaXQgdGhpcy5sb2FkTElSUEZpbGVzKCk7XG4gICAgICAgIGlmIChjdXJyZW50TElSUC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCdMaXN0SXRlbVJhbmRvbVBpY2tlcicsJ2xvYWRMSVJQRmlsZXMnLCdwYXRoU2V0dGluZycpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWN1cnJlbnRMSVJQLmhhc0Vycm9ycygpICYmIGN1cnJlbnRMSVJQLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2RvUmVmU3Vic3RpdHV0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24oY3VycmVudExJUlApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExJUlAubGVuZ3RoID09PSAxIHx8ICF0aGlzLnNldHRpbmdzLnNob3dOb3RlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IExJUlBTdWdnZXN0TW9kYWwodGhpcy5hcHAsIGN1cnJlbnRMSVJQLmdldExpc3RTdWdnZXN0aW9uKGFjdGlvbiA9PT0gJ3JlZmVyZW5jZScpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ25vdGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrV2l0aFRpdGxlKGN1cnJlbnRMSVJQLCBpdGVtLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRTdHJpbmcoYHske2l0ZW0udGl0bGV9fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXROb3RlU3VnZ2VzdGlvbihhY3Rpb24gPT09ICdyZWZlcmVuY2UnKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXRMaXN0U3VnZ2VzdGlvbihhY3Rpb24gPT09ICdyZWZlcmVuY2UnKS5maWx0ZXJCeU5vdGVOYW1lKGl0ZW0ubm90ZU5hbWUpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKGB7JHtpdGVtLnRpdGxlfX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb0xvZ01hbmFnZW1lbnQoY3VycmVudExJUlAuZ2V0TG9ncygpKTtcbiAgICAgICAgdGhpcy5sb2dzLmZsdXNoKCk7XG4gICAgICAgIGN1cnJlbnRMSVJQLmZsdXNoTG9ncygpO1xuICAgIH07XG5cbiAgICBkb0xvZ01hbmFnZW1lbnQobXVsdGlOb3RlTG9ncz86IExJUlBMb2cpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWxsTG9ncyA9IHRoaXMubG9ncztcbiAgICAgICAgaWYgKG11bHRpTm90ZUxvZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYWxsTG9ncy5hZGQobXVsdGlOb3RlTG9ncyk7XG4gICAgICAgICAgICBtdWx0aU5vdGVMb2dzLmZsdXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yTXNnOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCB3YXJuaW5nTXNnOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBpbmZvTXNnOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBhbGxMb2dzLmxvZ3MubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGVsZW1lbnQuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZHVwSW5Ob3RlJzpcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZy5wdXNoKGBMaXN0IFwiJHtlbGVtZW50LmNoaWxkfVwiIGlzIGR1cGxpY2F0ZSBpbiBub3RlIFwiJHtlbGVtZW50LmZhdGhlcn1cIi4gTGlzdCBpcyBpZ25vcmVkYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cEluRm9sZGVyJzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2cucHVzaChgRVJST1IgOiBMaXN0IFwiJHtlbGVtZW50LmNoaWxkfVwiIGV4aXN0cyBpbiB0d28gbm90ZXMsIFwiJHtlbGVtZW50LmZhdGhlcn1cIiBhbmQgXCIke2VsZW1lbnQuY29tcGxlbWVudH1cIiwgbWFrZSBjb3JyZWN0aW9uICFgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1wdHlMaXN0JzpcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZy5wdXNoKGBMaXN0IFwiJHtlbGVtZW50LmNoaWxkfVwiIGlzIGVtcHR5IGluIFwiJHtlbGVtZW50LmZhdGhlcn1cImApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbXB0eU5vdGUnOlxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nTXNnLnB1c2goYFwiJHtlbGVtZW50LmNoaWxkfVwiIGlzIGVtcHR5YCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JlZkxpbWl0JzpcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZy5wdXNoKGBSZWZlcmVuY2UgZGVwdGggbGltaXQgcmVhY2ggd2l0aCBsaXN0IFwiJHtlbGVtZW50LmNoaWxkfVwiIGluIG5vdGUgXCIke2VsZW1lbnQuZmF0aGVyfVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgJ3N1YlJlZkxpbWl0JzpcbiAgICAgICAgICAgICAgICAvLyAgICAgd2FybmluZ01zZy5wdXNoKGBSZWZlcmVuY2UgZGVwdGggbGltaXQgcmVhY2hgKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncGF0aFNldHRpbmcnOlxuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZy5wdXNoKGBFUlJPUiA6IHZlcmlmeSBwYXRoIGluIHBsdWdpbiBzZXR0aW5nc2ApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmb2xkZXJBbmRGaWxlJzpcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZy5wdXNoKGBBIG5vdGUgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBmb2xkZXIgaW4gc2V0dGluZ3MgZ2V0cyBpZ25vcmVkLmApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaG93SXRlbSc6XG4gICAgICAgICAgICAgICAgICAgIGluZm9Nc2cucHVzaChgJHtlbGVtZW50LmNvbXBsZW1lbnR9YCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vQWN0aXZlVmlldyc6XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cucHVzaChgTm8gbm90ZSBpbiBlZGl0aW9uIG1vZGUgdG8gZG8gdGhpcyBhY3Rpb25gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXJyb3JNc2cubWFwKChlbGVtZW50KSA9PiBuZXcgTm90aWNlKGVsZW1lbnQpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dXYXJuaW5nKSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ01zZy5tYXAoKGVsZW1lbnQpID0+IG5ldyBOb3RpY2UoZWxlbWVudCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGluZm9Nc2cubWFwKChlbGVtZW50KSA9PiBuZXcgTm90aWNlKGVsZW1lbnQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubG9ncy5mbHVzaCgpO1xuICAgIH07XG5cbiAgICB3b3JrV2l0aFRpdGxlKG5vdGU6IExJUlBNdWx0aU5vdGUsIGxpc3RUaXRsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uUmVnZXg6c3RyaW5nID0gYF4ke3RoaXMuc2V0dGluZ3Muc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9ufSRgO1xuICAgICAgICAgICAgY29uc3Qgbm90aWNlUmVnZXggPSBuZXcgUmVnRXhwKHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvblJlZ2V4KTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGFjdGl2ZVZpZXcuZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKG5vdGljZVJlZ2V4LnRlc3Qoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCcnLCcnLCdzaG93SXRlbScsbm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSkpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVWaWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBzdHJpbmdUb0luc2VydDogc3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwZWF0SW5zZXJ0UmVnRXggPSAvXihcXGQrKSguKikvZ207XG4gICAgICAgICAgICAgICAgbGV0IHJlZ0V4RXhlY3V0aW9uO1xuICAgICAgICAgICAgICAgIGxldCByZXBlYXQ6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBpZiAoKHJlZ0V4RXhlY3V0aW9uID0gcmVwZWF0SW5zZXJ0UmVnRXguZXhlYyhzZWxlY3Rpb24pKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBlYXQgPSBOdW1iZXIocmVnRXhFeGVjdXRpb25bMV0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxpbWl0ZXIgPSBzZWxlY3Rpb24ucmVwbGFjZSgvXlxcZCsvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5U3RyaW5nVG9pbnNlcnQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVwZWF0OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5U3RyaW5nVG9pbnNlcnQucHVzaChub3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVG9JbnNlcnQgPSBhcnJheVN0cmluZ1RvaW5zZXJ0LmpvaW4oZGVsaW1pdGVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdUb0luc2VydCA9IG5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY3RpdmVWaWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHN0cmluZ1RvSW5zZXJ0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCgnTGlzdEl0ZW1SYW5kb21QaWNrZXInLCd3b3JrV2l0aFRpdGxlJywnbm9BY3RpdmVWaWV3JylcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kb0xvZ01hbmFnZW1lbnQobm90ZS5nZXRMb2dzKCkpO1xuICAgIH07XG5cbiAgICBkb1JlZmVyZW5jZVN1YnN0aXR1dGlvbihtdWx0aU5vdGU6IExJUlBNdWx0aU5vdGUpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGFjdGl2ZVZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24obXVsdGlOb3RlLmRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHNlbGVjdGlvbikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2goJ0xpc3RJdGVtUmFuZG9tUGlja2VyJywnd29ya1dpdGhUaXRsZScsJ25vQWN0aXZlVmlldycpXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGluc2VydFN0cmluZyhzdHJpbmdUb0luc2VydDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgYWN0aXZlVmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihzdHJpbmdUb0luc2VydCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCgnTGlzdEl0ZW1SYW5kb21QaWNrZXInLCd3b3JrV2l0aFRpdGxlJywnbm9BY3RpdmVWaWV3JylcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kb0xvZ01hbmFnZW1lbnQoKTtcbiAgICB9O1xuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxufVxuXG5jbGFzcyBMSVJQU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogTGlzdEl0ZW1SYW5kb21QaWNrZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMaXN0SXRlbVJhbmRvbVBpY2tlcikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUGF0aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHBhdGggb2YgYSBub3RlIG9yIGZvbGRlci4gRXhhbXBsZTogXCJGb2xkZXIvTm90ZVwiIG9yIFwiRm9sZGVyXCIuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIHBhdGggdG8geW91ciBub3RlJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlUGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiU3BlY2lmaWMgdmFsdWVzXCIgfSk7XG4gICAgXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIk51bGwgdmFsdWVcIilcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIklmIHRoZSBmaXJzdCBsaW5lIG9mIGEgbGlzdCBpdGVtIGhhcyB0aGlzIHZhbHVlLCB0aGF0IGxpbmUgaXMgaWdub3JlZC4gVGhpcyBhbGxvd3MgeW91IHRvIGhhdmUgcHJvYmFiaWxpdGllcyBvZiBnZXR0aW5nIG5vIHJlc3VsdC4gVXNhZ2UgZXhhbXBsZTogaGF2aW5nLCBvciBub3QgaGF2aW5nLCBhIHBhcnRpY2xlIGluIGEgbm91bi5cIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciB2YWx1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubnVsbFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm51bGxWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiRXNjYXBlIHZhbHVlXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJUbyBpbmNsdWRlIGhlYWRpbmcgb25lIGVsZW1lbnRzIG9yIGZpcnN0LWxldmVsIGxpc3QgaXRlbXMgaW4geW91ciByYW5kb20gbGlzdCwgZXNjYXBlIHRoZW0gd2l0aCB0aGVzZSB2YWx1ZXMuIEV4ZW1wbGUgOiAvLyAjIEhlYWRpbmdcIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciB2YWx1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXNjYXBlVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZVZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJTZWxlY3Rpb24gdmFsdWUgZm9yIG5vdGlmaWNhdGlvblwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiSWYgdGhlIHNlbGVjdGVkIHRleHQgaGFzIHRoaXMgdmFsdWUsIHRoZSBpdGVtIGlzIG5vdCBpbnNlcnRlZDsgaW5zdGVhZCwgYSBub3RpZmljYXRpb24gaXMgc2hvd24uXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgdmFsdWVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQmVoYXZpb3InIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgbm90ZSBzZWxlY3RvcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgcGF0aCBpcyBhIGZvbGRlciBjb250YWluaW5nIGF0IGxlYXN0IHR3byBub3RlcywgYSBzZWxlY3RvciB3aWxsIGFsbG93IHlvdSB0byBjaG9vc2UgdGhlIG5vdGU7IG90aGVyd2lzZSwgYWxsIGxpc3RzIHdpbGwgYmUgb2ZmZXJlZCB0byB5b3UuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU2VsZWN0b3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgd2FybmluZycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQXJlIHdhcm5pbmdzIGRpc3BsYXllZCBhcyBub3RpZmljYXRpb25zID8nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXYXJuaW5nKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXYXJuaW5nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWxldGUgc2VsZWN0aW9uIHZhbHVlIG9uIG5vdGlmaWNhdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgdGhpcyBzZXR0aW5nIGlzIG9uLCB0aGUgc2VsZWN0ZWQgbm90aWZpY2F0aW9uIHZhbHVlIGlzIHJlbW92ZWQgYWZ0ZXIgaXRcXCdzIHVzZWQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZWZlcmVuY2UgZGVwdGggbGltaXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1JlZmVyZW5jZSByZWN1cnNpb24gbGltaXQ6IHRoZSBtYXhpbXVtIG51bWJlciBvZiBuZXN0ZWQgcmVmZXJlbmNlIGNhbGxzIGFsbG93ZWQuIFplcm8gZGlzYWJsZXMgcmVmZXJlbmNlIHJlc29sdXRpb24uJylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoKHNsaWRlcikgPT5cbiAgICAgICAgICAgICAgICBzbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFJlZmVyZW5jZURlcHRoKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEwLCAxKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFJlZmVyZW5jZURlcHRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7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
