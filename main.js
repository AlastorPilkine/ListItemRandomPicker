/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
function escapeRegex(stringToEscape) {
  return stringToEscape.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
var DEFAULT_SETTINGS = {
  notePath: "Full path of a note",
  showWarning: true,
  maxMacroDepth: 1,
  selectionForNotification: "!",
  deleteSelectionForNotification: false,
  nullValue: "null",
  escapeValue: "//",
  showNoteSelector: true
};
var LIRPList = class {
  constructor(lines, nullValue, escapeString) {
    this.title = "";
    this.description = "";
    this.hidden = false;
    this.items = [];
    this.warning = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    const italicHeadingRegex = /^(_|\*)\S/;
    if (italicHeadingRegex.test(this.title)) {
      this.hidden = true;
    } else {
      this.hidden = false;
    }
    lines.shift();
    const listBeginItemRegex = /^(-|\d+\.) +(.+)$/;
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.warning.push(`No items in list ${this.title}`);
      this.hidden = true;
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      let mdDescription = cleanLines.slice(0, listBeginIndexes[0]);
      if (mdDescription[0] === "") {
        mdDescription.shift();
      }
      this.description = mdDescription.join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    let item;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      item = cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]);
      this.pushItemBasedOnWeight(item);
    }
    item = cleanLines.slice(listBeginIndexes[listBeginCount - 1]);
    if (item.at(-1) === "") {
      item.pop();
    }
    this.pushItemBasedOnWeight(item);
  }
  pushItemBasedOnWeight(item) {
    const ItemWithWeightRegEx = /^\((\d+)\)\s+(.+)$/;
    let regExExecution;
    let repeat;
    if ((regExExecution = ItemWithWeightRegEx.exec(item[0])) !== null) {
      repeat = Number(regExExecution[1]);
      item[0] = regExExecution[2];
    } else {
      repeat = 1;
    }
    if (item[0] === this.nullValue) {
      if (item.length === 1) {
        item[0] = "";
      } else {
        item.shift();
      }
      ;
    }
    ;
    const stringRegex = `^ *${this.escapeString}(.*)`;
    const escapeStringRegEx = new RegExp(stringRegex, "gm");
    const escapeItem = item.map((element) => {
      return element.replace(escapeStringRegEx, "$1");
    });
    const stringItem = escapeItem.join("\n");
    for (let i = 0; i < repeat; i++) {
      this.items.push(stringItem);
    }
  }
  getSuggestion(noteName) {
    const suggestion = {
      noteName,
      title: this.title,
      description: this.description.split("\n")[0]
    };
    return suggestion;
  }
  notHidden() {
    return !this.hidden;
  }
  pickRandomItem() {
    let randomItem = "";
    if (this.items.length > 0) {
      randomItem = this.items[Math.floor(Math.random() * this.items.length)];
    }
    return randomItem;
  }
  getWarning() {
    return this.warning;
  }
};
var LIRPNote = class {
  constructor(nullValue, escapeString) {
    this.noteName = "";
    this.description = "";
    this.list = [];
    this.error = [];
    this.warning = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
  }
  loadFromNote(noteName, noteContent) {
    this.noteName = noteName;
    const lines = noteContent.split("\n");
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.error.push(`No heading in note`);
      return false;
    }
    if (headingIndexes[0] !== 0) {
      this.description = lines.slice(0, headingIndexes[0]).join("\n");
    }
    const headingCount = headingIndexes.length;
    for (let currentIndex = 0; currentIndex < headingCount - 1; currentIndex++) {
      this.list.push(new LIRPList(lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1]), this.nullValue, this.escapeString));
    }
    this.list.push(new LIRPList(lines.slice(headingIndexes[headingCount - 1]), this.nullValue, this.escapeString));
    return true;
  }
  getListSuggestion() {
    let noteSuggestion;
    noteSuggestion = [];
    this.list.forEach((element) => {
      if (element.notHidden()) {
        noteSuggestion.push(element.getSuggestion(this.noteName));
      }
    });
    return noteSuggestion;
  }
  execMacroSubstitution(item, macroRecursion) {
    const stringMacroRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    const macroRefRegex = new RegExp(stringMacroRefRegex, "mg");
    let match;
    let modifiedItem = item;
    let listTitle = "";
    while ((match = macroRefRegex.exec(modifiedItem)) !== null) {
      let newValue = this.pickRandomItemFromList(match[1], -1);
      listTitle = match[0];
      modifiedItem = modifiedItem.replace(listTitle, newValue);
      macroRefRegex.lastIndex = match.index + newValue.length;
    }
    return {
      lastListTitle: listTitle,
      modifiedItem
    };
  }
  pickRandomItemFromList(listTitle, macroRecursion) {
    let randomItem = "";
    let returnOfExecMacro = {
      lastListTitle: listTitle,
      modifiedItem: ""
    };
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      randomItem = currentList.pickRandomItem();
      for (let repeat = 0; repeat < macroRecursion; repeat++) {
        returnOfExecMacro = this.execMacroSubstitution(randomItem, macroRecursion);
        randomItem = returnOfExecMacro.modifiedItem;
      }
    }
    const stringMacroRefRegex = `{(${this.list.map((element) => element.title).join("|")})}`;
    const macroRefRegex = new RegExp(stringMacroRefRegex);
    if (macroRefRegex.test(randomItem) && macroRecursion !== -1) {
      new import_obsidian.Notice(`Macro depth limit reached in note "${this.noteName}" after calling "${returnOfExecMacro.lastListTitle}"`);
    }
    ;
    return randomItem;
  }
  getError() {
    return this.error;
  }
  getWarning() {
    let allWarning;
    allWarning = [];
    allWarning = allWarning.concat(this.warning);
    this.list.forEach((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    let NoteWarning;
    NoteWarning = [];
    allWarning.forEach(
      (element) => NoteWarning.push(`Warning in note "${this.noteName}" : ${element}`)
    );
    return NoteWarning;
  }
};
var LIRPMultiNote = class {
  constructor(nullValue, escapeString) {
    this.multiNote = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.noteSelected = void 0;
  }
  selectNote(noteName) {
    this.noteSelected = this.multiNote.find((element) => element.noteName === noteName);
    return this.noteSelected !== void 0;
  }
  loadFromNote(noteName, noteContent) {
    const currentNote = new LIRPNote(this.nullValue, this.escapeString);
    const status = currentNote.loadFromNote(noteName, noteContent);
    this.multiNote.push(currentNote);
    return status;
  }
  getListSuggestion() {
    if (this.noteSelected !== void 0) {
      return this.noteSelected.getListSuggestion();
    } else {
      let allListSuggestion = [];
      this.multiNote.map((element) => {
        allListSuggestion = allListSuggestion.concat(element.getListSuggestion());
      });
      return allListSuggestion;
    }
  }
  getNoteSuggestion() {
    let noteSuggestion = [];
    this.multiNote.map((element) => {
      noteSuggestion.push({
        noteName: element.noteName,
        title: element.noteName,
        description: element.description.split("\n")[0]
      });
    });
    return noteSuggestion;
  }
  pickRandomItemFromList(listTitle, macroRecursion) {
    if (this.noteSelected !== void 0) {
      return this.noteSelected.pickRandomItemFromList(listTitle, macroRecursion);
    } else {
      return "";
    }
  }
  pickRandomWithCrossNoteMacro(listTitle, macroRecursion) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    return superNote.pickRandomItemFromList(listTitle, macroRecursion);
  }
  getError() {
    if (this.noteSelected !== void 0) {
      return this.noteSelected.getError();
    } else {
      let allError = [];
      this.multiNote.map((element) => {
        allError = allError.concat(element.getError());
      });
      return allError;
    }
  }
  getWarning() {
    if (this.noteSelected !== void 0) {
      return this.noteSelected.getWarning();
    } else {
      let allWarning = [];
      this.multiNote.map((element) => {
        allWarning = allWarning.concat(element.getError());
      });
      return allWarning;
    }
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items.filter(
      (item) => item.title.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    el.createEl("small", { text: item.description });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.doTheJob(this.settings.notePath);
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.doTheJob(this.settings.notePath);
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  async doTheJob(fullNotePath) {
    const currentLIRP = new LIRPMultiNote(this.settings.nullValue, this.settings.escapeValue);
    let fileSystemObject = this.app.vault.getAbstractFileByPath(fullNotePath);
    if (fileSystemObject instanceof import_obsidian.TFolder) {
      let loadWithoutError = true;
      for (const currentFSObject of fileSystemObject.children) {
        if (currentFSObject.path.endsWith(".md")) {
          const currentFile = this.app.vault.getAbstractFileByPath(currentFSObject.path);
          if (currentFile instanceof import_obsidian.TFile) {
            const content = await this.app.vault.cachedRead(currentFile);
            loadWithoutError = loadWithoutError && currentLIRP.loadFromNote(currentFSObject.path.slice(0, -3), content);
          }
        }
      }
      if (!loadWithoutError) {
        currentLIRP.getError().map((element) => {
          new import_obsidian.Notice(element);
        });
        return;
      }
      if (this.settings.showWarning) {
        currentLIRP.getWarning().forEach((element) => {
          new import_obsidian.Notice(element);
        });
      }
      ;
      if (this.settings.showNoteSelector) {
        new LIRPSuggestModal(this.app, currentLIRP.getNoteSuggestion(), (item) => {
          currentLIRP.selectNote(item.title);
          new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(), (item2) => {
            this.workWithTitle(currentLIRP, item2.title);
          }).open();
        }).open();
      } else {
        new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(), (item) => {
          currentLIRP.selectNote(item.noteName);
          this.workWithTitle(currentLIRP, item.title);
        }).open();
      }
    } else {
      fileSystemObject = this.app.vault.getAbstractFileByPath(fullNotePath + ".md");
      if (fileSystemObject instanceof import_obsidian.TFile) {
        const content = await this.app.vault.cachedRead(fileSystemObject);
        const loadSuccess = currentLIRP.loadFromNote(this.settings.notePath, content);
        if (!loadSuccess) {
          currentLIRP.getError().forEach((element) => new import_obsidian.Notice(element));
          return;
        }
        currentLIRP.selectNote(this.settings.notePath);
        if (this.settings.showWarning) {
          currentLIRP.getWarning().forEach((element) => {
            new import_obsidian.Notice(element);
          });
        }
        ;
        new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(), (item) => {
          this.workWithTitle(currentLIRP, item.title);
        }).open();
      } else {
        new import_obsidian.Notice('Error : check settings "Path " in plugin List Item Random Picker !');
        return;
      }
      ;
    }
    ;
  }
  workWithTitle(Note, listTitle) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selectionForNotificationRegex = `^${this.settings.selectionForNotification}$`;
      const noticeRegex = new RegExp(selectionForNotificationRegex);
      const editor = activeView.editor;
      const selection = editor.getSelection();
      if (noticeRegex.test(selection)) {
        new import_obsidian.Notice(Note.pickRandomItemFromList(listTitle, this.settings.maxMacroDepth));
        if (this.settings.deleteSelectionForNotification) {
          editor.replaceSelection("");
        }
      } else {
        let stringToInsert = "";
        const repeatInsertRegEx = /^(\d+)(.*)/gm;
        let regExExecution;
        let repeat;
        if ((regExExecution = repeatInsertRegEx.exec(selection)) !== null) {
          const repeat2 = Number(regExExecution[1]);
          const delimiter = selection.replace(/^\d+/, "");
          const arrayStringToinsert = [];
          for (let i = 0; i < repeat2; i++) {
            arrayStringToinsert.push(Note.pickRandomItemFromList(listTitle, this.settings.maxMacroDepth));
          }
          stringToInsert = arrayStringToinsert.join(delimiter);
        } else {
          stringToInsert = Note.pickRandomItemFromList(listTitle, this.settings.maxMacroDepth);
        }
        editor.replaceSelection(stringToInsert);
      }
      ;
    } else {
      new import_obsidian.Notice("No active Markdown editor found.");
    }
    ;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Note Path").setDesc('The path and filename of the note that contains the lists to be used. Exemple : "Folder/Note".').addText(
      (text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
        this.plugin.settings.notePath = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Show warning").setDesc("Display the warnings of notes and lists, if any. Warnings for macro depth limit reached are always displayed.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showWarning);
      toggle.onChange(async (value) => {
        this.plugin.settings.showWarning = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Macro depth limit").setDesc("Macro recursion limit: how many nested macro calls are allowed. Zero prevents nested macros from being resolved.").addSlider(
      (slider) => slider.setValue(this.plugin.settings.maxMacroDepth).setLimits(0, 10, 1).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxMacroDepth = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Null value").setDesc("If the first line of an item has this value, the line is flush.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.nullValue).onChange(async (value) => {
        this.plugin.settings.nullValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Escape value").setDesc("If you want some headin one or first level list item in your item, you could escape them with these value").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.escapeValue).onChange(async (value) => {
        this.plugin.settings.escapeValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Selection value for notification").setDesc("If the text selected has this value, the item is not inserted, but notified !").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.selectionForNotification).onChange(async (value) => {
        this.plugin.settings.selectionForNotification = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Delete selection value for notification").setDesc("If set, the selected value for notification is deleted.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deleteSelectionForNotification);
      toggle.onChange(async (value) => {
        this.plugin.settings.deleteSelectionForNotification = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Show note selector").setDesc("If path is a folder").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteSelector);
      toggle.onChange(async (value) => {
        this.plugin.settings.showNoteSelector = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVEZvbGRlciwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XG5cbmZ1bmN0aW9uIGZpbmRJbmRleGVzPFQ+KGFuQXJyYXk6IFRbXSwgcHJlZGljYXRlOiAoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGFuQXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZWxlbWVudCwgaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ZXM7XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cmluZ1RvRXNjYXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzdHJpbmdUb0VzY2FwZS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xufVxuaW50ZXJmYWNlIExJUlBQbHVnaW5TZXR0aW5ncyB7XG4gICAgbm90ZVBhdGg6IHN0cmluZztcbiAgICBzaG93V2FybmluZzogYm9vbGVhbjtcbiAgICBtYXhNYWNyb0RlcHRoOiBudW1iZXI7XG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBib29sZWFuO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVZhbHVlOiBzdHJpbmc7XG4gICAgc2hvd05vdGVTZWxlY3RvcjogYm9vbGVhbjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTElSUFBsdWdpblNldHRpbmdzID0ge1xuICAgIG5vdGVQYXRoOiAnRnVsbCBwYXRoIG9mIGEgbm90ZScsXG4gICAgc2hvd1dhcm5pbmc6IHRydWUsXG4gICAgbWF4TWFjcm9EZXB0aDogMSxcbiAgICBzZWxlY3Rpb25Gb3JOb3RpZmljYXRpb246ICchJyxcbiAgICBkZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb246IGZhbHNlLFxuICAgIG51bGxWYWx1ZTogJ251bGwnLFxuICAgIGVzY2FwZVZhbHVlOiAnLy8nLFxuICAgIHNob3dOb3RlU2VsZWN0b3I6IHRydWUsXG59O1xuXG5pbnRlcmZhY2UgTElSUExpc3RJbnRlcmZhY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBpdGVtczogc3RyaW5nW107XG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U7XG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW47XG4gICAgcGlja1JhbmRvbUl0ZW0oKTogc3RyaW5nO1xuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW107XG59XG5cbmNsYXNzIExJUlBMaXN0IGltcGxlbWVudHMgTElSUExpc3RJbnRlcmZhY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBoaWRkZW46IGJvb2xlYW47XG4gICAgaXRlbXM6IHN0cmluZ1tdO1xuICAgIHdhcm5pbmc6IHN0cmluZ1tdO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVN0cmluZzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IobGluZXM6IHN0cmluZ1tdLCBudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMud2FybmluZyA9IFtdO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG5cbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ0V4ID0gL14jICsoLispJC87XG4gICAgICAgIHRoaXMudGl0bGUgPSBsaW5lc1swXS5yZXBsYWNlKGhlYWRpbmdSZWdFeCwgXCIkMVwiKTtcbiAgICAgICAgY29uc3QgaXRhbGljSGVhZGluZ1JlZ2V4ID0gL14oX3xcXCopXFxTLztcbiAgICAgICAgaWYgKGl0YWxpY0hlYWRpbmdSZWdleC50ZXN0KHRoaXMudGl0bGUpKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnNoaWZ0KCk7XG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkl0ZW1SZWdleCA9IC9eKC18XFxkK1xcLikgKyguKykkLztcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gbGlzdEJlZ2luSXRlbVJlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMud2FybmluZy5wdXNoKGBObyBpdGVtcyBpbiBsaXN0ICR7dGhpcy50aXRsZX1gKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGVhbkxpbmVzID0gbGluZXMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5yZXBsYWNlKGxpc3RCZWdpbkl0ZW1SZWdleCwgXCIkMlwiKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGxpc3RCZWdpbkluZGV4ZXNbMF0gIT09IDApIHtcbiAgICAgICAgICAgIGxldCBtZERlc2NyaXB0aW9uID0gY2xlYW5MaW5lcy5zbGljZSgwLCBsaXN0QmVnaW5JbmRleGVzWzBdKTtcbiAgICAgICAgICAgIC8vIHRha2luZyBjYXJlIG9mIE1EMDIyXG4gICAgICAgICAgICAvLyAgIE1EMDIyL2JsYW5rcy1hcm91bmQtaGVhZGluZ3M6IEhlYWRpbmdzIHNob3VsZCBiZSBzdXJyb3VuZGVkIGJ5IGJsYW5rIGxpbmVzXG4gICAgICAgICAgICBpZiAobWREZXNjcmlwdGlvblswXSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIG1kRGVzY3JpcHRpb24uc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRha2luZyBjYXJlIG9mIE1EMDMyXG4gICAgICAgICAgICAvLyAgIE1EMDMyL2JsYW5rcy1hcm91bmQtbGlzdHM6IExpc3RzIHNob3VsZCBiZSBzdXJyb3VuZGVkIGJ5IGJsYW5rIGxpbmVzXG4gICAgICAgICAgICAvLyBEdWUgdG8gc3BsaXQgb24gJ1xcbicsIHRoZSBzbGljZSwgYW5kIGF0IGxlYXN0IGEgam9pbiBvbiAnXFxuJyB0aGUgbGFzdCAnXFxuJyBpcyBhbHdheXMgbG9zdCAhXG4gICAgICAgICAgICAvLyBTbyB0aGUgZm9sb3dpbmcgY29kZSBpcyB1c2VsZXNzXG4gICAgICAgICAgICAvLyBpZiAobWREZXNjcmlwdGlvbi5hdCgtMSkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIC8vICAgICBtZERlc2NyaXB0aW9uLnBvcCgpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IG1kRGVzY3JpcHRpb24uam9pbignXFxuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkNvdW50ID0gbGlzdEJlZ2luSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgbGV0IGl0ZW06IHN0cmluZ1tdO1xuICAgICAgICBmb3IgKGxldCBjdXJyZW50SW5kZXggPSAwOyBjdXJyZW50SW5kZXggPCAobGlzdEJlZ2luQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2N1cnJlbnRJbmRleF0sIGxpc3RCZWdpbkluZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pKTtcbiAgICAgICAgICAgIHRoaXMucHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2xpc3RCZWdpbkNvdW50IC0gMV0pKTtcbiAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICBpZiAoaXRlbS5hdCgtMSkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGl0ZW0ucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdXNoSXRlbUJhc2VkT25XZWlnaHQoaXRlbSk7XG4gICAgfVxuXG4gICAgcHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW06IHN0cmluZ1tdKSA6IHZvaWQge1xuICAgICAgICBjb25zdCBJdGVtV2l0aFdlaWdodFJlZ0V4ID0gL15cXCgoXFxkKylcXClcXHMrKC4rKSQvO1xuICAgICAgICBsZXQgcmVnRXhFeGVjdXRpb247XG4gICAgICAgIGxldCByZXBlYXQ6IG51bWJlcjtcbiAgICAgICAgaWYgKChyZWdFeEV4ZWN1dGlvbiA9IEl0ZW1XaXRoV2VpZ2h0UmVnRXguZXhlYyhpdGVtWzBdKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcGVhdCA9IE51bWJlcihyZWdFeEV4ZWN1dGlvblsxXSk7XG4gICAgICAgICAgICBpdGVtWzBdID0gcmVnRXhFeGVjdXRpb25bMl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXBlYXQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtWzBdID09PSB0aGlzLm51bGxWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgaXRlbVswXSA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2hpZnQoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVnZXggPSBgXiAqJHt0aGlzLmVzY2FwZVN0cmluZ30oLiopYDtcbiAgICAgICAgY29uc3QgZXNjYXBlU3RyaW5nUmVnRXggPSBuZXcgUmVnRXhwKHN0cmluZ1JlZ2V4LCAnZ20nKTtcbiAgICAgICAgY29uc3QgZXNjYXBlSXRlbSA9IGl0ZW0ubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5yZXBsYWNlKGVzY2FwZVN0cmluZ1JlZ0V4LCAnJDEnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHN0cmluZ0l0ZW0gPSBlc2NhcGVJdGVtLmpvaW4oJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goc3RyaW5nSXRlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2Uge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0ge1xuICAgICAgICAgICAgbm90ZU5hbWU6IG5vdGVOYW1lLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogKHRoaXMuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbjtcbiAgICB9O1xuXG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuaGlkZGVuO1xuICAgIH1cblxuICAgIHBpY2tSYW5kb21JdGVtKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCByYW5kb21JdGVtOiBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gdGhpcy5pdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLml0ZW1zLmxlbmd0aCldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYW5kb21JdGVtO1xuICAgIH1cblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy53YXJuaW5nO1xuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgTElSUEV4ZWNNYWNyb0ludGVyZmFjZSB7XG4gICAgbGFzdExpc3RUaXRsZTogc3RyaW5nO1xuICAgIG1vZGlmaWVkSXRlbTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIGxvYWRGcm9tTm90ZShub3RlTmFtZTogc3RyaW5nLCBub3RlQ29udGVudDogc3RyaW5nKTogYm9vbGVhbjtcbiAgICBnZXRMaXN0U3VnZ2VzdGlvbigpOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdO1xuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIG1hY3JvUmVjdXJzaW9uOiBudW1iZXIpOiBzdHJpbmc7IFxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdO1xuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW107XG59XG5cbmNsYXNzIExJUlBOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIG5vdGVOYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBsaXN0OiBMSVJQTGlzdFtdO1xuICAgIGVycm9yOiBzdHJpbmdbXTtcbiAgICB3YXJuaW5nOiBzdHJpbmdbXTtcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yIChudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5ub3RlTmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgICAgICB0aGlzLmxpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5lcnJvciA9IFtdO1xuICAgICAgICB0aGlzLndhcm5pbmcgPSBbXTtcbiAgICAgICAgdGhpcy5udWxsVmFsdWUgPSBudWxsVmFsdWU7XG4gICAgICAgIHRoaXMuZXNjYXBlU3RyaW5nID0gZXNjYXBlU3RyaW5nO1xuICAgIH1cblxuICAgIGxvYWRGcm9tTm90ZShub3RlTmFtZTogc3RyaW5nLCBub3RlQ29udGVudDogc3RyaW5nLCApOiBib29sZWFuIHtcbiAgICAgICAgdGhpcy5ub3RlTmFtZSA9IG5vdGVOYW1lO1xuICAgICAgICBjb25zdCBsaW5lcyA9IG5vdGVDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ2V4ID0gL14jIC4rJC87XG4gICAgICAgIGxldCBoZWFkaW5nSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gaGVhZGluZ1JlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAoaGVhZGluZ0luZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLnB1c2goYE5vIGhlYWRpbmcgaW4gbm90ZWApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkaW5nSW5kZXhlc1swXSAhPT0gMCkge1xuICAgICAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgICAgIC8vICAgTUQwMjIvYmxhbmtzLWFyb3VuZC1oZWFkaW5nczogSGVhZGluZ3Mgc2hvdWxkIGJlIHN1cnJvdW5kZWQgYnkgYmxhbmsgbGluZXNcbiAgICAgICAgICAgIC8vIER1ZSB0byBzcGxpdCBvbiAnXFxuJywgdGhlIHNsaWNlLCBhbmQgYXQgbGVhc3QgYSBqb2luIG9uICdcXG4nIHRoZSBsYXN0ICdcXG4nIGlzIGFsd2F5cyBsb3N0ICFcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBsaW5lcy5zbGljZSgwLCBoZWFkaW5nSW5kZXhlc1swXSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGluZ0NvdW50ID0gaGVhZGluZ0luZGV4ZXMubGVuZ3RoXG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRJbmRleCA9IDA7IGN1cnJlbnRJbmRleCA8IChoZWFkaW5nQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKG5ldyBMSVJQTGlzdChsaW5lcy5zbGljZShoZWFkaW5nSW5kZXhlc1tjdXJyZW50SW5kZXhdLCBoZWFkaW5nSW5kZXhlc1tjdXJyZW50SW5kZXggKyAxXSksIHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdC5wdXNoKG5ldyBMSVJQTGlzdChsaW5lcy5zbGljZShoZWFkaW5nSW5kZXhlc1toZWFkaW5nQ291bnQgLSAxXSksIHRoaXMubnVsbFZhbHVlLCB0aGlzLmVzY2FwZVN0cmluZykpO1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGdldExpc3RTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICBsZXQgbm90ZVN1Z2dlc3Rpb246IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW107XG4gICAgICAgIG5vdGVTdWdnZXN0aW9uID0gW107XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5ub3RIaWRkZW4oKSkge1xuICAgICAgICAgICAgICAgIG5vdGVTdWdnZXN0aW9uLnB1c2goZWxlbWVudC5nZXRTdWdnZXN0aW9uKHRoaXMubm90ZU5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub3RlU3VnZ2VzdGlvbjtcbiAgICB9XG5cbiAgICBleGVjTWFjcm9TdWJzdGl0dXRpb24oaXRlbTogc3RyaW5nLCBtYWNyb1JlY3Vyc2lvbjogbnVtYmVyKTogTElSUEV4ZWNNYWNyb0ludGVyZmFjZSB7XG4gICAgICAgIGNvbnN0IHN0cmluZ01hY3JvUmVmUmVnZXg6IHN0cmluZyA9IGBcXHsoJHt0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiBlc2NhcGVSZWdleChlbGVtZW50LnRpdGxlKSkuam9pbignfCcpfSlcXH1gO1xuICAgICAgICBjb25zdCBtYWNyb1JlZlJlZ2V4ID0gbmV3IFJlZ0V4cCAoc3RyaW5nTWFjcm9SZWZSZWdleCwnbWcnKTtcbiAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICBsZXQgbW9kaWZpZWRJdGVtOnN0cmluZyA9IGl0ZW07XG4gICAgICAgIGxldCBsaXN0VGl0bGU6c3RyaW5nID0gXCJcIjtcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IG1hY3JvUmVmUmVnZXguZXhlYyhtb2RpZmllZEl0ZW0pKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IG5ld1ZhbHVlOiBzdHJpbmcgPSB0aGlzLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobWF0Y2hbMV0sIC0xKTsgXG4gICAgICAgICAgICBsaXN0VGl0bGUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgIG1vZGlmaWVkSXRlbSA9IG1vZGlmaWVkSXRlbS5yZXBsYWNlKGxpc3RUaXRsZSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgbWFjcm9SZWZSZWdleC5sYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG5ld1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGFzdExpc3RUaXRsZTogbGlzdFRpdGxlLFxuICAgICAgICAgICAgbW9kaWZpZWRJdGVtOiBtb2RpZmllZEl0ZW0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGU6IHN0cmluZywgbWFjcm9SZWN1cnNpb246IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCByYW5kb21JdGVtOiBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBsZXQgcmV0dXJuT2ZFeGVjTWFjcm86IExJUlBFeGVjTWFjcm9JbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZEl0ZW06IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gdGhpcy5saXN0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQudGl0bGUgPT09IGxpc3RUaXRsZSk7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gY3VycmVudExpc3QucGlja1JhbmRvbUl0ZW0oKTtcbiAgICAgICAgICAgIGZvciAobGV0IHJlcGVhdCA9IDA7IHJlcGVhdCA8IG1hY3JvUmVjdXJzaW9uOyByZXBlYXQrKykge1xuICAgICAgICAgICAgICAgIHJldHVybk9mRXhlY01hY3JvID0gdGhpcy5leGVjTWFjcm9TdWJzdGl0dXRpb24ocmFuZG9tSXRlbSwgbWFjcm9SZWN1cnNpb24pO1xuICAgICAgICAgICAgICAgIHJhbmRvbUl0ZW0gPSByZXR1cm5PZkV4ZWNNYWNyby5tb2RpZmllZEl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RyaW5nTWFjcm9SZWZSZWdleDogc3RyaW5nID0gYFxceygke3RoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IGVsZW1lbnQudGl0bGUpLmpvaW4oJ3wnKX0pXFx9YDtcbiAgICAgICAgY29uc3QgbWFjcm9SZWZSZWdleCA9IG5ldyBSZWdFeHAgKHN0cmluZ01hY3JvUmVmUmVnZXgpO1xuICAgICAgICBpZiAobWFjcm9SZWZSZWdleC50ZXN0KHJhbmRvbUl0ZW0pICYmIG1hY3JvUmVjdXJzaW9uICE9PSAtMSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTWFjcm8gZGVwdGggbGltaXQgcmVhY2hlZCBpbiBub3RlIFwiJHt0aGlzLm5vdGVOYW1lfVwiIGFmdGVyIGNhbGxpbmcgXCIke3JldHVybk9mRXhlY01hY3JvLmxhc3RMaXN0VGl0bGV9XCJgKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJhbmRvbUl0ZW07XG4gICAgfSBcblxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3I7XG4gICAgfTtcblxuICAgIGdldFdhcm5pbmcoKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgYWxsV2FybmluZzogc3RyaW5nW107XG4gICAgICAgIGFsbFdhcm5pbmcgPSBbXTtcbiAgICAgICAgYWxsV2FybmluZyA9IGFsbFdhcm5pbmcuY29uY2F0KHRoaXMud2FybmluZyk7XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhbGxXYXJuaW5nID0gYWxsV2FybmluZy5jb25jYXQoZWxlbWVudC5nZXRXYXJuaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IE5vdGVXYXJuaW5nOiBzdHJpbmdbXTtcbiAgICAgICAgTm90ZVdhcm5pbmcgPSBbXTtcbiAgICAgICAgYWxsV2FybmluZy5mb3JFYWNoKChlbGVtZW50KSA9PiBcbiAgICAgICAgICAgIE5vdGVXYXJuaW5nLnB1c2goYFdhcm5pbmcgaW4gbm90ZSBcIiR7dGhpcy5ub3RlTmFtZX1cIiA6ICR7ZWxlbWVudH1gKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gTm90ZVdhcm5pbmc7XG4gICAgfTtcblxufVxuXG5jbGFzcyBMSVJQTXVsdGlOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIG11bHRpTm90ZTogTElSUE5vdGVbXTtcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcbiAgICBub3RlU2VsZWN0ZWQ6IExJUlBOb3RlfHVuZGVmaW5lZDtcblxuICAgIGNvbnN0cnVjdG9yIChudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUgPSBbXTtcbiAgICAgICAgdGhpcy5udWxsVmFsdWUgPSBudWxsVmFsdWU7XG4gICAgICAgIHRoaXMuZXNjYXBlU3RyaW5nID0gZXNjYXBlU3RyaW5nO1xuICAgICAgICB0aGlzLm5vdGVTZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgc2VsZWN0Tm90ZShub3RlTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMubm90ZVNlbGVjdGVkID0gdGhpcy5tdWx0aU5vdGUuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5ub3RlTmFtZSA9PT0gbm90ZU5hbWUpO1xuICAgICAgICByZXR1cm4gKHRoaXMubm90ZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpO1xuICAgIH07XG5cbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBjdXJyZW50Tm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcpO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBjdXJyZW50Tm90ZS5sb2FkRnJvbU5vdGUobm90ZU5hbWUsIG5vdGVDb250ZW50KTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUucHVzaChjdXJyZW50Tm90ZSk7XG4gICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfTtcblxuICAgIGdldExpc3RTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICBpZiAodGhpcy5ub3RlU2VsZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90ZVNlbGVjdGVkLmdldExpc3RTdWdnZXN0aW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgYWxsTGlzdFN1Z2dlc3Rpb246IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10gPSBbXTtcbiAgICAgICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsbExpc3RTdWdnZXN0aW9uID0gYWxsTGlzdFN1Z2dlc3Rpb24uY29uY2F0KGVsZW1lbnQuZ2V0TGlzdFN1Z2dlc3Rpb24oKSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFsbExpc3RTdWdnZXN0aW9uO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGdldE5vdGVTdWdnZXN0aW9uKCk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICBsZXQgbm90ZVN1Z2dlc3Rpb246IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10gPSBbXTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBub3RlU3VnZ2VzdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICBub3RlTmFtZTogZWxlbWVudC5ub3RlTmFtZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogZWxlbWVudC5ub3RlTmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGVsZW1lbnQuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vdGVTdWdnZXN0aW9uO1xuICAgIH07XG4gICAgXG4gICAgcGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGU6IHN0cmluZywgbWFjcm9SZWN1cnNpb246IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLm5vdGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RlU2VsZWN0ZWQucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUsIG1hY3JvUmVjdXJzaW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfTsgXG5cbiAgICBwaWNrUmFuZG9tV2l0aENyb3NzTm90ZU1hY3JvKGxpc3RUaXRsZTogc3RyaW5nLCBtYWNyb1JlY3Vyc2lvbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN1cGVyTm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHN1cGVyTm90ZS5saXN0ID0gc3VwZXJOb3RlLmxpc3QuY29uY2F0KGVsZW1lbnQubGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3VwZXJOb3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlLCBtYWNyb1JlY3Vyc2lvbik7XG4gICAgfTtcblxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgaWYgKHRoaXMubm90ZVNlbGVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGVTZWxlY3RlZC5nZXRFcnJvcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGFsbEVycm9yOnN0cmluZ1tdID0gW107XG4gICAgICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBhbGxFcnJvciA9IGFsbEVycm9yLmNvbmNhdChlbGVtZW50LmdldEVycm9yKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYWxsRXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGlmICh0aGlzLm5vdGVTZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RlU2VsZWN0ZWQuZ2V0V2FybmluZygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGFsbFdhcm5pbmc6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsbFdhcm5pbmcgPSBhbGxXYXJuaW5nLmNvbmNhdChlbGVtZW50LmdldEVycm9yKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYWxsV2FybmluZztcbiAgICAgICAgfVxuICAgIH07XG5cblxufTtcblxuaW50ZXJmYWNlIExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIExJUlBTdWdnZXN0TW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8TElSUFN1Z2dlc3Rpb25JbnRlcmZhY2U+IHtcbiAgICBpdGVtczogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2VbXTtcbiAgICBjYWxsYmFjazogKHZhbHVlOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSkgPT4gdm9pZDtcbiAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGl0ZW1zOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdLCBjYWxsYmFjazogKHZhbHVlOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSkgPT4gdm9pZCkge1xuICAgICAgc3VwZXIoYXBwKTtcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2VbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0udGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIFxuICAgIHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UsIGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBlbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBpdGVtLnRpdGxlIH0pO1xuICAgICAgICBlbC5jcmVhdGVFbCgnc21hbGwnLCB7dGV4dDogaXRlbS5kZXNjcmlwdGlvbn0pO1xuICAgICAgfVxuICBcbiAgICAgIG9uQ2hvb3NlU3VnZ2VzdGlvbihpdGVtOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrKGl0ZW0pO1xuICAgICAgfX1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdEl0ZW1SYW5kb21QaWNrZXIgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBMSVJQUGx1Z2luU2V0dGluZ3M7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdsaXN0LXRyZWUnLCAnUGljayByYW5kb20gbGlzdCBpdGVtJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb1RoZUpvYih0aGlzLnNldHRpbmdzLm5vdGVQYXRoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LXJhbmRvbS1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgcmFuZG9tIGl0ZW0gZnJvbSBsaXN0JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb1RoZUpvYih0aGlzLnNldHRpbmdzLm5vdGVQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBMSVJQU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuXG4gICAgfVxuXG4gICAgYXN5bmMgZG9UaGVKb2IoZnVsbE5vdGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgY3VycmVudExJUlAgPSBuZXcgTElSUE11bHRpTm90ZSh0aGlzLnNldHRpbmdzLm51bGxWYWx1ZSwgdGhpcy5zZXR0aW5ncy5lc2NhcGVWYWx1ZSk7XG5cbiAgICAgICAgbGV0IGZpbGVTeXN0ZW1PYmplY3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbE5vdGVQYXRoKTtcbiAgICAgICAgaWYgKGZpbGVTeXN0ZW1PYmplY3QgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICBsZXQgbG9hZFdpdGhvdXRFcnJvcjpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VycmVudEZTT2JqZWN0IG9mIGZpbGVTeXN0ZW1PYmplY3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZTT2JqZWN0LnBhdGguZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3VycmVudEZTT2JqZWN0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoY3VycmVudEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFdpdGhvdXRFcnJvciA9ICBsb2FkV2l0aG91dEVycm9yICYmIGN1cnJlbnRMSVJQLmxvYWRGcm9tTm90ZShjdXJyZW50RlNPYmplY3QucGF0aC5zbGljZSgwLCAtMyksIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFsb2FkV2l0aG91dEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0RXJyb3IoKS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dXYXJuaW5nKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0V2FybmluZygpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd05vdGVTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXROb3RlU3VnZ2VzdGlvbigpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TElSUC5zZWxlY3ROb3RlKGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya1dpdGhUaXRsZShjdXJyZW50TElSUCwgaXRlbS50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXRMaXN0U3VnZ2VzdGlvbigpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TElSUC5zZWxlY3ROb3RlKGl0ZW0ubm90ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1PYmplY3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbE5vdGVQYXRoICsgJy5tZCcpO1xuICAgICAgICAgICAgaWYgKGZpbGVTeXN0ZW1PYmplY3QgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGVTeXN0ZW1PYmplY3QpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRTdWNjZXNzID0gY3VycmVudExJUlAubG9hZEZyb21Ob3RlKHRoaXMuc2V0dGluZ3Mubm90ZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGlmICghbG9hZFN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0RXJyb3IoKS5mb3JFYWNoKChlbGVtZW50KSA9PiBuZXcgTm90aWNlKGVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRMSVJQLnNlbGVjdE5vdGUodGhpcy5zZXR0aW5ncy5ub3RlUGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd1dhcm5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExJUlAuZ2V0V2FybmluZygpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXRMaXN0U3VnZ2VzdGlvbigpLCAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtXaXRoVGl0bGUoY3VycmVudExJUlAsIGl0ZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgOiBjaGVjayBzZXR0aW5ncyBcIlBhdGggXCIgaW4gcGx1Z2luIExpc3QgSXRlbSBSYW5kb20gUGlja2VyICEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHdvcmtXaXRoVGl0bGUoTm90ZTogTElSUE5vdGVJbnRlcmZhY2UsIGxpc3RUaXRsZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblxuICAgICAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25Gb3JOb3RpZmljYXRpb25SZWdleDpzdHJpbmcgPSBgXiR7dGhpcy5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb259JGA7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm90aWNlUmVnZXggPSBuZXcgUmVnRXhwKHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvblJlZ2V4KTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5vdGljZVJlZ2V4LnRlc3Qoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKE5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUsIHRoaXMuc2V0dGluZ3MubWF4TWFjcm9EZXB0aCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHJpbmdUb0luc2VydDogc3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdEluc2VydFJlZ0V4ID0gL14oXFxkKykoLiopL2dtO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVnRXhFeGVjdXRpb247XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXBlYXQ6IG51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChyZWdFeEV4ZWN1dGlvbiA9IHJlcGVhdEluc2VydFJlZ0V4LmV4ZWMoc2VsZWN0aW9uKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdCA9IE51bWJlcihyZWdFeEV4ZWN1dGlvblsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxpbWl0ZXIgPSBzZWxlY3Rpb24ucmVwbGFjZSgvXlxcZCsvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheVN0cmluZ1RvaW5zZXJ0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBlYXQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5U3RyaW5nVG9pbnNlcnQucHVzaChOb3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlLCB0aGlzLnNldHRpbmdzLm1heE1hY3JvRGVwdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ1RvSW5zZXJ0ID0gYXJyYXlTdHJpbmdUb2luc2VydC5qb2luKGRlbGltaXRlcik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdUb0luc2VydCA9IE5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUsIHRoaXMuc2V0dGluZ3MubWF4TWFjcm9EZXB0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oc3RyaW5nVG9JbnNlcnQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgTWFya2Rvd24gZWRpdG9yIGZvdW5kLlwiKTtcbiAgICAgICAgICAgIH07XG4gICAgfTtcblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn1cblxuY2xhc3MgTElSUFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IExpc3RJdGVtUmFuZG9tUGlja2VyO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlzdEl0ZW1SYW5kb21QaWNrZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05vdGUgUGF0aCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHBhdGggYW5kIGZpbGVuYW1lIG9mIHRoZSBub3RlIHRoYXQgY29udGFpbnMgdGhlIGxpc3RzIHRvIGJlIHVzZWQuIEV4ZW1wbGUgOiBcIkZvbGRlci9Ob3RlXCIuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIHBhdGggdG8geW91ciBub3RlJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGgpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlUGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IHdhcm5pbmcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Rpc3BsYXkgdGhlIHdhcm5pbmdzIG9mIG5vdGVzIGFuZCBsaXN0cywgaWYgYW55LiBXYXJuaW5ncyBmb3IgbWFjcm8gZGVwdGggbGltaXQgcmVhY2hlZCBhcmUgYWx3YXlzIGRpc3BsYXllZC4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXYXJuaW5nKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dXYXJuaW5nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdNYWNybyBkZXB0aCBsaW1pdCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnTWFjcm8gcmVjdXJzaW9uIGxpbWl0OiBob3cgbWFueSBuZXN0ZWQgbWFjcm8gY2FsbHMgYXJlIGFsbG93ZWQuIFplcm8gcHJldmVudHMgbmVzdGVkIG1hY3JvcyBmcm9tIGJlaW5nIHJlc29sdmVkLicpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+XG4gICAgICAgICAgICAgICAgc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhNYWNyb0RlcHRoKVxuICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEwLCAxKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heE1hY3JvRGVwdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ051bGwgdmFsdWUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHRoZSBmaXJzdCBsaW5lIG9mIGFuIGl0ZW0gaGFzIHRoaXMgdmFsdWUsIHRoZSBsaW5lIGlzIGZsdXNoLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubnVsbFZhbHVlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubnVsbFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0VzY2FwZSB2YWx1ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgeW91IHdhbnQgc29tZSBoZWFkaW4gb25lIG9yIGZpcnN0IGxldmVsIGxpc3QgaXRlbSBpbiB5b3VyIGl0ZW0sIHlvdSBjb3VsZCBlc2NhcGUgdGhlbSB3aXRoIHRoZXNlIHZhbHVlJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdmFsdWUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lc2NhcGVWYWx1ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZVZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1NlbGVjdGlvbiB2YWx1ZSBmb3Igbm90aWZpY2F0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiB0aGUgdGV4dCBzZWxlY3RlZCBoYXMgdGhpcyB2YWx1ZSwgdGhlIGl0ZW0gaXMgbm90IGluc2VydGVkLCBidXQgbm90aWZpZWQgIScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlbGV0ZSBzZWxlY3Rpb24gdmFsdWUgZm9yIG5vdGlmaWNhdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSWYgc2V0LCB0aGUgc2VsZWN0ZWQgdmFsdWUgZm9yIG5vdGlmaWNhdGlvbiBpcyBkZWxldGVkLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2hvdyBub3RlIHNlbGVjdG9yJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiBwYXRoIGlzIGEgZm9sZGVyJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dOb3RlU2VsZWN0b3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLHNCQUEwRztBQUUxRyxTQUFTLFlBQWUsU0FBYyxXQUE2RDtBQUMvRixRQUFNLFVBQW9CLENBQUM7QUFDM0IsVUFBUSxRQUFRLENBQUMsU0FBUyxV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QWE7QUFBQSxNQUMvQixDQUFDO0FBQUEsSUFDVDtBQUVKLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLFlBQVksRUFDcEIsUUFBUSxpRUFBaUUsRUFDekU7QUFBQSxNQUFRLFVBQVEsS0FDWixlQUFlLGFBQWEsRUFDNUIsU0FBUyxLQUFLLE9BQU8sU0FBUyxTQUFTLEVBQ3ZDLFNBQVMsT0FBTyxVQUFVO0FBQ3ZCLGFBQUssT0FBTyxTQUFTLFlBQVk7QUFDakMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ25DLENBQUM7QUFBQSxJQUNMO0FBRUosUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsY0FBYyxFQUN0QixRQUFRLDJHQUEyRyxFQUNuSDtBQUFBLE1BQVEsVUFBUSxLQUNaLGVBQWUsYUFBYSxFQUM1QixTQUFTLEtBQUssT0FBTyxTQUFTLFdBQVcsRUFDekMsU0FBUyxPQUFPLFVBQVU7QUFDdkIsYUFBSyxPQUFPLFNBQVMsY0FBYztBQUNuQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ0w7QUFFSixRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxrQ0FBa0MsRUFDMUMsUUFBUSwrRUFBK0UsRUFDdkY7QUFBQSxNQUFRLFVBQVEsS0FDWixlQUFlLGFBQWEsRUFDNUIsU0FBUyxLQUFLLE9BQU8sU0FBUyx3QkFBd0IsRUFDdEQsU0FBUyxPQUFPLFVBQVU7QUFDdkIsYUFBSyxPQUFPLFNBQVMsMkJBQTJCO0FBQ2hELGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNuQyxDQUFDO0FBQUEsSUFDTDtBQUVKLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLHlDQUF5QyxFQUNqRCxRQUFRLHlEQUF5RCxFQUNqRSxVQUFVLENBQUMsV0FBVztBQUNuQixhQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsOEJBQThCO0FBQ25FLGFBQU8sU0FBUyxPQUFPLFVBQVU7QUFDN0IsYUFBSyxPQUFPLFNBQVMsaUNBQWlDO0FBQ3RELGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNuQyxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUwsUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEscUJBQXFCLEVBQzdCLFVBQVUsQ0FBQyxXQUFXO0FBQ25CLGFBQU8sU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0I7QUFDckQsYUFBTyxTQUFTLE9BQU8sVUFBVTtBQUM3QixhQUFLLE9BQU8sU0FBUyxtQkFBbUI7QUFDeEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ25DLENBQUM7QUFBQSxJQUNMLENBQUM7QUFBQSxFQUVUO0FBQ0o7IiwKICAibmFtZXMiOiBbIml0ZW0iLCAicmVwZWF0Il0KfQo=
