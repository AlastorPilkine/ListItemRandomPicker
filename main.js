/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  LIRPSuggestModal: () => LIRPSuggestModal,
  default: () => ListItemRandomPicker
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
function findIndexes(anArray, predicate) {
  const indexes = [];
  anArray.forEach((element, index) => {
    if (predicate(element, index)) {
      indexes.push(index);
    }
  });
  return indexes;
}
function indexBetweenFindIndexes(index, indexes) {
  let isBeetween = false;
  if (indexes.length % 2 !== 0 && index >= indexes[indexes.length - 1]) {
    return true;
  }
  ;
  for (let i = 0; i < indexes.length - 2; i = i + 2) {
    if (indexes[i] <= index && index <= indexes[i + 1]) {
      return true;
    }
  }
  return isBeetween;
}
function escapeRegex(stringToEscape) {
  return stringToEscape.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
var DEFAULT_SETTINGS = {
  notePath: "Note or folder path",
  showWarning: true,
  maxReferenceDepth: 3,
  selectionForNotification: "!",
  deleteSelectionForNotification: false,
  nullValue: "null",
  escapeValue: "//",
  commentValue: "%%",
  showNoteSelector: true
};
var DiceRoller = class {
  checkDice(diceString) {
    const diceRegex = /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i;
    return diceRegex.test(diceString);
  }
  rollDice(diceString) {
    if (!this.checkDice(diceString)) {
      throw new Error("Syntaxe de lancer de d\xE9s invalide.");
    }
    const [_, countStr, sidesStr, modifierStr, explodeStr, keepStr, keepLowStr] = diceString.match(
      /^(\d+)?d(\d+)([\+\-]\d+)?(e)?(k\d+)?(kl\d+)?$/i
    );
    const count = parseInt(countStr || "1");
    const sides = parseInt(sidesStr);
    const modifier = parseInt(modifierStr || "0");
    const explode = !!explodeStr;
    const keep = keepStr ? parseInt(keepStr.slice(1)) : void 0;
    const keepLow = keepLowStr ? parseInt(keepLowStr.slice(2)) : void 0;
    let results = [];
    for (let i = 0; i < count; i++) {
      let result = Math.floor(Math.random() * sides) + 1;
      results.push(result);
      if (explode) {
        while (result === sides) {
          result = Math.floor(Math.random() * sides) + 1;
          results.push(result);
        }
      }
    }
    if (keep) {
      results.sort((a, b) => b - a);
      results = results.slice(0, keep);
    } else if (keepLow) {
      results.sort((a, b) => a - b);
      results = results.slice(0, keepLow);
    }
    const sum = results.reduce((acc, val) => acc + val, 0);
    return sum + modifier;
  }
  /**
   * Remplace les lancers de dés encadrés par des délimiteurs dans une chaîne multi-lignes.
   *
   * @param {string} text Le texte multi-lignes contenant les lancers de dés.
   * @param {string} startDelimiter Le délimiteur de début des lancers de dés.
   * @param {string} endDelimiter Le délimiteur de fin des lancers de dés.
   * @returns {string} Le texte avec les lancers de dés remplacés par leurs résultats.
   */
  replaceDiceRolls(text, startDelimiter, endDelimiter) {
    const regex = new RegExp(
      `${this.escapeRegExp(startDelimiter)}([^${this.escapeRegExp(
        startDelimiter + endDelimiter
      )}]+)${this.escapeRegExp(endDelimiter)}`,
      "g"
    );
    return text.replace(regex, (match, diceString) => {
      try {
        const result = this.rollDice(diceString);
        return result.toString();
      } catch (error) {
        return match;
      }
    });
  }
  /**
   * Échappe les caractères spéciaux pour une utilisation dans une expression régulière.
   *
   * @param {string} string La chaîne de caractères à échapper.
   * @returns {string} La chaîne de caractères échappée.
   */
  escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
  }
};
var LIRPLogStatusValues = [
  "dupInNote",
  "dupInFolder",
  "emptyList",
  "emptyNote",
  "refLimit",
  "subRefLimit",
  "pathSetting",
  "folderAndFile",
  "showItem",
  "noActiveView"
];
var LIRPLogElement = class {
  static getErrorStatus() {
    return ["dupInFolder", "pathSetting"];
  }
  static getWarningStatus() {
    let warningStatus = [];
    LIRPLogStatusValues.map((element) => {
      if (!LIRPLogElement.getErrorStatus().contains(element) && !LIRPLogElement.getWarningStatus().contains(element)) {
        warningStatus.push(element);
      }
      ;
    });
    return warningStatus;
  }
  static getInfoStatus() {
    return ["showItem", "refLimit", "subRefLimit"];
  }
  getType() {
    const errors = ["pathSetting", "dupInFolder"];
    if (errors.contains(this.status)) {
      return "error";
    } else {
      return "warning";
    }
    ;
  }
  constructor(father, child, status, complement = "") {
    this.father = father;
    this.child = child;
    this.status = status;
    this.complement = complement;
  }
  toString() {
    return `${this.getType()} / ${this.father} / ${this.child} / ${this.status} / ${this.complement}`;
  }
};
var LIRPLog = class {
  constructor() {
    this.logs = [];
  }
  push(father, child, status, complement = "") {
    this.logs.push(new LIRPLogElement(father, child, status, complement));
  }
  add(logs) {
    this.logs = this.logs.concat(logs.logs);
  }
  get(type) {
    const logsForType = this.logs.filter(
      (element) => element.getType() === type
    );
    let getArray = [];
    logsForType.map((element) => {
      getArray.push(element.toString());
    });
    return getArray;
  }
  flush() {
    this.logs = [];
  }
};
var LIRPList = class {
  static getSettingString(value = "") {
    if (value === "") {
      return "- [ ] Hide this list\n";
    } else {
      switch (value) {
        case "hide":
          return "^- \\[[x \\?]\\] Hide this list$";
        case "hide_string":
          return "- \\[[x ?]\\] Hide this list";
        case "hide_ticked":
          return "^- \\[[x?]\\] Hide this list$";
      }
      ;
    }
    ;
  }
  constructor(noteName, lines, nullValue, escapeString, commentString) {
    this.title = "";
    this.description = "";
    this.hidden = false;
    this.items = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.commentString = commentString;
    const headingRegEx = /^# +(.+)$/;
    this.title = lines[0].replace(headingRegEx, "$1");
    lines.shift();
    const listBeginItemString = `^(?!${LIRPList.getSettingString("hide_string")}) {0,3}(-|\\d+.|\\*) +(.+)$`;
    const listBeginItemRegex = new RegExp(listBeginItemString);
    const listBeginIndexes = findIndexes(lines, (element) => listBeginItemRegex.test(element));
    if (listBeginIndexes.length === 0) {
      this.logs.push(noteName, this.title, "emptyList");
      this.hidden = true;
      return;
    }
    const cleanLines = lines.map((element) => {
      return element.replace(listBeginItemRegex, "$2");
    });
    if (listBeginIndexes[0] !== 0) {
      let mdDescription = cleanLines.slice(0, listBeginIndexes[0]);
      if (mdDescription[0] === "") {
        mdDescription.shift();
      }
      let isHidden = false;
      const hideRegexTicked = new RegExp(LIRPList.getSettingString("hide_ticked"));
      const hideRegex = new RegExp(LIRPList.getSettingString("hide"));
      mdDescription.map((element) => {
        if (hideRegexTicked.test(element)) {
          isHidden = true;
          this.hidden = isHidden;
        }
        ;
      });
      mdDescription = mdDescription.filter((element) => !hideRegex.test(element));
      this.description = mdDescription.join("\n");
    } else {
      this.description = "";
    }
    const listBeginCount = listBeginIndexes.length;
    let item;
    for (let currentIndex = 0; currentIndex < listBeginCount - 1; currentIndex++) {
      item = cleanLines.slice(listBeginIndexes[currentIndex], listBeginIndexes[currentIndex + 1]);
      this.pushItemBasedOnWeight(item);
    }
    item = cleanLines.slice(listBeginIndexes[listBeginCount - 1]);
    if (item.at(-1) === "") {
      item.pop();
    }
    this.pushItemBasedOnWeight(item);
  }
  flushLogs() {
    this.logs.flush();
  }
  pushItemBasedOnWeight(item) {
    const ItemWithWeightRegEx = /^\((\d+)\)\s+(.+)$/;
    let regExExecution;
    let repeat;
    if ((regExExecution = ItemWithWeightRegEx.exec(item[0])) !== null) {
      repeat = Number(regExExecution[1]);
      item[0] = regExExecution[2];
    } else {
      repeat = 1;
    }
    if (item[0] === this.nullValue) {
      if (item.length === 1) {
        item[0] = "";
      } else {
        item.shift();
      }
      ;
    }
    ;
    const escapeStringRegex = `^ *${this.escapeString}(.*)`;
    const escapeStringRegEx = new RegExp(escapeStringRegex, "gm");
    const escapeItem = item.map((element) => {
      return element.replace(escapeStringRegEx, "$1");
    });
    let stringItem = escapeItem.join("\n");
    for (let i = 0; i < repeat; i++) {
      this.items.push(stringItem);
    }
  }
  getSuggestion(noteName) {
    const suggestion = {
      noteName,
      title: this.title,
      description: this.description.split("\n")[0]
    };
    return suggestion;
  }
  notHidden() {
    return !this.hidden;
  }
  pickRandomItem() {
    let randomItem = "";
    if (this.items.length > 0) {
      randomItem = this.items[Math.floor(Math.random() * this.items.length)];
    }
    return randomItem;
  }
  getLogs() {
    return this.logs;
  }
  getWarning() {
    return this.logs.get("warning");
  }
  get length() {
    return this.items.length;
  }
};
var LIRPNote = class {
  static getSettingString(value = "") {
    if (value === "") {
      return "- [ ] Do not preserve comments\n";
    } else {
      switch (value) {
        case "deleteComment":
          return "^- \\[[x ?]\\] Do not preserve comments$";
        case "deleteComment_ticked":
          return "^- \\[[x?]\\] Do not preserve comments$";
      }
      ;
    }
    ;
  }
  constructor(nullValue, escapeString, commentString, referenceMaxDepth) {
    this.noteName = "";
    this.description = "";
    this.list = [];
    this.logs = new LIRPLog();
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.commentString = commentString;
    this.rollDice = true;
    this.referenceMaxDepth = referenceMaxDepth;
    this.keepComment = true;
  }
  getListTitles() {
    let listTitles = [];
    this.list.map((element) => {
      listTitles.push(element.title);
    });
    return listTitles;
  }
  workWithComment(text) {
    const tickSettingRegEx = new RegExp(LIRPNote.getSettingString("deleteComment_ticked"));
    const headingRegex = /^# .+$/;
    const commentLineString = `^${this.commentString}$`;
    const commentLineRegex = new RegExp(commentLineString);
    const commentBlock = `${this.commentString}.*?${this.commentString}`;
    const commentBlockRegex = new RegExp(commentBlock);
    const lines = text.split("\n");
    const settingIndex = findIndexes(lines, (element) => tickSettingRegEx.test(element));
    const commentLineIndex = findIndexes(lines, (element) => commentLineRegex.test(element));
    const headingIndex = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndex.length === 0) {
      return text;
    }
    ;
    if (settingIndex.length === 0 || settingIndex[0] > headingIndex[0]) {
      this.keepComment = true;
    } else {
      this.keepComment = indexBetweenFindIndexes(settingIndex[0], commentLineIndex);
    }
    let insideComment = false;
    const newLines = [];
    lines.map((element) => {
      let isACommentLine = false;
      if (commentLineRegex.test(element)) {
        insideComment = !insideComment;
        isACommentLine = true;
      }
      if (insideComment || isACommentLine) {
        if (this.keepComment) {
          newLines.push(this.escapeString + element);
        }
        ;
      } else {
        if (this.keepComment) {
          newLines.push(element);
        } else {
          newLines.push(element.replace(commentBlockRegex, ""));
        }
        ;
      }
      ;
    });
    return newLines.join("\n");
  }
  clearComment(text) {
    const commentBlock = `${this.commentString}.*?(${this.commentString}|$)`;
    const commentBlockRegex = new RegExp(commentBlock, "gs");
    return text.replace(commentBlockRegex, "");
  }
  loadFromNote(noteName, noteContent) {
    this.noteName = noteName;
    let lines = [];
    lines = this.workWithComment(noteContent).split("\n");
    if (lines[0] === "\n") {
      lines.shift();
    }
    ;
    const headingRegex = /^# .+$/;
    let headingIndexes = findIndexes(lines, (element) => headingRegex.test(element));
    if (headingIndexes.length === 0) {
      this.logs.push(noteName, "", "emptyNote");
      return false;
    }
    if (headingIndexes[0] !== 0) {
      let mdDescription = lines.slice(0, headingIndexes[0]);
      this.description = mdDescription.join("\n");
    }
    const headingCount = headingIndexes.length;
    let pushSuccess = true;
    for (let currentIndex = 0; currentIndex < headingCount - 1; currentIndex++) {
      pushSuccess = this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[currentIndex], headingIndexes[currentIndex + 1]), this.nullValue, this.escapeString, this.commentString)) && pushSuccess;
    }
    ;
    pushSuccess = this.pushListIfNotExists(new LIRPList(this.noteName, lines.slice(headingIndexes[headingCount - 1]), this.nullValue, this.escapeString, this.commentString)) && pushSuccess;
    return pushSuccess;
  }
  pushListIfNotExists(listToPush) {
    if (this.getListTitles().contains(listToPush.title)) {
      this.logs.push(this.noteName, listToPush.title, "dupInNote");
      return false;
    } else {
      this.list.push(listToPush);
      return true;
    }
    ;
  }
  getListSuggestion(withHidden = false) {
    const noteSuggestion = new LIRPSuggestionList();
    this.list.forEach((element) => {
      if (withHidden || element.notHidden()) {
        noteSuggestion.push(element.getSuggestion(this.noteName));
      }
    });
    return noteSuggestion;
  }
  doReferenceSubstitution(text) {
    let match;
    let modifiedText = text;
    let listTitle = "";
    const stringRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    for (let repeat = 0; repeat < this.referenceMaxDepth; repeat++) {
      const refRegex = new RegExp(stringRefRegex, "mg");
      while ((match = refRegex.exec(modifiedText)) !== null) {
        let newValue = this.pickRandomItemFromList(match[1], false);
        listTitle = match[0];
        modifiedText = modifiedText.replace(listTitle, newValue);
        refRegex.lastIndex = match.index + newValue.length;
      }
    }
    if (this.rollDice) {
      const diceRoller = new DiceRoller();
      modifiedText = diceRoller.replaceDiceRolls(modifiedText, "{", "}");
    }
    return {
      lastListTitle: listTitle,
      modifiedText
    };
  }
  flushLogs() {
    this.logs.flush();
    this.list.map((element) => {
      element.flushLogs();
    });
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let randomItem = "";
    let returnOfDoExecSub = {
      lastListTitle: listTitle,
      modifiedText: ""
    };
    const currentList = this.list.find((element) => element.title === listTitle);
    if (currentList !== void 0) {
      randomItem = currentList.pickRandomItem();
      if (workOnReference) {
        returnOfDoExecSub = this.doReferenceSubstitution(randomItem);
        randomItem = returnOfDoExecSub.modifiedText;
        const stringRefRegex = `{(${this.list.map((element) => escapeRegex(element.title)).join("|")})}`;
        const RefRegex = new RegExp(stringRefRegex);
        if (RefRegex.test(randomItem) && workOnReference) {
          if (returnOfDoExecSub.lastListTitle === "") {
            returnOfDoExecSub.lastListTitle = listTitle;
          }
          this.logs.push(this.noteName, returnOfDoExecSub.lastListTitle, "refLimit");
        }
        ;
      }
      ;
      return randomItem;
    } else {
      return "";
    }
    ;
  }
  getError() {
    return this.logs.get("error");
  }
  getLogs() {
    let allLogs = new LIRPLog();
    allLogs.add(this.logs);
    this.list.map((element) => {
      allLogs.add(element.getLogs());
    });
    return allLogs;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.list.forEach((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPMultiNote = class {
  constructor(nullValue, escapeString, commentString, referenceMaxDepth) {
    this.multiNote = [];
    this.nullValue = nullValue;
    this.escapeString = escapeString;
    this.commentString = commentString;
    this.referenceMaxDepth = referenceMaxDepth;
    this.logs = new LIRPLog();
  }
  loadFromNote(noteName, noteContent) {
    const currentNote = new LIRPNote(this.nullValue, this.escapeString, this.commentString, this.referenceMaxDepth);
    let status = currentNote.loadFromNote(noteName, noteContent);
    status = this.pushNoteIfListNotExists(currentNote) && status;
    return status;
  }
  pushNoteIfListNotExists(noteToPush) {
    const allListTitle = this.getListTitles();
    let unic = true;
    noteToPush.getListTitles().map((element) => {
      if (allListTitle.contains(element)) {
        this.logs.push(noteToPush.noteName, element, "dupInFolder", this.getNoteNameFromListTitle(element));
        unic = false;
      }
    });
    if (unic) {
      this.multiNote.push(noteToPush);
    } else {
      this.logs.add(noteToPush.logs);
    }
    ;
    return unic;
  }
  getNoteNameFromListTitle(listTitle) {
    let note = this.multiNote.find(
      (element) => element.getListTitles().contains(listTitle)
    );
    if (note !== void 0) {
      return note.noteName;
    } else {
      return "";
    }
    ;
  }
  getListTitles() {
    let listTitles = [];
    this.multiNote.map((element) => {
      listTitles = listTitles.concat(element.getListTitles());
    });
    return listTitles;
  }
  getListSuggestion(withHidden = false) {
    let allListSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      allListSuggestion = allListSuggestion.concat(element.getListSuggestion(withHidden));
    });
    return allListSuggestion;
  }
  getNoteSuggestion(withHidden = false) {
    let noteSuggestion = new LIRPSuggestionList();
    this.multiNote.map((element) => {
      if (element.getListSuggestion(withHidden).length > 0) {
        noteSuggestion.push({
          noteName: element.noteName,
          title: element.noteName,
          description: element.description.split("\n")[0]
        });
      }
      ;
    });
    return noteSuggestion;
  }
  doReferenceSubstitution(text) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.commentString, this.referenceMaxDepth);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    let returnOfDoExecSub = {
      lastListTitle: "Reference substitution in selection",
      modifiedText: ""
    };
    returnOfDoExecSub = superNote.doReferenceSubstitution(text);
    let listTitle = "";
    const stringRefRegex = `{(${superNote.list.map((element) => escapeRegex(element.title)).join("|")})}`;
    const refRegex = new RegExp(stringRefRegex);
    if (refRegex.test(returnOfDoExecSub.modifiedText)) {
      this.logs.push("", "", "subRefLimit");
    }
    ;
    return returnOfDoExecSub.modifiedText;
  }
  pickRandomItemFromList(listTitle, workOnReference = true) {
    let superNote = new LIRPNote(this.nullValue, this.escapeString, this.commentString, this.referenceMaxDepth);
    superNote.noteName = this.getNoteNameFromListTitle(listTitle);
    this.multiNote.map((element) => {
      superNote.list = superNote.list.concat(element.list);
    });
    const randomItem = superNote.pickRandomItemFromList(listTitle);
    this.logs.add(superNote.getLogs());
    return randomItem;
  }
  flushLogs() {
    this.logs.flush();
    this.multiNote.map((element) => {
      element.flushLogs();
    });
  }
  getError() {
    let allError = [];
    this.multiNote.map((element) => {
      allError = allError.concat(element.getError());
    });
    return allError;
  }
  getLogs() {
    let allLogs = new LIRPLog();
    allLogs.add(this.logs);
    this.multiNote.map((element) => {
      allLogs.add(element.getLogs());
    });
    return allLogs;
  }
  hasErrors() {
    const allLogs = this.getLogs();
    return allLogs.get("error").length !== 0;
  }
  getWarning() {
    let allWarning = this.logs.get("warning");
    this.multiNote.map((element) => {
      allWarning = allWarning.concat(element.getWarning());
    });
    return allWarning;
  }
  get length() {
    return this.multiNote.length;
  }
};
var LIRPSuggestionList = class {
  constructor() {
    this.list = [];
  }
  push(element) {
    this.list.push(element);
  }
  filterByNoteName(noteName) {
    const filterList = new LIRPSuggestionList();
    this.list.map((element) => {
      if (element.noteName === noteName) {
        filterList.push(element);
      }
    });
    return filterList;
  }
  filter(callback) {
    const filteredList = new LIRPSuggestionList();
    for (let i = 0; i < this.list.length; i++) {
      if (callback(this.list[i], i, this.list)) {
        filteredList.push(this.list[i]);
      }
    }
    return filteredList;
  }
  concat(otherList) {
    const newList = new LIRPSuggestionList();
    newList.list = this.list.concat(otherList.list);
    return newList;
  }
  get length() {
    return this.list.length;
  }
};
var LIRPSuggestModal = class extends import_obsidian.SuggestModal {
  constructor(app, items, callback) {
    super(app);
    this.items = items;
    this.callback = callback;
  }
  getSuggestions(query) {
    return this.items.filter(
      (item) => item.title.toLowerCase().includes(query.toLowerCase())
    ).list;
  }
  renderSuggestion(item, el) {
    el.createEl("div", { text: item.title });
    let message = item.description;
    el.createEl("small", { text: message });
  }
  onChooseSuggestion(item, evt) {
    this.callback(item);
  }
};
var ListItemRandomPicker = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.logs = new LIRPLog();
    this.addRibbonIcon("list-tree", "Pick random list item", (evt) => {
      this.prepareAction("note");
    });
    this.addCommand({
      id: "insert-random-item",
      name: "Insert random item from list",
      callback: () => {
        this.prepareAction("note");
      }
    });
    this.addCommand({
      id: "insert-list-setting-item",
      name: "Insert list settings values",
      callback: () => {
        this.insertString(LIRPList.getSettingString());
      }
    });
    this.addCommand({
      id: "insert-note-setting-item",
      name: "Insert note settings values",
      callback: () => {
        this.insertString(LIRPNote.getSettingString());
      }
    });
    this.addCommand({
      id: "insert-reference-item",
      name: "Insert list reference",
      callback: () => {
        this.prepareAction("reference");
      }
    });
    this.addCommand({
      id: "replace-reference-item",
      name: "Replace references in selection",
      callback: () => {
        this.prepareAction("doRefSubstitution");
      }
    });
    this.addSettingTab(new LIRPSettingTab(this.app, this));
  }
  onunload() {
  }
  getLIRPFiles(notePath) {
    let allVaultFiles = this.app.vault.getMarkdownFiles();
    let filesInNotePath = [];
    let foundAFile = false;
    const noteFileName = `${notePath}.md`;
    const notePathRegex = new RegExp(`^${notePath}/.+.md$`);
    allVaultFiles.map((element) => {
      if (notePathRegex.test(element.path)) {
        filesInNotePath.push(element.path);
      } else if (element.path === noteFileName) {
        foundAFile = true;
      }
      ;
    });
    if (filesInNotePath.length === 0 && foundAFile) {
      filesInNotePath.push(noteFileName);
    } else if (foundAFile && filesInNotePath.length !== 0) {
      this.logs.push("ListItemRandmPicker", "getLIRPFiles", "folderAndFile");
    }
    return filesInNotePath;
  }
  async loadLIRPFiles() {
    const allLIRPFiles = this.getLIRPFiles(this.settings.notePath);
    let currentLIRP = new LIRPMultiNote(this.settings.nullValue, this.settings.escapeValue, this.settings.commentValue, this.settings.maxReferenceDepth);
    for (const currentFile of allLIRPFiles) {
      const currentFSObject = this.app.vault.getAbstractFileByPath(currentFile);
      let content = "";
      if (currentFSObject instanceof import_obsidian.TFile) {
        content = await this.app.vault.cachedRead(currentFSObject);
        currentLIRP.loadFromNote(currentFSObject.path.slice(0, -3), content);
      }
      ;
    }
    ;
    return currentLIRP;
  }
  async prepareAction(action) {
    const currentLIRP = await this.loadLIRPFiles();
    if (currentLIRP.length === 0) {
      this.logs.push("ListItemRandomPicker", "loadLIRPFiles", "pathSetting");
    }
    ;
    if (!currentLIRP.hasErrors() && currentLIRP.length !== 0) {
      if (action === "doRefSubstitution") {
        this.doReferenceSubstitution(currentLIRP);
      } else {
        if (currentLIRP.length === 1 || !this.settings.showNoteSelector) {
          new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference"), (item) => {
            if (action === "note") {
              this.workWithTitle(currentLIRP, item.title);
            } else {
              this.insertString(`{${item.title}}`);
            }
            ;
          }).open();
        } else {
          new LIRPSuggestModal(this.app, currentLIRP.getNoteSuggestion(action === "reference"), (item) => {
            new LIRPSuggestModal(this.app, currentLIRP.getListSuggestion(action === "reference").filterByNoteName(item.noteName), (item2) => {
              if (action === "note") {
                this.workWithTitle(currentLIRP, item2.title);
              } else {
                this.insertString(`{${item2.title}}`);
              }
              ;
            }).open();
          }).open();
        }
        ;
      }
      ;
    }
    this.doLogManagement(currentLIRP.getLogs());
    this.logs.flush();
    currentLIRP.flushLogs();
  }
  doLogManagement(multiNoteLogs) {
    const allLogs = this.logs;
    if (multiNoteLogs !== void 0) {
      allLogs.add(multiNoteLogs);
      multiNoteLogs.flush();
    }
    ;
    const errorMsg = [];
    const warningMsg = [];
    const infoMsg = [];
    allLogs.logs.map((element) => {
      switch (element.status) {
        case "dupInNote":
          warningMsg.push(`List "${element.child}" is duplicate in note "${element.father}". List is ignored`);
          break;
        case "dupInFolder":
          errorMsg.push(`ERROR : List "${element.child}" exists in two notes, "${element.father}" and "${element.complement}", make correction !`);
          break;
        case "emptyList":
          warningMsg.push(`List "${element.child}" is empty in "${element.father}"`);
          break;
        case "emptyNote":
          warningMsg.push(`"${element.child}" is empty`);
          break;
        case "refLimit":
          warningMsg.push(`Reference depth limit reach with list "${element.child}" in note "${element.father}"`);
          break;
        case "pathSetting":
          errorMsg.push(`ERROR : verify path in plugin settings`);
          break;
        case "folderAndFile":
          warningMsg.push(`A note with the same name as the folder in settings gets ignored.`);
          break;
        case "showItem":
          infoMsg.push(`${element.complement}`);
          break;
        case "noActiveView":
          warningMsg.push(`No note in edition mode to do this action`);
          break;
      }
      ;
      errorMsg.map((element2) => new import_obsidian.Notice(element2));
      if (this.settings.showWarning) {
        warningMsg.map((element2) => new import_obsidian.Notice(element2));
      }
      ;
      infoMsg.map((element2) => new import_obsidian.Notice(element2));
    });
    this.logs.flush();
  }
  workWithTitle(note, listTitle) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selectionForNotificationRegex = `^${this.settings.selectionForNotification}$`;
      const noticeRegex = new RegExp(selectionForNotificationRegex);
      const selection = activeView.editor.getSelection();
      if (noticeRegex.test(selection)) {
        this.logs.push("", "", "showItem", note.pickRandomItemFromList(listTitle));
        if (this.settings.deleteSelectionForNotification) {
          activeView.editor.replaceSelection("");
        }
      } else {
        let stringToInsert = "";
        const repeatInsertRegEx = /^(\d+)(.*)/gm;
        let regExExecution;
        let repeat;
        if ((regExExecution = repeatInsertRegEx.exec(selection)) !== null) {
          const repeat2 = Number(regExExecution[1]);
          const delimiter = selection.replace(/^\d+/, "");
          const arrayStringToinsert = [];
          for (let i = 0; i < repeat2; i++) {
            arrayStringToinsert.push(note.pickRandomItemFromList(listTitle));
          }
          stringToInsert = arrayStringToinsert.join(delimiter);
        } else {
          stringToInsert = note.pickRandomItemFromList(listTitle);
        }
        activeView.editor.replaceSelection(stringToInsert);
      }
      ;
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
    this.doLogManagement(note.getLogs());
  }
  doReferenceSubstitution(multiNote) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const selection = activeView.editor.getSelection();
      activeView.editor.replaceSelection(multiNote.doReferenceSubstitution(selection));
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
  }
  insertString(stringToInsert) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      activeView.editor.replaceSelection(stringToInsert);
    } else {
      this.logs.push("ListItemRandomPicker", "workWithTitle", "noActiveView");
    }
    ;
    this.doLogManagement();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LIRPSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Path").setDesc('The path of a note or folder. Example: "Folder/Note" or "Folder".').addText(
      (text) => text.setPlaceholder("Enter the path to your note").setValue(this.plugin.settings.notePath).onChange(async (value) => {
        this.plugin.settings.notePath = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Specific values" });
    new import_obsidian.Setting(containerEl).setName("Null value").setDesc("If the first line of a list item has this value, that line is ignored. This allows you to have probabilities of getting no result. Usage example: having, or not having, a particle in a noun.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.nullValue).onChange(async (value) => {
        this.plugin.settings.nullValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Escape value").setDesc("To include heading one elements or first-level list items in your random list, escape them with these values. Exemple : // # Heading").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.escapeValue).onChange(async (value) => {
        this.plugin.settings.escapeValue = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Selection value for notification").setDesc("If the selected text has this value, the item is not inserted; instead, a notification is shown.").addText(
      (text) => text.setPlaceholder("Enter value").setValue(this.plugin.settings.selectionForNotification).onChange(async (value) => {
        this.plugin.settings.selectionForNotification = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h2", { text: "Behavior" });
    new import_obsidian.Setting(containerEl).setName("Show note selector").setDesc("If path is a folder containing at least two notes, a selector will allow you to choose the note; otherwise, all lists will be offered to you.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showNoteSelector);
      toggle.onChange(async (value) => {
        this.plugin.settings.showNoteSelector = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Show warning").setDesc("Are warnings displayed as notifications ?").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showWarning);
      toggle.onChange(async (value) => {
        this.plugin.settings.showWarning = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Delete selection value on notification").setDesc("If this setting is on, the selected notification value is removed after it's used.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.deleteSelectionForNotification);
      toggle.onChange(async (value) => {
        this.plugin.settings.deleteSelectionForNotification = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reference depth limit").setDesc("Reference recursion limit: the maximum number of nested reference calls allowed. Zero disables reference resolution.").addSlider(
      (slider) => slider.setValue(this.plugin.settings.maxReferenceDepth).setLimits(0, 10, 1).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.maxReferenceDepth = value;
        await this.plugin.saveSettings();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBTdWdnZXN0TW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgTWFya2Rvd25WaWV3fSBmcm9tICdvYnNpZGlhbic7XG5cbmZ1bmN0aW9uIGZpbmRJbmRleGVzPFQ+KGFuQXJyYXk6IFRbXSwgcHJlZGljYXRlOiAoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGFuQXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZWxlbWVudCwgaW5kZXgpKSB7XG4gICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluZGV4ZXM7XG59O1xuXG5mdW5jdGlvbiBpbmRleEJldHdlZW5GaW5kSW5kZXhlcyhpbmRleDogbnVtYmVyLCBpbmRleGVzOiBudW1iZXJbXSk6IGJvb2xlYW4ge1xuICAgIGxldCBpc0JlZXR3ZWVuOmJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAoKGluZGV4ZXMubGVuZ3RoICUgMiAhPT0gMCkgJiYgKGluZGV4ID49IGluZGV4ZXNbaW5kZXhlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBmb3IgKGxldCBpPTA7IGkgPCAoaW5kZXhlcy5sZW5ndGggLSAyKTsgaSA9IGkgKzIpIHtcbiAgICAgICAgaWYgKChpbmRleGVzW2ldIDw9IGluZGV4KSAmJiAoaW5kZXggPD0gaW5kZXhlc1tpKzFdKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlzQmVldHdlZW47XG59O1xuXG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHJpbmdUb0VzY2FwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc3RyaW5nVG9Fc2NhcGUucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcbn07XG5pbnRlcmZhY2UgTElSUFBsdWdpblNldHRpbmdzIHtcbiAgICBub3RlUGF0aDogc3RyaW5nO1xuICAgIHNob3dXYXJuaW5nOiBib29sZWFuO1xuICAgIG1heFJlZmVyZW5jZURlcHRoOiBudW1iZXI7XG4gICAgc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uOiBib29sZWFuO1xuICAgIG51bGxWYWx1ZTogc3RyaW5nO1xuICAgIGVzY2FwZVZhbHVlOiBzdHJpbmc7XG4gICAgY29tbWVudFZhbHVlOiBzdHJpbmc7XG4gICAgc2hvd05vdGVTZWxlY3RvcjogYm9vbGVhbjtcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExJUlBQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICBub3RlUGF0aDogJ05vdGUgb3IgZm9sZGVyIHBhdGgnLFxuICAgIHNob3dXYXJuaW5nOiB0cnVlLFxuICAgIG1heFJlZmVyZW5jZURlcHRoOiAzLFxuICAgIHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbjogJyEnLFxuICAgIGRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgbnVsbFZhbHVlOiAnbnVsbCcsXG4gICAgZXNjYXBlVmFsdWU6ICcvLycsXG4gICAgY29tbWVudFZhbHVlOiAnJSUnLFxuICAgIHNob3dOb3RlU2VsZWN0b3I6IHRydWUsXG59O1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jbGFzcyBEaWNlUm9sbGVyIHtcbiAgICBjaGVja0RpY2UoZGljZVN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICBjb25zdCBkaWNlUmVnZXggPSAvXihcXGQrKT9kKFxcZCspKFtcXCtcXC1dXFxkKyk/KGUpPyhrXFxkKyk/KGtsXFxkKyk/JC9pO1xuICAgICAgcmV0dXJuIGRpY2VSZWdleC50ZXN0KGRpY2VTdHJpbmcpO1xuICAgIH07XG4gIFxuICAgIHJvbGxEaWNlKGRpY2VTdHJpbmc6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICBpZiAoIXRoaXMuY2hlY2tEaWNlKGRpY2VTdHJpbmcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bnRheGUgZGUgbGFuY2VyIGRlIGRcdTAwRTlzIGludmFsaWRlLlwiKTtcbiAgICAgIH1cbiAgXG4gICAgICBjb25zdCBbXywgY291bnRTdHIsIHNpZGVzU3RyLCBtb2RpZmllclN0ciwgZXhwbG9kZVN0ciwga2VlcFN0ciwga2VlcExvd1N0cl0gPVxuICAgICAgICBkaWNlU3RyaW5nLm1hdGNoKFxuICAgICAgICAgIC9eKFxcZCspP2QoXFxkKykoW1xcK1xcLV1cXGQrKT8oZSk/KGtcXGQrKT8oa2xcXGQrKT8kL2lcbiAgICAgICAgKSBhcyBSZWdFeHBNYXRjaEFycmF5O1xuICBcbiAgICAgIGNvbnN0IGNvdW50ID0gcGFyc2VJbnQoY291bnRTdHIgfHwgXCIxXCIpO1xuICAgICAgY29uc3Qgc2lkZXMgPSBwYXJzZUludChzaWRlc1N0cik7XG4gICAgICBjb25zdCBtb2RpZmllciA9IHBhcnNlSW50KG1vZGlmaWVyU3RyIHx8IFwiMFwiKTtcbiAgICAgIGNvbnN0IGV4cGxvZGUgPSAhIWV4cGxvZGVTdHI7XG4gICAgICBjb25zdCBrZWVwID0ga2VlcFN0ciA/IHBhcnNlSW50KGtlZXBTdHIuc2xpY2UoMSkpIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3Qga2VlcExvdyA9IGtlZXBMb3dTdHIgPyBwYXJzZUludChrZWVwTG93U3RyLnNsaWNlKDIpKSA6IHVuZGVmaW5lZDtcbiAgXG4gICAgICBsZXQgcmVzdWx0czogbnVtYmVyW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2lkZXMpICsgMTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gIFxuICAgICAgICBpZiAoZXhwbG9kZSkge1xuICAgICAgICAgIHdoaWxlIChyZXN1bHQgPT09IHNpZGVzKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzaWRlcykgKyAxO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGtlZXApIHtcbiAgICAgICAgcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBiIC0gYSk7XG4gICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNsaWNlKDAsIGtlZXApO1xuICAgICAgfSBlbHNlIGlmIChrZWVwTG93KSB7XG4gICAgICAgIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCBrZWVwTG93KTtcbiAgICAgIH1cbiAgXG4gICAgICBjb25zdCBzdW0gPSByZXN1bHRzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCwgMCk7XG4gICAgICByZXR1cm4gc3VtICsgbW9kaWZpZXI7XG4gICAgfTtcbiAgXG4gICAgLyoqXG4gICAgICogUmVtcGxhY2UgbGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMgZW5jYWRyXHUwMEU5cyBwYXIgZGVzIGRcdTAwRTlsaW1pdGV1cnMgZGFucyB1bmUgY2hhXHUwMEVFbmUgbXVsdGktbGlnbmVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgTGUgdGV4dGUgbXVsdGktbGlnbmVzIGNvbnRlbmFudCBsZXMgbGFuY2VycyBkZSBkXHUwMEU5cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhcnREZWxpbWl0ZXIgTGUgZFx1MDBFOWxpbWl0ZXVyIGRlIGRcdTAwRTlidXQgZGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZERlbGltaXRlciBMZSBkXHUwMEU5bGltaXRldXIgZGUgZmluIGRlcyBsYW5jZXJzIGRlIGRcdTAwRTlzLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IExlIHRleHRlIGF2ZWMgbGVzIGxhbmNlcnMgZGUgZFx1MDBFOXMgcmVtcGxhY1x1MDBFOXMgcGFyIGxldXJzIHJcdTAwRTlzdWx0YXRzLlxuICAgICAqL1xuICAgIHJlcGxhY2VEaWNlUm9sbHMoXG4gICAgICB0ZXh0OiBzdHJpbmcsXG4gICAgICBzdGFydERlbGltaXRlcjogc3RyaW5nLFxuICAgICAgZW5kRGVsaW1pdGVyOiBzdHJpbmdcbiAgICApOiBzdHJpbmcge1xuICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgICBgJHt0aGlzLmVzY2FwZVJlZ0V4cChzdGFydERlbGltaXRlcil9KFteJHt0aGlzLmVzY2FwZVJlZ0V4cChcbiAgICAgICAgICBzdGFydERlbGltaXRlciArIGVuZERlbGltaXRlclxuICAgICAgICApfV0rKSR7dGhpcy5lc2NhcGVSZWdFeHAoZW5kRGVsaW1pdGVyKX1gLFxuICAgICAgICBcImdcIlxuICAgICAgKTtcbiAgXG4gICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKHJlZ2V4LCAobWF0Y2gsIGRpY2VTdHJpbmcpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJvbGxEaWNlKGRpY2VTdHJpbmcpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQudG9TdHJpbmcoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7IC8vIFNpIGxhIHN5bnRheGUgZXN0IGludmFsaWRlLCBvbiBnYXJkZSBsZSB0ZXh0ZSBkJ29yaWdpbmVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgXG4gICAgLyoqXG4gICAgICogXHUwMEM5Y2hhcHBlIGxlcyBjYXJhY3RcdTAwRThyZXMgc3BcdTAwRTljaWF1eCBwb3VyIHVuZSB1dGlsaXNhdGlvbiBkYW5zIHVuZSBleHByZXNzaW9uIHJcdTAwRTlndWxpXHUwMEU4cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIExhIGNoYVx1MDBFRW5lIGRlIGNhcmFjdFx1MDBFOHJlcyBcdTAwRTAgXHUwMEU5Y2hhcHBlci5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBMYSBjaGFcdTAwRUVuZSBkZSBjYXJhY3RcdTAwRThyZXMgXHUwMEU5Y2hhcHBcdTAwRTllLlxuICAgICAqL1xuICAgIHByaXZhdGUgZXNjYXBlUmVnRXhwKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgIH07XG4gIH07XG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnR5cGUgTElSUExvZ1N0YXR1cyA9ICdkdXBJbk5vdGUnIHwgJ2R1cEluRm9sZGVyJyB8ICdlbXB0eUxpc3QnIHwgJ2VtcHR5Tm90ZScgfCAncmVmTGltaXQnIHwgJ3N1YlJlZkxpbWl0JyB8ICdwYXRoU2V0dGluZycgfCAnZm9sZGVyQW5kRmlsZScgfCAnc2hvd0l0ZW0nIHwgJ25vQWN0aXZlVmlldyc7XG50eXBlIExJUlBMb2dUeXBlID0gJ2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdpbmZvJztcblxuY29uc3QgTElSUExvZ1N0YXR1c1ZhbHVlczogTElSUExvZ1N0YXR1c1tdID0gW1xuICAgICdkdXBJbk5vdGUnLFxuICAgICdkdXBJbkZvbGRlcicsXG4gICAgJ2VtcHR5TGlzdCcsXG4gICAgJ2VtcHR5Tm90ZScsXG4gICAgJ3JlZkxpbWl0JyxcbiAgICAnc3ViUmVmTGltaXQnLFxuICAgICdwYXRoU2V0dGluZycsXG4gICAgJ2ZvbGRlckFuZEZpbGUnLFxuICAgICdzaG93SXRlbScsXG4gICAgJ25vQWN0aXZlVmlldycsXG5dO1xuXG5jbGFzcyBMSVJQTG9nRWxlbWVudCB7XG4gICAgZmF0aGVyOiBzdHJpbmc7XG4gICAgY2hpbGQ6IHN0cmluZztcbiAgICBzdGF0dXM6IExJUlBMb2dTdGF0dXM7XG4gICAgY29tcGxlbWVudDogc3RyaW5nO1xuXG4gICAgc3RhdGljIGdldEVycm9yU3RhdHVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFsnZHVwSW5Gb2xkZXInLCdwYXRoU2V0dGluZyddO1xuICAgIH07XG5cbiAgICBzdGF0aWMgZ2V0V2FybmluZ1N0YXR1cygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCB3YXJuaW5nU3RhdHVzOnN0cmluZ1tdID0gW107XG4gICAgICAgIExJUlBMb2dTdGF0dXNWYWx1ZXMubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIUxJUlBMb2dFbGVtZW50LmdldEVycm9yU3RhdHVzKCkuY29udGFpbnMoZWxlbWVudCkgJiYgIUxJUlBMb2dFbGVtZW50LmdldFdhcm5pbmdTdGF0dXMoKS5jb250YWlucyhlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdTdGF0dXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gd2FybmluZ1N0YXR1cztcbiAgICB9O1xuXG4gICAgc3RhdGljIGdldEluZm9TdGF0dXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gWydzaG93SXRlbScsJ3JlZkxpbWl0Jywnc3ViUmVmTGltaXQnXTtcbiAgICB9O1xuXG4gICAgZ2V0VHlwZSgpOiBMSVJQTG9nVHlwZSB7XG4gICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbJ3BhdGhTZXR0aW5nJywgJ2R1cEluRm9sZGVyJ107XG4gICAgICAgIGlmIChlcnJvcnMuY29udGFpbnModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2Vycm9yJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICd3YXJuaW5nJ1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvciAoZmF0aGVyOiBzdHJpbmcsIGNoaWxkOiBzdHJpbmcsIHN0YXR1czogTElSUExvZ1N0YXR1cywgY29tcGxlbWVudDogc3RyaW5nID0gJycpIHtcbiAgICAgICAgdGhpcy5mYXRoZXIgPSBmYXRoZXI7XG4gICAgICAgIHRoaXMuY2hpbGQgPSBjaGlsZDtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuY29tcGxlbWVudCA9IGNvbXBsZW1lbnQ7XG4gICAgfTtcblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmdldFR5cGUoKX0gLyAke3RoaXMuZmF0aGVyfSAvICR7dGhpcy5jaGlsZH0gLyAke3RoaXMuc3RhdHVzfSAvICR7dGhpcy5jb21wbGVtZW50fWA7XG4gICAgfTtcbn07XG5jbGFzcyBMSVJQTG9nIHtcbiAgICBsb2dzOiBMSVJQTG9nRWxlbWVudFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9ncyA9IFtdO1xuICAgIH07XG4gICAgXG4gICAgcHVzaChmYXRoZXI6IHN0cmluZywgY2hpbGQ6IHN0cmluZywgc3RhdHVzOiBMSVJQTG9nU3RhdHVzLCBjb21wbGVtZW50OiBzdHJpbmcgPSAnJyk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ3MucHVzaChuZXcgTElSUExvZ0VsZW1lbnQoZmF0aGVyLCBjaGlsZCwgc3RhdHVzLCBjb21wbGVtZW50KSk7XG4gICAgfTtcblxuICAgIGFkZChsb2dzOiBMSVJQTG9nKTp2b2lke1xuICAgICAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3MuY29uY2F0KGxvZ3MubG9ncyk7XG4gICAgfTtcblxuICAgIGdldCh0eXBlOiBMSVJQTG9nVHlwZSk6IHN0cmluZ1tde1xuICAgICAgICBjb25zdCBsb2dzRm9yVHlwZSA9IHRoaXMubG9ncy5maWx0ZXIoKGVsZW1lbnQpID0+IFxuICAgICAgICAgICAgZWxlbWVudC5nZXRUeXBlKCkgPT09IHR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGdldEFycmF5OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsb2dzRm9yVHlwZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGdldEFycmF5LnB1c2goZWxlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnZXRBcnJheTtcbiAgICB9O1xuXG4gICAgZmx1c2goKTogdm9pZCB7XG4gICAgICAgIHRoaXMubG9ncyA9IFtdO1xuICAgIH07XG5cbn07XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW50ZXJmYWNlIExJUlBMaXN0SW50ZXJmYWNlIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgaXRlbXM6IHN0cmluZ1tdO1xuICAgIGdldFN1Z2dlc3Rpb24obm90ZU5hbWU6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlO1xuICAgIGZsdXNoTG9ncygpOiB2b2lkO1xuICAgIG5vdEhpZGRlbigpOiBib29sZWFuO1xuICAgIHBpY2tSYW5kb21JdGVtKCk6IHN0cmluZztcbiAgICBnZXRMb2dzKCk6IExJUlBMb2c7XG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXTtcbn1cblxuY2xhc3MgTElSUExpc3QgaW1wbGVtZW50cyBMSVJQTGlzdEludGVyZmFjZSB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGhpZGRlbjogYm9vbGVhbjtcbiAgICBpdGVtczogc3RyaW5nW107XG4gICAgbG9nczogTElSUExvZztcbiAgICBudWxsVmFsdWU6IHN0cmluZztcbiAgICBlc2NhcGVTdHJpbmc6IHN0cmluZztcbiAgICBjb21tZW50U3RyaW5nOiBzdHJpbmc7XG5cbiAgICBzdGF0aWMgZ2V0U2V0dGluZ1N0cmluZyh2YWx1ZTogJycgfCAnaGlkZScgfCAnaGlkZV9zdHJpbmcnIHwgJ2hpZGVfdGlja2VkJyA9ICcnKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuICctIFsgXSBIaWRlIHRoaXMgbGlzdFxcbidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdoaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdeXFwtIFxcXFxbW3ggXFxcXD9dXFxcXF0gSGlkZSB0aGlzIGxpc3QkJztcbiAgICAgICAgICAgICAgICBjYXNlICdoaWRlX3N0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnXFwtIFxcXFxbW3ggP11cXFxcXSBIaWRlIHRoaXMgbGlzdCc7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGlkZV90aWNrZWQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ15cXC0gXFxcXFtbeD9dXFxcXF0gSGlkZSB0aGlzIGxpc3QkJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKG5vdGVOYW1lOiBzdHJpbmcsIGxpbmVzOiBzdHJpbmdbXSwgbnVsbFZhbHVlOiBzdHJpbmcsIGVzY2FwZVN0cmluZzogc3RyaW5nLCBjb21tZW50U3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgICAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMubG9ncyA9IG5ldyBMSVJQTG9nKCk7XG4gICAgICAgIHRoaXMubnVsbFZhbHVlID0gbnVsbFZhbHVlO1xuICAgICAgICB0aGlzLmVzY2FwZVN0cmluZyA9IGVzY2FwZVN0cmluZztcbiAgICAgICAgdGhpcy5jb21tZW50U3RyaW5nID0gY29tbWVudFN0cmluZztcblxuICAgICAgICBjb25zdCBoZWFkaW5nUmVnRXggPSAvXiMgKyguKykkLztcbiAgICAgICAgdGhpcy50aXRsZSA9IGxpbmVzWzBdLnJlcGxhY2UoaGVhZGluZ1JlZ0V4LCBcIiQxXCIpO1xuICAgICAgICBsaW5lcy5zaGlmdCgpO1xuICAgICAgICBjb25zdCBsaXN0QmVnaW5JdGVtU3RyaW5nID0gYF4oPyEke0xJUlBMaXN0LmdldFNldHRpbmdTdHJpbmcoJ2hpZGVfc3RyaW5nJyl9KSB7MCwzfSgtfFxcXFxkK1xcLnxcXFxcKikgKyguKykkYDtcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSXRlbVJlZ2V4ID0gbmV3IFJlZ0V4cChsaXN0QmVnaW5JdGVtU3RyaW5nKTtcbiAgICAgICAgY29uc3QgbGlzdEJlZ2luSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gbGlzdEJlZ2luSXRlbVJlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAobGlzdEJlZ2luSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKG5vdGVOYW1lLCB0aGlzLnRpdGxlLCAnZW1wdHlMaXN0Jyk7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xlYW5MaW5lcyA9IGxpbmVzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVwbGFjZShsaXN0QmVnaW5JdGVtUmVnZXgsIFwiJDJcIilcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsaXN0QmVnaW5JbmRleGVzWzBdICE9PSAwKSB7XG4gICAgICAgICAgICBsZXQgbWREZXNjcmlwdGlvbiA9IGNsZWFuTGluZXMuc2xpY2UoMCwgbGlzdEJlZ2luSW5kZXhlc1swXSk7XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAyMlxuICAgICAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICAgICAgaWYgKG1kRGVzY3JpcHRpb25bMF0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBtZERlc2NyaXB0aW9uLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAzMlxuICAgICAgICAgICAgLy8gICBNRDAzMi9ibGFua3MtYXJvdW5kLWxpc3RzOiBMaXN0cyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICAgICAgLy8gRHVlIHRvIHNwbGl0IG9uICdcXG4nLCB0aGUgc2xpY2UsIGFuZCBhdCBsZWFzdCBhIGpvaW4gb24gJ1xcbicgdGhlIGxhc3QgJ1xcbicgaXMgYWx3YXlzIGxvc3QgIVxuICAgICAgICAgICAgLy8gU28gdGhlIGZvbG93aW5nIGNvZGUgaXMgdXNlbGVzc1xuICAgICAgICAgICAgLy8gaWYgKG1kRGVzY3JpcHRpb24uYXQoLTEpID09PSBcIlwiKSB7XG4gICAgICAgICAgICAvLyAgICAgbWREZXNjcmlwdGlvbi5wb3AoKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGxldCBpc0hpZGRlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaGlkZVJlZ2V4VGlja2VkID0gbmV3IFJlZ0V4cCAoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygnaGlkZV90aWNrZWQnKSk7XG4gICAgICAgICAgICBjb25zdCBoaWRlUmVnZXggPSBuZXcgUmVnRXhwIChMSVJQTGlzdC5nZXRTZXR0aW5nU3RyaW5nKCdoaWRlJykpO1xuICAgICAgICAgICAgbWREZXNjcmlwdGlvbi5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaGlkZVJlZ2V4VGlja2VkLnRlc3QoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGRlbiA9IGlzSGlkZGVuO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1kRGVzY3JpcHRpb24gPSBtZERlc2NyaXB0aW9uLmZpbHRlcigoZWxlbWVudCkgPT4gIShoaWRlUmVnZXgudGVzdChlbGVtZW50KSkpO1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IG1kRGVzY3JpcHRpb24uam9pbignXFxuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpc3RCZWdpbkNvdW50ID0gbGlzdEJlZ2luSW5kZXhlcy5sZW5ndGhcbiAgICAgICAgbGV0IGl0ZW06IHN0cmluZ1tdO1xuICAgICAgICBmb3IgKGxldCBjdXJyZW50SW5kZXggPSAwOyBjdXJyZW50SW5kZXggPCAobGlzdEJlZ2luQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2N1cnJlbnRJbmRleF0sIGxpc3RCZWdpbkluZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pKTtcbiAgICAgICAgICAgIHRoaXMucHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0gPSAoY2xlYW5MaW5lcy5zbGljZShsaXN0QmVnaW5JbmRleGVzW2xpc3RCZWdpbkNvdW50IC0gMV0pKTtcbiAgICAgICAgLy8gdGFraW5nIGNhcmUgb2YgTUQwMjJcbiAgICAgICAgLy8gICBNRDAyMi9ibGFua3MtYXJvdW5kLWhlYWRpbmdzOiBIZWFkaW5ncyBzaG91bGQgYmUgc3Vycm91bmRlZCBieSBibGFuayBsaW5lc1xuICAgICAgICBpZiAoaXRlbS5hdCgtMSkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGl0ZW0ucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdXNoSXRlbUJhc2VkT25XZWlnaHQoaXRlbSk7XG4gICAgfTtcblxuICAgIGZsdXNoTG9ncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sb2dzLmZsdXNoKClcbiAgICB9O1xuXG4gICAgcHVzaEl0ZW1CYXNlZE9uV2VpZ2h0KGl0ZW06IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IEl0ZW1XaXRoV2VpZ2h0UmVnRXggPSAvXlxcKChcXGQrKVxcKVxccysoLispJC87XG4gICAgICAgIGxldCByZWdFeEV4ZWN1dGlvbjtcbiAgICAgICAgbGV0IHJlcGVhdDogbnVtYmVyO1xuICAgICAgICBpZiAoKHJlZ0V4RXhlY3V0aW9uID0gSXRlbVdpdGhXZWlnaHRSZWdFeC5leGVjKGl0ZW1bMF0pKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVwZWF0ID0gTnVtYmVyKHJlZ0V4RXhlY3V0aW9uWzFdKTtcbiAgICAgICAgICAgIGl0ZW1bMF0gPSByZWdFeEV4ZWN1dGlvblsyXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcGVhdCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW1bMF0gPT09IHRoaXMubnVsbFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpdGVtWzBdID0gXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zaGlmdCgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlc2NhcGVTdHJpbmdSZWdleCA9IGBeICoke3RoaXMuZXNjYXBlU3RyaW5nfSguKilgO1xuICAgICAgICBjb25zdCBlc2NhcGVTdHJpbmdSZWdFeCA9IG5ldyBSZWdFeHAoZXNjYXBlU3RyaW5nUmVnZXgsICdnbScpO1xuICAgICAgICBjb25zdCBlc2NhcGVJdGVtID0gaXRlbS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnJlcGxhY2UoZXNjYXBlU3RyaW5nUmVnRXgsICckMScpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHN0cmluZ0l0ZW0gPSBlc2NhcGVJdGVtLmpvaW4oJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goc3RyaW5nSXRlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0U3VnZ2VzdGlvbihub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2Uge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0ge1xuICAgICAgICAgICAgbm90ZU5hbWU6IG5vdGVOYW1lLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogKHRoaXMuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbjtcbiAgICB9O1xuXG4gICAgbm90SGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuaGlkZGVuO1xuICAgIH07XG5cbiAgICBwaWNrUmFuZG9tSXRlbSgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmFuZG9tSXRlbTogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmFuZG9tSXRlbSA9IHRoaXMuaXRlbXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5pdGVtcy5sZW5ndGgpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZG9tSXRlbTtcbiAgICB9O1xuXG4gICAgZ2V0TG9ncygpOiBMSVJQTG9nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9ncztcbiAgICB9O1xuXG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ3MuZ2V0KCd3YXJuaW5nJyk7XG4gICAgfTtcblxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIH07XG5cbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbnRlcmZhY2UgTElSUERvUmVmU3ViSW50ZXJmYWNlIHtcbiAgICBsYXN0TGlzdFRpdGxlOiBzdHJpbmc7XG4gICAgbW9kaWZpZWRUZXh0OiBzdHJpbmc7XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW50ZXJmYWNlIExJUlBOb3RlSW50ZXJmYWNlIHtcbiAgICBsb2FkRnJvbU5vdGUobm90ZU5hbWU6IHN0cmluZywgbm90ZUNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24oKTogTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbik6IHN0cmluZzsgXG4gICAgZ2V0RXJyb3IoKTogc3RyaW5nW107XG4gICAgZ2V0V2FybmluZygpOiBzdHJpbmdbXTtcbiAgICBnZXRMb2dzKCk6IExJUlBMb2c7XG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW107XG4gICAgZmx1c2hMb2dzKCk6IHZvaWQ7XG59XG5cbmNsYXNzIExJUlBOb3RlIGltcGxlbWVudHMgTElSUE5vdGVJbnRlcmZhY2Uge1xuICAgIG5vdGVOYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBsaXN0OiBMSVJQTGlzdFtdO1xuICAgIGxvZ3M6IExJUlBMb2c7XG4gICAgbnVsbFZhbHVlOiBzdHJpbmc7XG4gICAgZXNjYXBlU3RyaW5nOiBzdHJpbmc7XG4gICAgY29tbWVudFN0cmluZzogc3RyaW5nO1xuICAgIHJvbGxEaWNlOiBib29sZWFuO1xuICAgIGtlZXBDb21tZW50OiBib29sZWFuO1xuICAgIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXI7XG5cbiAgICBzdGF0aWMgZ2V0U2V0dGluZ1N0cmluZyh2YWx1ZTogJycgfCAnZGVsZXRlQ29tbWVudCcgfCAnZGVsZXRlQ29tbWVudF90aWNrZWQnID0gJycpOiBzdHJpbmcge1xuICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJy0gWyBdIERvIG5vdCBwcmVzZXJ2ZSBjb21tZW50c1xcbidcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVDb21tZW50JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdeXFwtIFxcXFxbW3ggP11cXFxcXSBEbyBub3QgcHJlc2VydmUgY29tbWVudHMkJztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVDb21tZW50X3RpY2tlZCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnXlxcLSBcXFxcW1t4P11cXFxcXSBEbyBub3QgcHJlc2VydmUgY29tbWVudHMkJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yIChudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcsIGNvbW1lbnRTdHJpbmc6IHN0cmluZywgcmVmZXJlbmNlTWF4RGVwdGg6IG51bWJlcikge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gXCJcIjtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG4gICAgICAgIHRoaXMuY29tbWVudFN0cmluZyA9IGNvbW1lbnRTdHJpbmc7XG4gICAgICAgIHRoaXMucm9sbERpY2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZU1heERlcHRoID0gcmVmZXJlbmNlTWF4RGVwdGg7XG4gICAgICAgIHRoaXMua2VlcENvbW1lbnQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBnZXRMaXN0VGl0bGVzKCkgOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBsaXN0VGl0bGVzOnN0cmluZ1tdID0gW107XG4gICAgICAgIHRoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxpc3RUaXRsZXMucHVzaChlbGVtZW50LnRpdGxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsaXN0VGl0bGVzO1xuICAgIH07XG5cbiAgICB3b3JrV2l0aENvbW1lbnQgKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIGxldCdzIGRlZmluZSByZWdleFxuICAgICAgICBjb25zdCB0aWNrU2V0dGluZ1JlZ0V4ID0gbmV3IFJlZ0V4cChMSVJQTm90ZS5nZXRTZXR0aW5nU3RyaW5nKCdkZWxldGVDb21tZW50X3RpY2tlZCcpKTtcbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ2V4ID0gL14jIC4rJC87XG4gICAgICAgIGNvbnN0IGNvbW1lbnRMaW5lU3RyaW5nID0gYF4ke3RoaXMuY29tbWVudFN0cmluZ30kYDtcbiAgICAgICAgY29uc3QgY29tbWVudExpbmVSZWdleCA9IG5ldyBSZWdFeHAoY29tbWVudExpbmVTdHJpbmcpO1xuICAgICAgICBjb25zdCBjb21tZW50QmxvY2sgPSBgJHt0aGlzLmNvbW1lbnRTdHJpbmd9Lio/JHt0aGlzLmNvbW1lbnRTdHJpbmd9YDtcbiAgICAgICAgY29uc3QgY29tbWVudEJsb2NrUmVnZXggPSBuZXcgUmVnRXhwKGNvbW1lbnRCbG9jayk7XG4gICAgICAgIC8vIGxldCdzIGZpbmQgc2V0dGluZ3NcbiAgICAgICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29uc3Qgc2V0dGluZ0luZGV4ID0gZmluZEluZGV4ZXMobGluZXMsKGVsZW1lbnQpID0+IHRpY2tTZXR0aW5nUmVnRXgudGVzdChlbGVtZW50KSk7XG4gICAgICAgIGNvbnN0IGNvbW1lbnRMaW5lSW5kZXggPSBmaW5kSW5kZXhlcyhsaW5lcywoZWxlbWVudCkgPT4gY29tbWVudExpbmVSZWdleC50ZXN0KGVsZW1lbnQpKTtcbiAgICAgICAgY29uc3QgaGVhZGluZ0luZGV4ID0gZmluZEluZGV4ZXMobGluZXMsKGVsZW1lbnQpID0+IGhlYWRpbmdSZWdleC50ZXN0KGVsZW1lbnQpKTtcbiAgICAgICAgLy8gc2kgcGFzIGRlIHRpdHJlIG9uIHRvdWNoZSBcdTAwRTAgcmllblxuICAgICAgICBpZiAoaGVhZGluZ0luZGV4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmICgoc2V0dGluZ0luZGV4Lmxlbmd0aCA9PT0gMCkgfHwgKHNldHRpbmdJbmRleFswXSA+IGhlYWRpbmdJbmRleFswXSkpIHtcbiAgICAgICAgICAgIC8vIHNpIHBhcyBkZSBzZXR0aW5ncyBvdSBzZXR0aW5ncyBhcHJcdTAwRThzIGxlIHByZW1pZXIgdGl0cmUgMVxuICAgICAgICAgICAgdGhpcy5rZWVwQ29tbWVudCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpbnRcdTAwRTlncmVyIGluZGV4QmV0d2VlbkZpbmRJbmRleGVzXG4gICAgICAgICAgICB0aGlzLmtlZXBDb21tZW50ID0gaW5kZXhCZXR3ZWVuRmluZEluZGV4ZXMoc2V0dGluZ0luZGV4WzBdLGNvbW1lbnRMaW5lSW5kZXgpXG4gICAgICAgICAgICAvLyBzaW5vbiBrZWVwaW5kZVxuICAgICAgICB9XG4gICAgICAgIGxldCBpbnNpZGVDb21tZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IG5ld0xpbmVzOnN0cmluZ1tdID0gW107XG4gICAgICAgIGxpbmVzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgbGV0IGlzQUNvbW1lbnRMaW5lID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoY29tbWVudExpbmVSZWdleC50ZXN0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgaW5zaWRlQ29tbWVudCA9ICFpbnNpZGVDb21tZW50O1xuICAgICAgICAgICAgICAgIGlzQUNvbW1lbnRMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnNpZGVDb21tZW50IHx8IGlzQUNvbW1lbnRMaW5lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMua2VlcENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TGluZXMucHVzaCh0aGlzLmVzY2FwZVN0cmluZyArIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmtlZXBDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0xpbmVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TGluZXMucHVzaChlbGVtZW50LnJlcGxhY2UoY29tbWVudEJsb2NrUmVnZXgsJycpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXdMaW5lcy5qb2luKCdcXG4nKTtcbiAgICB9O1xuXG4gICAgY2xlYXJDb21tZW50KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGNvbW1lbnRCbG9jayA9IGAke3RoaXMuY29tbWVudFN0cmluZ30uKj8oJHt0aGlzLmNvbW1lbnRTdHJpbmd9fCQpYDtcbiAgICAgICAgY29uc3QgY29tbWVudEJsb2NrUmVnZXggPSBuZXcgUmVnRXhwKGNvbW1lbnRCbG9jaywgJ2dzJyk7XG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoY29tbWVudEJsb2NrUmVnZXgsICcnKTsgICAgICBcbiAgICB9O1xuXG4gICAgbG9hZEZyb21Ob3RlKG5vdGVOYW1lOiBzdHJpbmcsIG5vdGVDb250ZW50OiBzdHJpbmcsICk6IGJvb2xlYW4ge1xuICAgICAgICB0aGlzLm5vdGVOYW1lID0gbm90ZU5hbWU7XG4gICAgICAgIGxldCBsaW5lczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICAvLyBpZiAodGhpcy5rZWVwQ29tbWVudCkge1xuICAgICAgICAvLyAgICAgbGluZXMgPSBub3RlQ29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgIC8vICAgICBsaW5lcyA9IHRoaXMuY2xlYXJDb21tZW50KG5vdGVDb250ZW50KS5zcGxpdCgnXFxuJyk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgbGluZXMgPSB0aGlzLndvcmtXaXRoQ29tbWVudChub3RlQ29udGVudCkuc3BsaXQoJ1xcbicpO1xuICAgICAgICBpZiAobGluZXNbMF0gPT09ICdcXG4nKSB7XG4gICAgICAgICAgICAvLyB0YWtpbmcgY2FyZSBvZiBNRDAyMlxuICAgICAgICAgICAgLy8gRHJvcCB0aGUgZmlyc3QgbGluZSBvZiB0aGUgbm9vdGUgaWYgaXQncyBhbiBlbXB0eSBvbmUsXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRlY2huaWNhbGx5IE5vdGUgdGl0bGUgaXMgYSBoZWFkaW5nIG9uZVxuICAgICAgICAgICAgbGluZXMuc2hpZnQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGVhZGluZ1JlZ2V4ID0gL14jIC4rJC87XG4gICAgICAgIGxldCBoZWFkaW5nSW5kZXhlcyA9IGZpbmRJbmRleGVzKGxpbmVzLCAoZWxlbWVudCkgPT4gaGVhZGluZ1JlZ2V4LnRlc3QoZWxlbWVudCkpO1xuICAgICAgICBpZiAoaGVhZGluZ0luZGV4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlTmFtZSwgJycsICdlbXB0eU5vdGUnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGluZ0luZGV4ZXNbMF0gIT09IDApIHtcbiAgICAgICAgICAgIC8vIHRha2luZyBjYXJlIG9mIE1EMDIyXG4gICAgICAgICAgICAvLyAgIE1EMDIyL2JsYW5rcy1hcm91bmQtaGVhZGluZ3M6IEhlYWRpbmdzIHNob3VsZCBiZSBzdXJyb3VuZGVkIGJ5IGJsYW5rIGxpbmVzXG4gICAgICAgICAgICAvLyBEdWUgdG8gc3BsaXQgb24gJ1xcbicsIHRoZSBzbGljZSwgYW5kIGF0IGxlYXN0IGEgam9pbiBvbiAnXFxuJyB0aGUgbGFzdCAnXFxuJyBpcyBhbHdheXMgbG9zdCAhXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBtZERlc2NyaXB0aW9uID0gbGluZXMuc2xpY2UoMCwgaGVhZGluZ0luZGV4ZXNbMF0pO1xuICAgICAgICAgICAgLy8gV09SSyBJTiBQUk9HUkVTU1xuICAgICAgICAgICAgLy8gbGV0IGtlZXBDb21tZW50OiBib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIGNvbnN0IGRlbGV0ZVJlZ2V4VGlja2VkID0gbmV3IFJlZ0V4cCAoTElSUE5vdGUuZ2V0U2V0dGluZ1N0cmluZygnZGVsZXRlQ29tbWVudF90aWNrZWQnKSk7XG4gICAgICAgICAgICAvLyBjb25zdCBkZWxldGVSZWdleCA9IG5ldyBSZWdFeHAgKExJUlBOb3RlLmdldFNldHRpbmdTdHJpbmcoJ2RlbGV0ZUNvbW1lbnQnKSk7XG4gICAgICAgICAgICAvLyBtZERlc2NyaXB0aW9uLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIGlmIChkZWxldGVSZWdleFRpY2tlZC50ZXN0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGtlZXBDb21tZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMua2VlcENvbW1lbnQgPSBrZWVwQ29tbWVudDtcbiAgICAgICAgICAgIC8vICAgICB9O1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyBtZERlc2NyaXB0aW9uID0gbWREZXNjcmlwdGlvbi5maWx0ZXIoKGVsZW1lbnQpID0+ICEoZGVsZXRlUmVnZXgudGVzdChlbGVtZW50KSkpO1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IG1kRGVzY3JpcHRpb24uam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGluZ0NvdW50ID0gaGVhZGluZ0luZGV4ZXMubGVuZ3RoO1xuICAgICAgICBsZXQgcHVzaFN1Y2Nlc3M6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGN1cnJlbnRJbmRleCA9IDA7IGN1cnJlbnRJbmRleCA8IChoZWFkaW5nQ291bnQgLSAxKTsgY3VycmVudEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBwdXNoU3VjY2VzcyA9IHRoaXMucHVzaExpc3RJZk5vdEV4aXN0cyhuZXcgTElSUExpc3QodGhpcy5ub3RlTmFtZSwgbGluZXMuc2xpY2UoaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4XSwgaGVhZGluZ0luZGV4ZXNbY3VycmVudEluZGV4ICsgMV0pLCB0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMuY29tbWVudFN0cmluZykpICYmIHB1c2hTdWNjZXNzO1xuICAgICAgICB9O1xuICAgICAgICAgcHVzaFN1Y2Nlc3MgPSB0aGlzLnB1c2hMaXN0SWZOb3RFeGlzdHMobmV3IExJUlBMaXN0KHRoaXMubm90ZU5hbWUsIGxpbmVzLnNsaWNlKGhlYWRpbmdJbmRleGVzW2hlYWRpbmdDb3VudCAtIDFdKSwgdGhpcy5udWxsVmFsdWUsIHRoaXMuZXNjYXBlU3RyaW5nLCB0aGlzLmNvbW1lbnRTdHJpbmcpKSAmJiBwdXNoU3VjY2VzcztcbiAgICAgICAgIHJldHVybiBwdXNoU3VjY2VzcztcbiAgICB9O1xuXG4gICAgcHVzaExpc3RJZk5vdEV4aXN0cyhsaXN0VG9QdXNoOiBMSVJQTGlzdCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5nZXRMaXN0VGl0bGVzKCkuY29udGFpbnMobGlzdFRvUHVzaC50aXRsZSkpIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKHRoaXMubm90ZU5hbWUsIGxpc3RUb1B1c2gudGl0bGUsICdkdXBJbk5vdGUnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKGxpc3RUb1B1c2gpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW46IGJvb2xlYW4gPSBmYWxzZSk6IExJUlBTdWdnZXN0aW9uTGlzdCB7XG4gICAgICAgIGNvbnN0IG5vdGVTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdpdGhIaWRkZW4gfHwgZWxlbWVudC5ub3RIaWRkZW4oKSkge1xuICAgICAgICAgICAgICAgIG5vdGVTdWdnZXN0aW9uLnB1c2goZWxlbWVudC5nZXRTdWdnZXN0aW9uKHRoaXMubm90ZU5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub3RlU3VnZ2VzdGlvbjtcbiAgICB9O1xuXG4gICAgZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24odGV4dDogc3RyaW5nKTogTElSUERvUmVmU3ViSW50ZXJmYWNlIHtcbiAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICBsZXQgbW9kaWZpZWRUZXh0OnN0cmluZyA9IHRleHQ7XG4gICAgICAgIGxldCBsaXN0VGl0bGU6c3RyaW5nID0gXCJcIjtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVmUmVnZXg6IHN0cmluZyA9IGBcXHsoJHt0aGlzLmxpc3QubWFwKChlbGVtZW50KSA9PiBlc2NhcGVSZWdleChlbGVtZW50LnRpdGxlKSkuam9pbignfCcpfSlcXH1gO1xuICAgICAgICBmb3IgKGxldCByZXBlYXQgPSAwOyByZXBlYXQgPCB0aGlzLnJlZmVyZW5jZU1heERlcHRoOyByZXBlYXQrKykge1xuICAgICAgICAgICAgY29uc3QgcmVmUmVnZXggPSBuZXcgUmVnRXhwIChzdHJpbmdSZWZSZWdleCwnbWcnKTtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWZSZWdleC5leGVjKG1vZGlmaWVkVGV4dCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlOiBzdHJpbmcgPSB0aGlzLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobWF0Y2hbMV0sIGZhbHNlKTsgXG4gICAgICAgICAgICAgICAgbGlzdFRpdGxlID0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgbW9kaWZpZWRUZXh0ID0gbW9kaWZpZWRUZXh0LnJlcGxhY2UobGlzdFRpdGxlLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmVmUmVnZXgubGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBuZXdWYWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm9sbERpY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpY2VSb2xsZXIgPSBuZXcgRGljZVJvbGxlcigpO1xuICAgICAgICAgICAgbW9kaWZpZWRUZXh0ID0gZGljZVJvbGxlci5yZXBsYWNlRGljZVJvbGxzKG1vZGlmaWVkVGV4dCwneycsJ30nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IG1vZGlmaWVkVGV4dCxcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZmx1c2hMb2dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ3MuZmx1c2goKTtcbiAgICAgICAgdGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5mbHVzaExvZ3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlOiBzdHJpbmcsIHdvcmtPblJlZmVyZW5jZTogYm9vbGVhbiA9IHRydWUpOiBzdHJpbmcge1xuICAgICAgICBsZXQgcmFuZG9tSXRlbTogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgbGV0IHJldHVybk9mRG9FeGVjU3ViOiBMSVJQRG9SZWZTdWJJbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICBsYXN0TGlzdFRpdGxlOiBsaXN0VGl0bGUsXG4gICAgICAgICAgICBtb2RpZmllZFRleHQ6IFwiXCIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gdGhpcy5saXN0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQudGl0bGUgPT09IGxpc3RUaXRsZSk7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByYW5kb21JdGVtID0gY3VycmVudExpc3QucGlja1JhbmRvbUl0ZW0oKTtcbiAgICAgICAgICAgIGlmICh3b3JrT25SZWZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5PZkRvRXhlY1N1YiA9IHRoaXMuZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24ocmFuZG9tSXRlbSk7XG4gICAgICAgICAgICAgICAgcmFuZG9tSXRlbSA9IHJldHVybk9mRG9FeGVjU3ViLm1vZGlmaWVkVGV4dDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdSZWZSZWdleDogc3RyaW5nID0gYFxceygke3RoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IGVzY2FwZVJlZ2V4KGVsZW1lbnQudGl0bGUpKS5qb2luKCd8Jyl9KVxcfWA7XG4gICAgICAgICAgICAgICAgY29uc3QgUmVmUmVnZXggPSBuZXcgUmVnRXhwIChzdHJpbmdSZWZSZWdleCk7XG4gICAgICAgICAgICAgICAgaWYgKFJlZlJlZ2V4LnRlc3QocmFuZG9tSXRlbSkgJiYgd29ya09uUmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5PZkRvRXhlY1N1Yi5sYXN0TGlzdFRpdGxlID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2ZEb0V4ZWNTdWIubGFzdExpc3RUaXRsZSA9IGxpc3RUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCh0aGlzLm5vdGVOYW1lLCByZXR1cm5PZkRvRXhlY1N1Yi5sYXN0TGlzdFRpdGxlLCAncmVmTGltaXQnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByYW5kb21JdGVtO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGdldEVycm9yKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9ncy5nZXQoJ2Vycm9yJyk7XG4gICAgfTtcblxuICAgIGdldExvZ3MoKTogTElSUExvZyB7XG4gICAgICAgIGxldCBhbGxMb2dzID0gbmV3IExJUlBMb2c7XG4gICAgICAgIGFsbExvZ3MuYWRkKHRoaXMubG9ncyk7XG4gICAgICAgIHRoaXMubGlzdC5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbExvZ3MuYWRkKGVsZW1lbnQuZ2V0TG9ncygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxMb2dzO1xuICAgIH07XG5cbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbFdhcm5pbmc6IHN0cmluZ1tdID0gdGhpcy5sb2dzLmdldCgnd2FybmluZycpO1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsV2FybmluZyA9IGFsbFdhcm5pbmcuY29uY2F0KGVsZW1lbnQuZ2V0V2FybmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxXYXJuaW5nXG4gICAgfTtcblxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdC5sZW5ndGg7XG4gICAgfTtcbn1cblxuY2xhc3MgTElSUE11bHRpTm90ZSBpbXBsZW1lbnRzIExJUlBOb3RlSW50ZXJmYWNlIHtcbiAgICBtdWx0aU5vdGU6IExJUlBOb3RlW107XG4gICAgbnVsbFZhbHVlOiBzdHJpbmc7XG4gICAgZXNjYXBlU3RyaW5nOiBzdHJpbmc7XG4gICAgY29tbWVudFN0cmluZzogc3RyaW5nO1xuICAgIHJlZmVyZW5jZU1heERlcHRoOiBudW1iZXI7XG4gICAgbG9nczogTElSUExvZztcblxuICAgIGNvbnN0cnVjdG9yIChudWxsVmFsdWU6IHN0cmluZywgZXNjYXBlU3RyaW5nOiBzdHJpbmcsIGNvbW1lbnRTdHJpbmc6IHN0cmluZywgcmVmZXJlbmNlTWF4RGVwdGg6IG51bWJlcikge1xuICAgICAgICB0aGlzLm11bHRpTm90ZSA9IFtdO1xuICAgICAgICB0aGlzLm51bGxWYWx1ZSA9IG51bGxWYWx1ZTtcbiAgICAgICAgdGhpcy5lc2NhcGVTdHJpbmcgPSBlc2NhcGVTdHJpbmc7XG4gICAgICAgIHRoaXMuY29tbWVudFN0cmluZyA9IGNvbW1lbnRTdHJpbmc7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlTWF4RGVwdGggPSByZWZlcmVuY2VNYXhEZXB0aDtcbiAgICAgICAgdGhpcy5sb2dzID0gbmV3IExJUlBMb2coKTtcbiAgICB9O1xuXG4gICAgbG9hZEZyb21Ob3RlKG5vdGVOYW1lOiBzdHJpbmcsIG5vdGVDb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgY3VycmVudE5vdGUgPSBuZXcgTElSUE5vdGUodGhpcy5udWxsVmFsdWUsIHRoaXMuZXNjYXBlU3RyaW5nLCB0aGlzLmNvbW1lbnRTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICBsZXQgc3RhdHVzID0gY3VycmVudE5vdGUubG9hZEZyb21Ob3RlKG5vdGVOYW1lLCBub3RlQ29udGVudCk7XG4gICAgICAgIHN0YXR1cyA9IHRoaXMucHVzaE5vdGVJZkxpc3ROb3RFeGlzdHMoY3VycmVudE5vdGUpICYmIHN0YXR1cztcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9O1xuXG4gICAgcHVzaE5vdGVJZkxpc3ROb3RFeGlzdHMobm90ZVRvUHVzaDogTElSUE5vdGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWxsTGlzdFRpdGxlID0gdGhpcy5nZXRMaXN0VGl0bGVzKCk7XG4gICAgICAgIGxldCB1bmljOmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICBub3RlVG9QdXNoLmdldExpc3RUaXRsZXMoKS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChhbGxMaXN0VGl0bGUuY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ3MucHVzaChub3RlVG9QdXNoLm5vdGVOYW1lLCBlbGVtZW50LCAnZHVwSW5Gb2xkZXInLCB0aGlzLmdldE5vdGVOYW1lRnJvbUxpc3RUaXRsZShlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgdW5pYyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVuaWMpIHtcbiAgICAgICAgICAgIHRoaXMubXVsdGlOb3RlLnB1c2gobm90ZVRvUHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MuYWRkKG5vdGVUb1B1c2gubG9ncyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1bmljO1xuICAgIH07XG5cbiAgICBnZXROb3RlTmFtZUZyb21MaXN0VGl0bGUobGlzdFRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbm90ZSA9IHRoaXMubXVsdGlOb3RlLmZpbmQoKGVsZW1lbnQpID0+XG4gICAgICAgICAgICBlbGVtZW50LmdldExpc3RUaXRsZXMoKS5jb250YWlucyhsaXN0VGl0bGUpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChub3RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RlLm5vdGVOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgXG4gICAgZ2V0TGlzdFRpdGxlcygpIDogc3RyaW5nW10ge1xuICAgICAgICBsZXQgbGlzdFRpdGxlczpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxpc3RUaXRsZXMgPSBsaXN0VGl0bGVzLmNvbmNhdChlbGVtZW50LmdldExpc3RUaXRsZXMoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdFRpdGxlcztcbiAgICB9O1xuXG4gICAgZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbjogYm9vbGVhbiA9IGZhbHNlKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgbGV0IGFsbExpc3RTdWdnZXN0aW9uID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbExpc3RTdWdnZXN0aW9uID0gYWxsTGlzdFN1Z2dlc3Rpb24uY29uY2F0KGVsZW1lbnQuZ2V0TGlzdFN1Z2dlc3Rpb24od2l0aEhpZGRlbikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbExpc3RTdWdnZXN0aW9uO1xuICAgIH07XG5cbiAgICBnZXROb3RlU3VnZ2VzdGlvbih3aXRoSGlkZGVuOiBib29sZWFuID0gZmFsc2UpOiBMSVJQU3VnZ2VzdGlvbkxpc3Qge1xuICAgICAgICBsZXQgbm90ZVN1Z2dlc3Rpb24gPSBuZXcgTElSUFN1Z2dlc3Rpb25MaXN0O1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdldExpc3RTdWdnZXN0aW9uKHdpdGhIaWRkZW4pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBub3RlU3VnZ2VzdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZU5hbWU6IGVsZW1lbnQubm90ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBlbGVtZW50Lm5vdGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGVsZW1lbnQuZGVzY3JpcHRpb24uc3BsaXQoJ1xcbicpWzBdKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm90ZVN1Z2dlc3Rpb247XG4gICAgfTtcblxuICAgIGRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKHRleHQ6IHN0cmluZyk6c3RyaW5nIHtcbiAgICAgICAgbGV0IHN1cGVyTm90ZSA9IG5ldyBMSVJQTm90ZSh0aGlzLm51bGxWYWx1ZSwgdGhpcy5lc2NhcGVTdHJpbmcsIHRoaXMuY29tbWVudFN0cmluZywgdGhpcy5yZWZlcmVuY2VNYXhEZXB0aCk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc3VwZXJOb3RlLmxpc3QgPSBzdXBlck5vdGUubGlzdC5jb25jYXQoZWxlbWVudC5saXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByZXR1cm5PZkRvRXhlY1N1YjogTElSUERvUmVmU3ViSW50ZXJmYWNlID0ge1xuICAgICAgICAgICAgbGFzdExpc3RUaXRsZTogJ1JlZmVyZW5jZSBzdWJzdGl0dXRpb24gaW4gc2VsZWN0aW9uJyxcbiAgICAgICAgICAgIG1vZGlmaWVkVGV4dDogXCJcIixcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuT2ZEb0V4ZWNTdWIgPSBzdXBlck5vdGUuZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24odGV4dCk7XG4gICAgICAgIGxldCBsaXN0VGl0bGU6c3RyaW5nID0gXCJcIjtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVmUmVnZXg6IHN0cmluZyA9IGBcXHsoJHtzdXBlck5vdGUubGlzdC5tYXAoKGVsZW1lbnQpID0+IGVzY2FwZVJlZ2V4KGVsZW1lbnQudGl0bGUpKS5qb2luKCd8Jyl9KVxcfWA7XG4gICAgICAgIGNvbnN0IHJlZlJlZ2V4ID0gbmV3IFJlZ0V4cChzdHJpbmdSZWZSZWdleCk7XG4gICAgICAgIGlmIChyZWZSZWdleC50ZXN0KHJldHVybk9mRG9FeGVjU3ViLm1vZGlmaWVkVGV4dCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCcnLCAnJywgJ3N1YlJlZkxpbWl0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXR1cm5PZkRvRXhlY1N1Yi5tb2RpZmllZFRleHRcbiAgICB9O1xuXG4gICAgcGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGU6IHN0cmluZywgd29ya09uUmVmZXJlbmNlOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBzdXBlck5vdGUgPSBuZXcgTElSUE5vdGUodGhpcy5udWxsVmFsdWUsIHRoaXMuZXNjYXBlU3RyaW5nLCB0aGlzLmNvbW1lbnRTdHJpbmcsIHRoaXMucmVmZXJlbmNlTWF4RGVwdGgpO1xuICAgICAgICBzdXBlck5vdGUubm90ZU5hbWUgPSB0aGlzLmdldE5vdGVOYW1lRnJvbUxpc3RUaXRsZShsaXN0VGl0bGUpO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHN1cGVyTm90ZS5saXN0ID0gc3VwZXJOb3RlLmxpc3QuY29uY2F0KGVsZW1lbnQubGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByYW5kb21JdGVtOiBzdHJpbmcgPSBzdXBlck5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpO1xuICAgICAgICB0aGlzLmxvZ3MuYWRkKHN1cGVyTm90ZS5nZXRMb2dzKCkpO1xuICAgICAgICByZXR1cm4gcmFuZG9tSXRlbTtcbiAgICB9O1xuXG4gICAgZmx1c2hMb2dzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ3MuZmx1c2goKTtcbiAgICAgICAgdGhpcy5tdWx0aU5vdGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmZsdXNoTG9ncygpXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnZXRFcnJvcigpOiBzdHJpbmdbXSB7XG4gICAgICAgIGxldCBhbGxFcnJvcjpzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm11bHRpTm90ZS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFsbEVycm9yID0gYWxsRXJyb3IuY29uY2F0KGVsZW1lbnQuZ2V0RXJyb3IoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWxsRXJyb3I7XG4gICAgfTtcblxuICAgIGdldExvZ3MoKTogTElSUExvZyB7XG4gICAgICAgIGxldCBhbGxMb2dzID0gbmV3IExJUlBMb2c7XG4gICAgICAgIGFsbExvZ3MuYWRkKHRoaXMubG9ncyk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsTG9ncy5hZGQoZWxlbWVudC5nZXRMb2dzKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbExvZ3M7XG4gICAgfTtcblxuICAgIGhhc0Vycm9ycygpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWxsTG9ncyA9IHRoaXMuZ2V0TG9ncygpO1xuICAgICAgICByZXR1cm4gKGFsbExvZ3MuZ2V0KCdlcnJvcicpLmxlbmd0aCAhPT0gMCkgO1xuICAgIH07XG5cbiAgICBnZXRXYXJuaW5nKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbFdhcm5pbmc6c3RyaW5nW10gPSB0aGlzLmxvZ3MuZ2V0KCd3YXJuaW5nJyk7XG4gICAgICAgIHRoaXMubXVsdGlOb3RlLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYWxsV2FybmluZyA9IGFsbFdhcm5pbmcuY29uY2F0KGVsZW1lbnQuZ2V0V2FybmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxXYXJuaW5nO1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpTm90ZS5sZW5ndGg7XG4gICAgfTtcblxufTtcblxuaW50ZXJmYWNlIExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlIHtcbiAgICBub3RlTmFtZTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuY2xhc3MgTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICBsaXN0OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgIH07XG5cbiAgICBwdXNoIChlbGVtZW50OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxpc3QucHVzaChlbGVtZW50KTtcbiAgICB9O1xuXG4gICAgZmlsdGVyQnlOb3RlTmFtZShub3RlTmFtZTogc3RyaW5nKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgZmlsdGVyTGlzdCA9IG5ldyBMSVJQU3VnZ2VzdGlvbkxpc3QoKTtcbiAgICAgICAgdGhpcy5saXN0Lm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm90ZU5hbWUgPT09IG5vdGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTGlzdC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbHRlckxpc3Q7XG4gICAgfTtcblxuICAgIGZpbHRlcihjYWxsYmFjazogKGVsZW1lbnQ6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBpbmRleD86IG51bWJlciwgYXJyYXk/OiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZVtdKSA9PiBib29sZWFuKTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRMaXN0ID0gbmV3IExJUlBTdWdnZXN0aW9uTGlzdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKHRoaXMubGlzdFtpXSwgaSwgdGhpcy5saXN0KSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5wdXNoKHRoaXMubGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTGlzdDtcbiAgICB9O1xuXG4gICAgY29uY2F0KG90aGVyTGlzdDogTElSUFN1Z2dlc3Rpb25MaXN0KTogTElSUFN1Z2dlc3Rpb25MaXN0IHtcbiAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMSVJQU3VnZ2VzdGlvbkxpc3QoKTtcbiAgICAgICAgbmV3TGlzdC5saXN0ID0gdGhpcy5saXN0LmNvbmNhdChvdGhlckxpc3QubGlzdCk7XG4gICAgICAgIHJldHVybiBuZXdMaXN0O1xuICAgIH07XG5cbiAgICBnZXQgbGVuZ3RoICgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0Lmxlbmd0aDtcbiAgICB9O1xufVxuXG5leHBvcnQgY2xhc3MgTElSUFN1Z2dlc3RNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxMSVJQU3VnZ2VzdGlvbkludGVyZmFjZT4ge1xuICAgIGl0ZW1zOiBMSVJQU3VnZ2VzdGlvbkxpc3Q7XG4gICAgY2FsbGJhY2s6ICh2YWx1ZTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UpID0+IHZvaWQ7XG4gIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpdGVtczogTElSUFN1Z2dlc3Rpb25MaXN0LCBjYWxsYmFjazogKHZhbHVlOiBMSVJQU3VnZ2VzdGlvbkludGVyZmFjZSkgPT4gdm9pZCkge1xuICAgICAgc3VwZXIoYXBwKTtcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9O1xuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKS5saXN0O1xuICAgIH07XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGl0ZW06IExJUlBTdWdnZXN0aW9uSW50ZXJmYWNlLCBlbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogaXRlbS50aXRsZSB9KTtcbiAgICAgICAgbGV0IG1lc3NhZ2U6c3RyaW5nID0gaXRlbS5kZXNjcmlwdGlvblxuICAgICAgICAvLyBDSE9JQ0UgVE8gRE9cbiAgICAgICAgLy8gaWYgKGl0ZW0ubm90ZU5hbWUgIT09IGl0ZW0udGl0bGUpIHtcbiAgICAgICAgLy8gICAgIGlmIChpdGVtLmRlc2NyaXB0aW9uICE9PSAnJykge1xuICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2UgPSBgJHtpdGVtLmRlc2NyaXB0aW9ufVxcbihmcm9tIDogJHtpdGVtLm5vdGVOYW1lfSlgO1xuICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gICAgICAgICBtZXNzYWdlID0gYChmcm9tIDogJHtpdGVtLm5vdGVOYW1lfSlgO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9O1xuICAgICAgICBlbC5jcmVhdGVFbCgnc21hbGwnLCB7dGV4dDogbWVzc2FnZX0pO1xuICAgICAgfTtcbiAgXG4gICAgICBvbkNob29zZVN1Z2dlc3Rpb24oaXRlbTogTElSUFN1Z2dlc3Rpb25JbnRlcmZhY2UsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhpdGVtKTtcbiAgICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0SXRlbVJhbmRvbVBpY2tlciBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IExJUlBQbHVnaW5TZXR0aW5ncztcbiAgICBsb2dzOiBMSVJQTG9nO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLmxvZ3MgPSBuZXcgTElSUExvZygpO1xuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2xpc3QtdHJlZScsICdQaWNrIHJhbmRvbSBsaXN0IGl0ZW0nLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByZXBhcmVBY3Rpb24oJ25vdGUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LXJhbmRvbS1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgcmFuZG9tIGl0ZW0gZnJvbSBsaXN0JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlQWN0aW9uKCdub3RlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2luc2VydC1saXN0LXNldHRpbmctaXRlbScsXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IGxpc3Qgc2V0dGluZ3MgdmFsdWVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRTdHJpbmcoTElSUExpc3QuZ2V0U2V0dGluZ1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LW5vdGUtc2V0dGluZy1pdGVtJyxcbiAgICAgICAgICAgIG5hbWU6ICdJbnNlcnQgbm90ZSBzZXR0aW5ncyB2YWx1ZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydFN0cmluZyhMSVJQTm90ZS5nZXRTZXR0aW5nU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdpbnNlcnQtcmVmZXJlbmNlLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBsaXN0IHJlZmVyZW5jZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUFjdGlvbigncmVmZXJlbmNlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3JlcGxhY2UtcmVmZXJlbmNlLWl0ZW0nLFxuICAgICAgICAgICAgbmFtZTogJ1JlcGxhY2UgcmVmZXJlbmNlcyBpbiBzZWxlY3Rpb24nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmVBY3Rpb24oJ2RvUmVmU3Vic3RpdHV0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTElSUFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgb251bmxvYWQoKSB7XG4gICAgfTtcblxuICAgIGdldExJUlBGaWxlcyAobm90ZVBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgbGV0IGFsbFZhdWx0RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBmaWxlc0luTm90ZVBhdGg6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IGZvdW5kQUZpbGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgbm90ZUZpbGVOYW1lOiBzdHJpbmcgPSBgJHtub3RlUGF0aH0ubWRgXG4gICAgICAgIGNvbnN0IG5vdGVQYXRoUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtub3RlUGF0aH0vLitcXC5tZCRgKTtcbiAgICAgICAgYWxsVmF1bHRGaWxlcy5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChub3RlUGF0aFJlZ2V4LnRlc3QoZWxlbWVudC5wYXRoKSkge1xuICAgICAgICAgICAgICAgIGZpbGVzSW5Ob3RlUGF0aC5wdXNoKGVsZW1lbnQucGF0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQucGF0aCA9PT0gbm90ZUZpbGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgZm91bmRBRmlsZSA9IHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpbGVzSW5Ob3RlUGF0aC5sZW5ndGggPT09IDAgJiYgZm91bmRBRmlsZSkge1xuICAgICAgICAgICAgZmlsZXNJbk5vdGVQYXRoLnB1c2gobm90ZUZpbGVOYW1lKTtcbiAgICAgICAgfSBlbHNlIGlmIChmb3VuZEFGaWxlICYmIGZpbGVzSW5Ob3RlUGF0aC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCdMaXN0SXRlbVJhbmRtUGlja2VyJywnZ2V0TElSUEZpbGVzJywnZm9sZGVyQW5kRmlsZScpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzSW5Ob3RlUGF0aDtcbiAgICB9O1xuXG4gICAgYXN5bmMgbG9hZExJUlBGaWxlcygpOiBQcm9taXNlPExJUlBNdWx0aU5vdGU+IHtcbiAgICAgICAgY29uc3QgYWxsTElSUEZpbGVzID0gdGhpcy5nZXRMSVJQRmlsZXModGhpcy5zZXR0aW5ncy5ub3RlUGF0aCk7XG4gICAgICAgIGxldCBjdXJyZW50TElSUCA9IG5ldyBMSVJQTXVsdGlOb3RlKHRoaXMuc2V0dGluZ3MubnVsbFZhbHVlLCB0aGlzLnNldHRpbmdzLmVzY2FwZVZhbHVlLCB0aGlzLnNldHRpbmdzLmNvbW1lbnRWYWx1ZSwgdGhpcy5zZXR0aW5ncy5tYXhSZWZlcmVuY2VEZXB0aCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBjdXJyZW50RmlsZSBvZiBhbGxMSVJQRmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGU09iamVjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjdXJyZW50RmlsZSk7XG4gICAgICAgICAgICBsZXQgY29udGVudDpzdHJpbmcgPSAnJztcbiAgICAgICAgICAgIGlmIChjdXJyZW50RlNPYmplY3QgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGN1cnJlbnRGU09iamVjdCk7XG4gICAgICAgICAgICAgICAgY3VycmVudExJUlAubG9hZEZyb21Ob3RlKGN1cnJlbnRGU09iamVjdC5wYXRoLnNsaWNlKDAsIC0zKSwgY29udGVudCk7XG4gICAgICAgICAgICB9OyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjdXJyZW50TElSUDtcbiAgICB9O1xuXG4gICAgYXN5bmMgcHJlcGFyZUFjdGlvbihhY3Rpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjdXJyZW50TElSUCA9IGF3YWl0IHRoaXMubG9hZExJUlBGaWxlcygpO1xuICAgICAgICBpZiAoY3VycmVudExJUlAubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCgnTGlzdEl0ZW1SYW5kb21QaWNrZXInLCdsb2FkTElSUEZpbGVzJywncGF0aFNldHRpbmcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFjdXJyZW50TElSUC5oYXNFcnJvcnMoKSAmJiBjdXJyZW50TElSUC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdkb1JlZlN1YnN0aXR1dGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvUmVmZXJlbmNlU3Vic3RpdHV0aW9uKGN1cnJlbnRMSVJQKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMSVJQLmxlbmd0aCA9PT0gMSB8fCAhdGhpcy5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBMSVJQU3VnZ2VzdE1vZGFsKHRoaXMuYXBwLCBjdXJyZW50TElSUC5nZXRMaXN0U3VnZ2VzdGlvbihhY3Rpb24gPT09ICdyZWZlcmVuY2UnKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya1dpdGhUaXRsZShjdXJyZW50TElSUCwgaXRlbS50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0U3RyaW5nKGB7JHtpdGVtLnRpdGxlfX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0Tm90ZVN1Z2dlc3Rpb24oYWN0aW9uID09PSAncmVmZXJlbmNlJyksIChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTElSUFN1Z2dlc3RNb2RhbCh0aGlzLmFwcCwgY3VycmVudExJUlAuZ2V0TGlzdFN1Z2dlc3Rpb24oYWN0aW9uID09PSAncmVmZXJlbmNlJykuZmlsdGVyQnlOb3RlTmFtZShpdGVtLm5vdGVOYW1lKSwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnbm90ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrV2l0aFRpdGxlKGN1cnJlbnRMSVJQLCBpdGVtLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydFN0cmluZyhgeyR7aXRlbS50aXRsZX19YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG9Mb2dNYW5hZ2VtZW50KGN1cnJlbnRMSVJQLmdldExvZ3MoKSk7XG4gICAgICAgIHRoaXMubG9ncy5mbHVzaCgpO1xuICAgICAgICBjdXJyZW50TElSUC5mbHVzaExvZ3MoKTtcbiAgICB9O1xuXG4gICAgZG9Mb2dNYW5hZ2VtZW50KG11bHRpTm90ZUxvZ3M/OiBMSVJQTG9nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFsbExvZ3MgPSB0aGlzLmxvZ3M7XG4gICAgICAgIGlmIChtdWx0aU5vdGVMb2dzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFsbExvZ3MuYWRkKG11bHRpTm90ZUxvZ3MpO1xuICAgICAgICAgICAgbXVsdGlOb3RlTG9ncy5mbHVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvck1zZzogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3Qgd2FybmluZ01zZzogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgaW5mb01zZzogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgYWxsTG9ncy5sb2dzLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlbGVtZW50LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cEluTm90ZSc6XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cucHVzaChgTGlzdCBcIiR7ZWxlbWVudC5jaGlsZH1cIiBpcyBkdXBsaWNhdGUgaW4gbm90ZSBcIiR7ZWxlbWVudC5mYXRoZXJ9XCIuIExpc3QgaXMgaWdub3JlZGApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkdXBJbkZvbGRlcic6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTXNnLnB1c2goYEVSUk9SIDogTGlzdCBcIiR7ZWxlbWVudC5jaGlsZH1cIiBleGlzdHMgaW4gdHdvIG5vdGVzLCBcIiR7ZWxlbWVudC5mYXRoZXJ9XCIgYW5kIFwiJHtlbGVtZW50LmNvbXBsZW1lbnR9XCIsIG1ha2UgY29ycmVjdGlvbiAhYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2VtcHR5TGlzdCc6XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cucHVzaChgTGlzdCBcIiR7ZWxlbWVudC5jaGlsZH1cIiBpcyBlbXB0eSBpbiBcIiR7ZWxlbWVudC5mYXRoZXJ9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1wdHlOb3RlJzpcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ01zZy5wdXNoKGBcIiR7ZWxlbWVudC5jaGlsZH1cIiBpcyBlbXB0eWApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyZWZMaW1pdCc6XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cucHVzaChgUmVmZXJlbmNlIGRlcHRoIGxpbWl0IHJlYWNoIHdpdGggbGlzdCBcIiR7ZWxlbWVudC5jaGlsZH1cIiBpbiBub3RlIFwiJHtlbGVtZW50LmZhdGhlcn1cImApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBjYXNlICdzdWJSZWZMaW1pdCc6XG4gICAgICAgICAgICAgICAgLy8gICAgIHdhcm5pbmdNc2cucHVzaChgUmVmZXJlbmNlIGRlcHRoIGxpbWl0IHJlYWNoYCk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhdGhTZXR0aW5nJzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2cucHVzaChgRVJST1IgOiB2ZXJpZnkgcGF0aCBpbiBwbHVnaW4gc2V0dGluZ3NgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZm9sZGVyQW5kRmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cucHVzaChgQSBub3RlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZm9sZGVyIGluIHNldHRpbmdzIGdldHMgaWdub3JlZC5gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hvd0l0ZW0nOlxuICAgICAgICAgICAgICAgICAgICBpbmZvTXNnLnB1c2goYCR7ZWxlbWVudC5jb21wbGVtZW50fWApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdub0FjdGl2ZVZpZXcnOlxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nTXNnLnB1c2goYE5vIG5vdGUgaW4gZWRpdGlvbiBtb2RlIHRvIGRvIHRoaXMgYWN0aW9uYCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVycm9yTXNnLm1hcCgoZWxlbWVudCkgPT4gbmV3IE5vdGljZShlbGVtZW50KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93V2FybmluZykge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdNc2cubWFwKChlbGVtZW50KSA9PiBuZXcgTm90aWNlKGVsZW1lbnQpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbmZvTXNnLm1hcCgoZWxlbWVudCkgPT4gbmV3IE5vdGljZShlbGVtZW50KSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvZ3MuZmx1c2goKTtcbiAgICB9O1xuXG4gICAgd29ya1dpdGhUaXRsZShub3RlOiBMSVJQTXVsdGlOb3RlLCBsaXN0VGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbkZvck5vdGlmaWNhdGlvblJlZ2V4OnN0cmluZyA9IGBeJHt0aGlzLnNldHRpbmdzLnNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbn0kYDtcbiAgICAgICAgICAgIGNvbnN0IG5vdGljZVJlZ2V4ID0gbmV3IFJlZ0V4cChzZWxlY3Rpb25Gb3JOb3RpZmljYXRpb25SZWdleCk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmIChub3RpY2VSZWdleC50ZXN0KHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ3MucHVzaCgnJywnJywnc2hvd0l0ZW0nLG5vdGUucGlja1JhbmRvbUl0ZW1Gcm9tTGlzdChsaXN0VGl0bGUpKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWxldGVTZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlVmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RyaW5nVG9JbnNlcnQ6IHN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdEluc2VydFJlZ0V4ID0gL14oXFxkKykoLiopL2dtO1xuICAgICAgICAgICAgICAgIGxldCByZWdFeEV4ZWN1dGlvbjtcbiAgICAgICAgICAgICAgICBsZXQgcmVwZWF0OiBudW1iZXI7XG4gICAgICAgICAgICAgICAgaWYgKChyZWdFeEV4ZWN1dGlvbiA9IHJlcGVhdEluc2VydFJlZ0V4LmV4ZWMoc2VsZWN0aW9uKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwZWF0ID0gTnVtYmVyKHJlZ0V4RXhlY3V0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsaW1pdGVyID0gc2VsZWN0aW9uLnJlcGxhY2UoL15cXGQrLywgJycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheVN0cmluZ1RvaW5zZXJ0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVN0cmluZ1RvaW5zZXJ0LnB1c2gobm90ZS5waWNrUmFuZG9tSXRlbUZyb21MaXN0KGxpc3RUaXRsZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1RvSW5zZXJ0ID0gYXJyYXlTdHJpbmdUb2luc2VydC5qb2luKGRlbGltaXRlcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVG9JbnNlcnQgPSBub3RlLnBpY2tSYW5kb21JdGVtRnJvbUxpc3QobGlzdFRpdGxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWN0aXZlVmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihzdHJpbmdUb0luc2VydCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2goJ0xpc3RJdGVtUmFuZG9tUGlja2VyJywnd29ya1dpdGhUaXRsZScsJ25vQWN0aXZlVmlldycpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZG9Mb2dNYW5hZ2VtZW50KG5vdGUuZ2V0TG9ncygpKTtcbiAgICB9O1xuXG4gICAgZG9SZWZlcmVuY2VTdWJzdGl0dXRpb24obXVsdGlOb3RlOiBMSVJQTXVsdGlOb3RlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYWN0aXZlVmlldy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBhY3RpdmVWaWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKG11bHRpTm90ZS5kb1JlZmVyZW5jZVN1YnN0aXR1dGlvbihzZWxlY3Rpb24pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9ncy5wdXNoKCdMaXN0SXRlbVJhbmRvbVBpY2tlcicsJ3dvcmtXaXRoVGl0bGUnLCdub0FjdGl2ZVZpZXcnKVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpbnNlcnRTdHJpbmcoc3RyaW5nVG9JbnNlcnQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgIGFjdGl2ZVZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oc3RyaW5nVG9JbnNlcnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dzLnB1c2goJ0xpc3RJdGVtUmFuZG9tUGlja2VyJywnd29ya1dpdGhUaXRsZScsJ25vQWN0aXZlVmlldycpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZG9Mb2dNYW5hZ2VtZW50KCk7XG4gICAgfTtcblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn1cblxuY2xhc3MgTElSUFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IExpc3RJdGVtUmFuZG9tUGlja2VyO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGlzdEl0ZW1SYW5kb21QaWNrZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1BhdGgnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBwYXRoIG9mIGEgbm90ZSBvciBmb2xkZXIuIEV4YW1wbGU6IFwiRm9sZGVyL05vdGVcIiBvciBcIkZvbGRlclwiLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHRoZSBwYXRoIHRvIHlvdXIgbm90ZScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm5vdGVQYXRoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIlNwZWNpZmljIHZhbHVlc1wiIH0pO1xuICAgIFxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJOdWxsIHZhbHVlXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJJZiB0aGUgZmlyc3QgbGluZSBvZiBhIGxpc3QgaXRlbSBoYXMgdGhpcyB2YWx1ZSwgdGhhdCBsaW5lIGlzIGlnbm9yZWQuIFRoaXMgYWxsb3dzIHlvdSB0byBoYXZlIHByb2JhYmlsaXRpZXMgb2YgZ2V0dGluZyBubyByZXN1bHQuIFVzYWdlIGV4YW1wbGU6IGhhdmluZywgb3Igbm90IGhhdmluZywgYSBwYXJ0aWNsZSBpbiBhIG5vdW4uXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgdmFsdWVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm51bGxWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5udWxsVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkVzY2FwZSB2YWx1ZVwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiVG8gaW5jbHVkZSBoZWFkaW5nIG9uZSBlbGVtZW50cyBvciBmaXJzdC1sZXZlbCBsaXN0IGl0ZW1zIGluIHlvdXIgcmFuZG9tIGxpc3QsIGVzY2FwZSB0aGVtIHdpdGggdGhlc2UgdmFsdWVzLiBFeGVtcGxlIDogLy8gIyBIZWFkaW5nXCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgdmFsdWVcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVzY2FwZVZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lc2NhcGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiU2VsZWN0aW9uIHZhbHVlIGZvciBub3RpZmljYXRpb25cIilcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIklmIHRoZSBzZWxlY3RlZCB0ZXh0IGhhcyB0aGlzIHZhbHVlLCB0aGUgaXRlbSBpcyBub3QgaW5zZXJ0ZWQ7IGluc3RlYWQsIGEgbm90aWZpY2F0aW9uIGlzIHNob3duLlwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIHZhbHVlXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3Rpb25Gb3JOb3RpZmljYXRpb24pXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0JlaGF2aW9yJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IG5vdGUgc2VsZWN0b3InKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHBhdGggaXMgYSBmb2xkZXIgY29udGFpbmluZyBhdCBsZWFzdCB0d28gbm90ZXMsIGEgc2VsZWN0b3Igd2lsbCBhbGxvdyB5b3UgdG8gY2hvb3NlIHRoZSBub3RlOyBvdGhlcndpc2UsIGFsbCBsaXN0cyB3aWxsIGJlIG9mZmVyZWQgdG8geW91LicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGVTZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Tm90ZVNlbGVjdG9yID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IHdhcm5pbmcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FyZSB3YXJuaW5ncyBkaXNwbGF5ZWQgYXMgbm90aWZpY2F0aW9ucyA/JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2FybmluZyk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93V2FybmluZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVsZXRlIHNlbGVjdGlvbiB2YWx1ZSBvbiBub3RpZmljYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIHRoaXMgc2V0dGluZyBpcyBvbiwgdGhlIHNlbGVjdGVkIG5vdGlmaWNhdGlvbiB2YWx1ZSBpcyByZW1vdmVkIGFmdGVyIGl0XFwncyB1c2VkLicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVsZXRlU2VsZWN0aW9uRm9yTm90aWZpY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVNlbGVjdGlvbkZvck5vdGlmaWNhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVmZXJlbmNlIGRlcHRoIGxpbWl0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZWZlcmVuY2UgcmVjdXJzaW9uIGxpbWl0OiB0aGUgbWF4aW11bSBudW1iZXIgb2YgbmVzdGVkIHJlZmVyZW5jZSBjYWxscyBhbGxvd2VkLiBaZXJvIGRpc2FibGVzIHJlZmVyZW5jZSByZXNvbHV0aW9uLicpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGlkZXIpID0+XG4gICAgICAgICAgICAgICAgc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhSZWZlcmVuY2VEZXB0aClcbiAgICAgICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxMCwgMSlcbiAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhSZWZlcmVuY2VEZXB0aCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQWlHO0FBRWpHLFNBQVMsWUFBZSxTQUFjLFdBQTZEO0FBQy9G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S0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNuQyxDQUFDO0FBQUEsSUFDTDtBQUVKLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRS9DLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLG9CQUFvQixFQUM1QixRQUFRLCtJQUErSSxFQUN2SixVQUFVLENBQUMsV0FBVztBQUNuQixhQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCO0FBQ3JELGFBQU8sU0FBUyxPQUFPLFVBQVU7QUFDN0IsYUFBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNuQyxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBRUwsUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsY0FBYyxFQUN0QixRQUFRLDJDQUEyQyxFQUNuRCxVQUFVLENBQUMsV0FBVztBQUNuQixhQUFPLFNBQVMsS0FBSyxPQUFPLFNBQVMsV0FBVztBQUNoRCxhQUFPLFNBQVMsT0FBTyxVQUFVO0FBQzdCLGFBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ25DLENBQUM7QUFBQSxJQUNMLENBQUM7QUFFTCxRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSx3Q0FBd0MsRUFDaEQsUUFBUSxvRkFBcUYsRUFDN0YsVUFBVSxDQUFDLFdBQVc7QUFDbkIsYUFBTyxTQUFTLEtBQUssT0FBTyxTQUFTLDhCQUE4QjtBQUNuRSxhQUFPLFNBQVMsT0FBTyxVQUFVO0FBQzdCLGFBQUssT0FBTyxTQUFTLGlDQUFpQztBQUN0RCxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDbkMsQ0FBQztBQUFBLElBQ0wsQ0FBQztBQUVMLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLHVCQUF1QixFQUMvQixRQUFRLHNIQUFzSCxFQUM5SDtBQUFBLE1BQVUsQ0FBQyxXQUNSLE9BQ0ssU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsRUFDL0MsVUFBVSxHQUFHLElBQUksQ0FBQyxFQUNsQixrQkFBa0IsRUFDbEIsU0FBUyxPQUFPLFVBQVU7QUFDM0IsYUFBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQ3pDLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUMvQixDQUFDO0FBQUEsSUFDVDtBQUFBLEVBRVI7QUFDSjsiLAogICJuYW1lcyI6IFsiaXRlbSIsICJlbGVtZW50IiwgInJlcGVhdCJdCn0K
